"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[83],{5144:(e,t,r)=>{r.d(t,{Z:()=>Q});var a=r(37703),i=r(14890),n=r(22428),o=r(97381),s=r(45697),l=r.n(s),d=r(67294),u=r(29487),c=r(61988),h=r(51995),p=r(68492),m=r(91877),g=r(93185),f=r(9531),y=r(35932),v=r(38703),b=r(57902),Z=r(18446),S=r.n(Z),R=r(11865),C=r.n(R),T=r(88274),w=r(16355),D=r(3741),x=r(11965);const k={annotationData:l().object,actions:l().object,chartId:l().number.isRequired,datasource:l().object,initialValues:l().object,formData:l().object.isRequired,labelColors:l().object,height:l().number,width:l().number,setControlValue:l().func,vizType:l().string.isRequired,triggerRender:l().bool,chartAlert:l().string,chartStatus:l().string,queriesResponse:l().arrayOf(l().object),triggerQuery:l().bool,refreshOverlayVisible:l().bool,addFilter:l().func,setDataMask:l().func,onFilterMenuOpen:l().func,onFilterMenuClose:l().func,ownState:l().object},P={},F={addFilter:()=>P,onFilterMenuOpen:()=>P,onFilterMenuClose:()=>P,initialValues:P,setControlValue(){},triggerRender:!1};class q extends d.Component{constructor(e){super(e),this.hasQueryResponseChange=!1,this.handleAddFilter=this.handleAddFilter.bind(this),this.handleRenderSuccess=this.handleRenderSuccess.bind(this),this.handleRenderFailure=this.handleRenderFailure.bind(this),this.handleSetControlValue=this.handleSetControlValue.bind(this),this.hooks={onAddFilter:this.handleAddFilter,onError:this.handleRenderFailure,setControlValue:this.handleSetControlValue,onFilterMenuOpen:this.props.onFilterMenuOpen,onFilterMenuClose:this.props.onFilterMenuClose,setDataMask:e=>{var t;null==(t=this.props.actions)||t.updateDataMask(this.props.chartId,e)}}}shouldComponentUpdate(e){var t,r;return!(!(e.queriesResponse&&["success","rendered"].indexOf(e.chartStatus)>-1)||null!=(t=e.queriesResponse)&&null!=(r=t[0])&&r.error||e.refreshOverlayVisible)&&(this.hasQueryResponseChange=e.queriesResponse!==this.props.queriesResponse,this.hasQueryResponseChange||!S()(e.datasource,this.props.datasource)||e.annotationData!==this.props.annotationData||e.ownState!==this.props.ownState||e.filterState!==this.props.filterState||e.height!==this.props.height||e.width!==this.props.width||e.triggerRender||e.labelColors!==this.props.labelColors||e.formData.color_scheme!==this.props.formData.color_scheme||e.cacheBusterProp!==this.props.cacheBusterProp)}handleAddFilter(e,t,r=!0,a=!0){this.props.addFilter(e,t,r,a)}handleRenderSuccess(){const{actions:e,chartStatus:t,chartId:r,vizType:a}=this.props;["loading","rendered"].indexOf(t)<0&&e.chartRenderingSucceeded(r),this.hasQueryResponseChange&&e.logEvent(D.aD,{slice_id:r,viz_type:a,start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:D.Yd.getTimestamp()-this.renderStartTime})}handleRenderFailure(e,t){const{actions:r,chartId:a}=this.props;p.Z.warn(e),r.chartRenderingFailed(e.toString(),a,t?t.componentStack:null),this.hasQueryResponseChange&&r.logEvent(D.aD,{slice_id:a,has_err:!0,error_details:e.toString(),start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:D.Yd.getTimestamp()-this.renderStartTime})}handleSetControlValue(...e){const{setControlValue:t}=this.props;t&&t(...e)}render(){const{chartAlert:e,chartStatus:t,vizType:r,chartId:a,refreshOverlayVisible:i}=this.props;if(i||"loading"===t||e||null===t)return null;this.renderStartTime=D.Yd.getTimestamp();const{width:n,height:o,datasource:s,annotationData:l,initialValues:d,ownState:u,filterState:c,formData:h,queriesResponse:p}=this.props,m=C()(r),g="table"===r?`superset-chart-${m}`:m;return(0,x.tZ)(T.Z,{disableErrorBoundary:!0,key:`${a}`,id:`chart-id-${a}`,className:g,chartType:r,width:n,height:o,annotationData:l,datasource:s,initialValues:d,formData:h,ownState:u,filterState:c,hooks:this.hooks,behaviors:[w.cg.INTERACTIVE_CHART],queriesData:p,onRenderSuccess:this.handleRenderSuccess,onRenderFailure:this.handleRenderFailure})}}q.propTypes=k,q.defaultProps=F;const M=q;var E=r(5872),N=r.n(E),O=r(67994),$=r(72875);const I=({chartId:e,error:t,...r})=>{const{result:a}=(0,O.hb)(e),i=t&&{...t,extra:{...t.extra,owners:a}};return(0,x.tZ)($.Z,N()({},r,{error:i}))},_={annotationData:l().object,actions:l().object,chartId:l().number.isRequired,datasource:l().object,dashboardId:l().number,initialValues:l().object,formData:l().object.isRequired,labelColors:l().object,width:l().number,height:l().number,setControlValue:l().func,timeout:l().number,vizType:l().string.isRequired,triggerRender:l().bool,force:l().bool,isFiltersInitialized:l().bool,isDeactivatedViz:l().bool,chartAlert:l().string,chartStatus:l().string,chartStackTrace:l().string,queriesResponse:l().arrayOf(l().object),triggerQuery:l().bool,refreshOverlayVisible:l().bool,errorMessage:l().node,addFilter:l().func,onQuery:l().func,onFilterMenuOpen:l().func,onFilterMenuClose:l().func,ownState:l().object},z={},j=(0,c.t)("The dataset associated with this chart no longer exists"),A={addFilter:()=>z,onFilterMenuOpen:()=>z,onFilterMenuClose:()=>z,initialValues:z,setControlValue(){},triggerRender:!1,dashboardId:null,chartStackTrace:null,isDeactivatedViz:!1,force:!1},U=h.iK.div`
  min-height: ${e=>e.height}px;
  position: relative;

  .chart-tooltip {
    opacity: 0.75;
    font-size: ${({theme:e})=>e.typography.sizes.s}px;
  }
`,V=h.iK.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
`;class K extends d.PureComponent{constructor(e){super(e),this.handleRenderContainerFailure=this.handleRenderContainerFailure.bind(this)}componentDidMount(){this.props.triggerQuery&&"UNDECIDED"!==this.props.filterboxMigrationState&&this.runQuery()}componentDidUpdate(){if(this.props.triggerQuery&&"UNDECIDED"!==this.props.filterboxMigrationState){if(this.props.isDeactivatedViz&&this.props.queriesResponse)return;this.runQuery()}}runQuery(){this.props.chartId>0&&(0,m.cr)(g.T.CLIENT_CACHE)?this.props.actions.getSavedChart(this.props.formData,this.props.force,this.props.timeout,this.props.chartId,this.props.dashboardId,this.props.ownState):this.props.actions.postChartFormData(this.props.formData,this.props.force,this.props.timeout,this.props.chartId,this.props.dashboardId,this.props.ownState)}handleRenderContainerFailure(e,t){const{actions:r,chartId:a}=this.props;p.Z.warn(e),r.chartRenderingFailed(e.toString(),a,t?t.componentStack:null),r.logEvent(D.aD,{slice_id:a,has_err:!0,error_details:e.toString(),start_offset:this.renderStartTime,ts:(new Date).getTime(),duration:D.Yd.getTimestamp()-this.renderStartTime})}renderErrorMessage(e){var t;const{chartId:r,chartAlert:a,chartStackTrace:i,datasource:n,dashboardId:o,height:s}=this.props,l=null==e||null==(t=e.errors)?void 0:t[0],d=a||(null==e?void 0:e.message);return void 0!==a&&a!==j&&n===f.t?(0,x.tZ)(U,{"data-ui-anchor":"chart",className:"chart-container",height:s},(0,x.tZ)(v.Z,null)):(0,x.tZ)(I,{chartId:r,error:l,subtitle:d,copyText:d,link:e?e.link:null,source:o?"dashboard":"explore",stackTrace:i})}render(){const{height:e,chartAlert:t,chartStatus:r,errorMessage:a,onQuery:i,refreshOverlayVisible:n,queriesResponse:o=[],isDeactivatedViz:s=!1,width:l}=this.props,d="loading"===r,h=n&&!a;return this.renderContainerStartTime=D.Yd.getTimestamp(),"failed"===r?o.map((e=>this.renderErrorMessage(e))):a?(0,x.tZ)(u.Z,{message:a,type:"warning"}):(0,x.tZ)(b.Z,{onError:this.handleRenderContainerFailure,showMessage:!1},(0,x.tZ)(U,{"data-ui-anchor":"chart",className:"chart-container",height:e,width:l},(0,x.tZ)("div",{className:"slice_container "+(h?" faded":"")},(0,x.tZ)(M,this.props)),!d&&!t&&h&&(0,x.tZ)(V,null,(0,x.tZ)(y.Z,{onClick:i,buttonStyle:"primary"},(0,c.t)("Run query"))),d&&!s&&(0,x.tZ)(v.Z,null)))}}K.propTypes=_,K.defaultProps=A;const L=K;var B=r(74599);const Q=(0,a.$j)(null,(function(e){return{actions:(0,i.DE)({...n,updateDataMask:B.eG,logEvent:o.logEvent},e)}}))(L)},2275:(e,t,r)=>{r.d(t,{cP:()=>l,$6:()=>d,Rw:()=>u,Er:()=>c,DZ:()=>h,$X:()=>p,ck:()=>y});var a=r(45697),i=r.n(a),n=r(81255),o=r(713),s=r(79271);const l=i().shape({id:i().string.isRequired,type:i().oneOf(Object.values(n.ZP)).isRequired,parents:i().arrayOf(i().string),children:i().arrayOf(i().string),meta:i().shape({width:i().number,height:i().number,headerSize:i().oneOf(s.Z.map((e=>e.value))),background:i().oneOf(o.Z.map((e=>e.value))),chartId:i().number})}),d=i().shape({id:i().number.isRequired,chartAlert:i().string,chartStatus:i().string,chartUpdateEndTime:i().number,chartUpdateStartTime:i().number,latestQueryFormData:i().object,queryController:i().shape({abort:i().func}),queriesResponse:i().arrayOf(i().object),triggerQuery:i().bool,lastRendered:i().number}),u=i().shape({slice_id:i().number.isRequired,slice_url:i().string.isRequired,slice_name:i().string.isRequired,datasource:i().string,datasource_name:i().string,datasource_link:i().string,changed_on:i().number.isRequired,modified:i().string.isRequired,viz_type:i().string.isRequired,description:i().string,description_markeddown:i().string,owners:i().arrayOf(i().string)}),c=i().shape({chartId:i().number.isRequired,componentId:i().string.isRequired,filterName:i().string.isRequired,datasourceId:i().string.isRequired,directPathToFilter:i().arrayOf(i().string).isRequired,isDateFilter:i().bool.isRequired,isInstantFilter:i().bool.isRequired,columns:i().object,labels:i().object,scopes:i().object}),h=i().shape({sliceIds:i().arrayOf(i().number).isRequired,expandedSlices:i().object,editMode:i().bool,isPublished:i().bool.isRequired,colorNamespace:i().string,colorScheme:i().string,updatedColorScheme:i().bool,hasUnsavedChanges:i().bool}),p=i().shape({id:i().number.isRequired,metadata:i().object,slug:i().string,dash_edit_perm:i().bool.isRequired,dash_save_perm:i().bool.isRequired,common:i().object,userId:i().string.isRequired}),m=i().shape({value:i().oneOfType([i().number,i().string]).isRequired,label:i().string.isRequired}),g={value:i().oneOfType([i().number,i().string]).isRequired,label:i().string.isRequired,children:i().arrayOf(i().oneOfType([i().shape((f=()=>g,()=>f().apply(void 0,arguments))),m]))};var f;const y=i().oneOfType([i().shape(g),m])},14086:(e,t,r)=>{r.d(t,{Z:()=>h}),r(67294);var a=r(45697),i=r.n(a),n=r(61988),o=r(67190),s=r(37921),l=r(58593),d=r(11965);const u={rowcount:i().number,limit:i().number,rows:i().string,suffix:i().string,loading:i().bool},c={suffix:(0,n.t)("rows")};function h({rowcount:e,limit:t,suffix:r,loading:a}){const i=e===t,u=i||0===e&&!a?"danger":"default",c=(0,o.JB)()(e),h=(0,d.tZ)("span",null,i&&(0,d.tZ)("div",null,(0,n.t)("Limit reached")),a?"Loading":e);return(0,d.tZ)(l.u,{id:"tt-rowcount-tooltip",title:h},(0,d.tZ)(s.Z,{type:u},a?"Loading...":`${c} ${r}`))}h.propTypes=u,h.defaultProps=c},88274:(e,t,r)=>{r.d(t,{Z:()=>x});var a=r(5872),i=r.n(a),n=r(67294),o=r(47859),s=r(86170),l=r(22222),d=r(80644),u=r(54085),c=r(74464),h=r(9330),p=r(89453),m=r(11965);function g(e){return e}const f=()=>null,y={id:"",className:"",preTransformProps:g,overrideTransformProps:void 0,postTransformProps:g,onRenderSuccess(){},onRenderFailure(){}},v=new h.Z;class b extends n.PureComponent{constructor(...e){super(...e),this.container=void 0,this.processChartProps=(0,l.P1)((e=>e.chartProps),(e=>e.preTransformProps),(e=>e.transformProps),(e=>e.postTransformProps),((e,t=g,r=g,a=g)=>a(r(t(e))))),this.createLoadableRenderer=(0,l.P1)((e=>e.chartType),(e=>e.overrideTransformProps),((e,t)=>{if(e){const r=(0,p.Z)({loader:{Chart:()=>(0,u.Z)().getAsPromise(e),transformProps:t?()=>Promise.resolve(t):()=>(0,c.Z)().getAsPromise(e)},loading:t=>this.renderLoading(t,e),render:this.renderChart});return r.preload(),r}return f})),this.renderChart=(e,t)=>{const{Chart:r,transformProps:a}=e,{chartProps:i,preTransformProps:n,postTransformProps:o}=t;return(0,m.tZ)(r,this.processChartProps({chartProps:i,preTransformProps:n,transformProps:a,postTransformProps:o}))},this.renderLoading=(e,t)=>{const{error:r}=e;return r?(0,m.tZ)("div",{className:"alert alert-warning",role:"alert"},(0,m.tZ)("strong",null,"ERROR")," ",(0,m.tZ)("code",null,'chartType="',t,'"')," —",r.toString()):null},this.setRef=e=>{this.container=e}}render(){const{id:e,className:t,preTransformProps:r,postTransformProps:a,chartProps:n=v,onRenderSuccess:o,onRenderFailure:s}=this.props,l=this.createLoadableRenderer(this.props);if(null===n)return null;const d={};return e&&(d.id=e),t&&(d.className=t),(0,m.tZ)("div",i()({},d,{ref:this.setRef}),(0,m.tZ)(l,{preTransformProps:r,postTransformProps:a,chartProps:n,onRenderSuccess:o,onRenderFailure:s}))}}b.defaultProps=y;const Z={backgroundColor:"#000",color:"#fff",overflow:"auto",padding:32};var S=r(61988);const R={maxWidth:800},C={fontSize:16,fontWeight:"bold",paddingBottom:8},T={fontSize:14},w=({className:e,height:t,id:r,width:a})=>{const i=(0,n.useMemo)((()=>((e,t)=>({alignItems:"center",display:"flex",flexDirection:"column",height:e,justifyContent:"center",padding:16,textAlign:"center",width:t}))(t,a)),[t,a]),o="string"==typeof a||a>250,s=(0,S.t)("No results were returned for this query. If you expected results to be returned, ensure any filters are configured properly and the datasource contains data for the selected time range.");return(0,m.tZ)("div",{className:e,id:r,style:i,title:o?void 0:s},(0,m.tZ)("div",{style:R},(0,m.tZ)("div",{style:C},(0,S.t)("No Results")),o&&(0,m.tZ)("div",{style:T},s)))},D={FallbackComponent:function({componentStack:e,error:t,height:r,width:a}){return(0,m.tZ)("div",{style:{...Z,height:r,width:a}},(0,m.tZ)("div",null,(0,m.tZ)("div",null,(0,m.tZ)("b",null,"Oops! An error occured!")),(0,m.tZ)("code",null,t?t.toString():"Unknown Error")),e&&(0,m.tZ)("div",null,(0,m.tZ)("b",null,"Stack Trace:"),(0,m.tZ)("code",null,e.split("\n").map((e=>(0,m.tZ)("div",{key:e},e))))))},height:400,width:"100%",enableNoResults:!0};class x extends n.PureComponent{constructor(...e){super(...e),this.core=void 0,this.createChartProps=h.Z.createSelector(),this.parseDimension=(0,l.P1)((({width:e})=>e),(({height:e})=>e),((e,t)=>{const r=(0,d.Z)(e),a=(0,d.Z)(t),i={height:a.isDynamic?100*a.multiplier+"%":a.value,width:r.isDynamic?100*r.multiplier+"%":r.value};return{BoundingBox:r.isDynamic&&a.isDynamic&&1===r.multiplier&&1===a.multiplier?n.Fragment:({children:e})=>(0,m.tZ)("div",{style:i},e),heightInfo:a,widthInfo:r}})),this.setRef=e=>{this.core=e}}renderChart(e,t){const{id:r,className:a,chartType:n,preTransformProps:s,overrideTransformProps:l,postTransformProps:d,onRenderSuccess:u,onRenderFailure:c,disableErrorBoundary:h,FallbackComponent:p,onErrorBoundary:g,Wrapper:f,queriesData:y,enableNoResults:v,...Z}=this.props,S=this.createChartProps({...Z,queriesData:y,height:t,width:e});let R;if(!v||y&&!y.every((({data:e})=>!e||Array.isArray(e)&&0===e.length))){const i=(0,m.tZ)(b,{ref:this.setRef,id:r,className:a,chartType:n,chartProps:S,preTransformProps:s,overrideTransformProps:l,postTransformProps:d,onRenderSuccess:u,onRenderFailure:c});R=f?(0,m.tZ)(f,{width:e,height:t},i):i}else R=(0,m.tZ)(w,{id:r,className:a,height:t,width:e});return!0===h?R:(0,m.tZ)(o.ZP,{FallbackComponent:r=>(0,m.tZ)(p,i()({width:e,height:t},r)),onError:g},R)}render(){const{heightInfo:e,widthInfo:t,BoundingBox:r}=this.parseDimension(this.props);if(t.isDynamic||e.isDynamic){const{debounceTime:a}=this.props;return(0,m.tZ)(r,null,(0,m.tZ)(s.Z,{debounceTime:a},(({width:r,height:a})=>this.renderChart(t.isDynamic?Math.floor(r):t.value,e.isDynamic?Math.floor(a):e.value))))}return this.renderChart(t.value,e.value)}}x.defaultProps=D},89453:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(68356),i=r.n(a);const n={onRenderFailure(){},onRenderSuccess(){}};function o(e){const t=i().Map(e);class r extends t{componentDidMount(){this.afterRender()}componentDidUpdate(){this.afterRender()}afterRender(){const{loaded:e,loading:t,error:r}=this.state,{onRenderFailure:a,onRenderSuccess:i}=this.props;t||(r?a(r):e&&Object.keys(e).length>0&&i())}}return r.defaultProps=void 0,r.defaultProps=n,r.preload=t.preload,r}},9330:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(22222),i=r(78036);const n=800,o=600;class s{constructor(e={}){this.annotationData=void 0,this.datasource=void 0,this.rawDatasource=void 0,this.initialValues=void 0,this.formData=void 0,this.rawFormData=void 0,this.height=void 0,this.hooks=void 0,this.ownState=void 0,this.filterState=void 0,this.queriesData=void 0,this.width=void 0,this.behaviors=void 0,this.appSection=void 0,this.isRefreshing=void 0;const{annotationData:t={},datasource:r={},formData:a={},hooks:s={},ownState:l={},filterState:d={},initialValues:u={},queriesData:c=[],behaviors:h=[],width:p=n,height:m=o,appSection:g,isRefreshing:f}=e;this.width=p,this.height=m,this.annotationData=t,this.datasource=(0,i.Z)(r),this.rawDatasource=r,this.formData=(0,i.Z)(a),this.rawFormData=a,this.hooks=s,this.initialValues=u,this.queriesData=c,this.ownState=l,this.filterState=d,this.behaviors=h,this.appSection=g,this.isRefreshing=f}}s.createSelector=void 0,s.createSelector=function(){return(0,a.P1)((e=>e.annotationData),(e=>e.datasource),(e=>e.formData),(e=>e.height),(e=>e.hooks),(e=>e.initialValues),(e=>e.queriesData),(e=>e.width),(e=>e.ownState),(e=>e.filterState),(e=>e.behaviors),(e=>e.appSection),(e=>e.isRefreshing),((e,t,r,a,i,n,o,l,d,u,c,h,p)=>new s({annotationData:e,datasource:t,formData:r,height:a,hooks:i,initialValues:n,queriesData:o,ownState:d,filterState:u,width:l,behaviors:c,appSection:h,isRefreshing:p})))}},80644:(e,t,r)=>{r.d(t,{Z:()=>i});const a={isDynamic:!0,multiplier:1};function i(e){return"auto"===e||"100%"===e?a:"string"==typeof e&&e.length>0&&"%"===e[e.length-1]?{isDynamic:!0,multiplier:parseFloat(e)/100}:{isDynamic:!1,value:"number"==typeof e?e:parseFloat(e)}}},78036:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(68929),i=r.n(a),n=r(68630),o=r.n(n),s=r(67523),l=r.n(s);function d(e){if(null==e)return e;if(o()(e))return l()(e,((e,t)=>i()(t)));throw new Error(`Cannot convert input that is not a plain object: ${e}`)}},37488:(e,t,r)=>{r.d(t,{Z:()=>n}),r(67294);var a=r(11965),i={name:"1qbe4ct",styles:"& :nth-child(1):not(:nth-last-child(1)){border-top-right-radius:0;border-bottom-right-radius:0;border-right:0;margin-left:0;}& :not(:nth-child(1)):not(:nth-last-child(1)){border-radius:0;border-right:0;margin-left:0;}& :nth-last-child(1):not(:nth-child(1)){border-top-left-radius:0;border-bottom-left-radius:0;margin-left:0;}"};function n(e){const{className:t,children:r}=e;return(0,a.tZ)("div",{role:"group",className:t,css:i},r)}},9433:(e,t,r)=>{r.d(t,{CronPicker:()=>c});var a=r(5872),i=r.n(a),n=(r(67294),r(79409)),o=r(61988),s=r(51995),l=r(61247),d=r(11965);const u={everyText:(0,o.t)("every"),emptyMonths:(0,o.t)("every month"),emptyMonthDays:(0,o.t)("every day of the month"),emptyMonthDaysShort:(0,o.t)("day of the month"),emptyWeekDays:(0,o.t)("every day of the week"),emptyWeekDaysShort:(0,o.t)("day of the week"),emptyHours:(0,o.t)("every hour"),emptyMinutes:(0,o.t)("every minute"),emptyMinutesForHourPeriod:(0,o.t)("every"),yearOption:(0,o.t)("year"),monthOption:(0,o.t)("month"),weekOption:(0,o.t)("week"),dayOption:(0,o.t)("day"),hourOption:(0,o.t)("hour"),minuteOption:(0,o.t)("minute"),rebootOption:(0,o.t)("reboot"),prefixPeriod:(0,o.t)("Every"),prefixMonths:(0,o.t)("in"),prefixMonthDays:(0,o.t)("on"),prefixWeekDays:(0,o.t)("on"),prefixWeekDaysForMonthAndYearPeriod:(0,o.t)("and"),prefixHours:(0,o.t)("at"),prefixMinutes:(0,o.t)(":"),prefixMinutesForHourPeriod:(0,o.t)("at"),suffixMinutesForHourPeriod:(0,o.t)("minute(s)"),errorInvalidCron:(0,o.t)("Invalid cron expression"),clearButtonText:(0,o.t)("Clear"),weekDays:[(0,o.t)("Sunday"),(0,o.t)("Monday"),(0,o.t)("Tuesday"),(0,o.t)("Wednesday"),(0,o.t)("Thursday"),(0,o.t)("Friday"),(0,o.t)("Saturday")],months:[(0,o.t)("January"),(0,o.t)("February"),(0,o.t)("March"),(0,o.t)("April"),(0,o.t)("May"),(0,o.t)("June"),(0,o.t)("July"),(0,o.t)("August"),(0,o.t)("September"),(0,o.t)("October"),(0,o.t)("November"),(0,o.t)("December")],altWeekDays:[(0,o.t)("SUN"),(0,o.t)("MON"),(0,o.t)("TUE"),(0,o.t)("WED"),(0,o.t)("THU"),(0,o.t)("FRI"),(0,o.t)("SAT")],altMonths:[(0,o.t)("JAN"),(0,o.t)("FEB"),(0,o.t)("MAR"),(0,o.t)("APR"),(0,o.t)("MAY"),(0,o.t)("JUN"),(0,o.t)("JUL"),(0,o.t)("AUG"),(0,o.t)("SEP"),(0,o.t)("OCT"),(0,o.t)("NOV"),(0,o.t)("DEC")]},c=(0,s.iK)((e=>(0,d.tZ)(n.ZP,{getPopupContainer:e=>e.parentElement},(0,d.tZ)(l.Z,i()({locale:u},e)))))`
  .react-js-cron-select:not(.react-js-cron-custom-select) > div:first-of-type,
  .react-js-cron-custom-select {
    border-radius: ${({theme:e})=>e.gridUnit}px;
    background-color: ${({theme:e})=>e.colors.grayscale.light4} !important;
  }
  .react-js-cron-custom-select > div:first-of-type {
    border-radius: ${({theme:e})=>e.gridUnit}px;
  }
`},38270:(e,t,r)=>{r.d(t,{Z:()=>h});var a=r(67294),i=r(94184),n=r.n(i),o=r(51995),s=r(61988),l=r(58593),d=r(79789),u=r(11965);const c=(0,o.iK)(d.Z)`
  vertical-align: middle;
`;function h({canEdit:e=!1,editing:t=!1,extraClasses:r,multiLine:i=!1,noPermitTooltip:o,onSaveTitle:d,showTooltip:h=!0,style:p,title:m="",defaultTitle:g="",placeholder:f="",certifiedBy:y,certificationDetails:v}){const[b,Z]=(0,a.useState)(t),[S,R]=(0,a.useState)(m),[C,T]=(0,a.useState)(m),[w,D]=(0,a.useState)(null),x=(0,a.useRef)();function k(){if(!e||b)return;const t=x.current?x.current.getBoundingClientRect():null;Z(!0),D(t)}function P(){const t=S.trim();e&&(Z(!1),t.length?(C!==t&&T(t),m!==t&&d(t)):R(C))}function F(e){" "===e.key&&e.stopPropagation(),"Enter"===e.key&&(e.preventDefault(),P())}function q(t){e&&R(t.target.value)}function M(e){"Enter"===e.key&&(e.preventDefault(),P())}let E;(0,a.useEffect)((()=>{m!==S&&(T(S),R(m))}),[m]),(0,a.useEffect)((()=>{if(b&&(x.current.focus(),x.current.setSelectionRange)){const{length:e}=x.current.value;x.current.setSelectionRange(e,e),x.current.scrollLeft=x.current.scrollWidth,x.current.scrollTop=x.current.scrollHeight}}),[b]),E=S,b||S||(E=g||m);const N=b&&w?{height:`${w.height}px`}:void 0;let O=i&&b?(0,u.tZ)("textarea",{ref:x,value:E,className:m?void 0:"text-muted",onKeyDown:F,onChange:q,onBlur:P,onClick:k,onKeyPress:M,placeholder:f,style:N}):(0,u.tZ)("input",{ref:x,type:b?"text":"button",value:E,className:m?void 0:"text-muted",onKeyDown:F,onChange:q,onBlur:P,onClick:k,onKeyPress:M,placeholder:f});return h&&!b&&(O=(0,u.tZ)(l.u,{id:"title-tooltip",title:e?(0,s.t)("Click to edit"):o||(0,s.t)("You don't have the rights to alter this title.")},O)),e||(O=(0,u.tZ)("span",{title:E},E)),(0,u.tZ)("span",{className:n()("editable-title",r,e&&"editable-title--editable",b&&"editable-title--editing"),style:p},y&&(0,u.tZ)(a.Fragment,null,(0,u.tZ)(c,{certifiedBy:y,details:v})," "),O)}},48600:(e,t,r)=>{r.d(t,{Z:()=>f});var a=r(11965),i=r(67294),n=r(37703),o=r(51995),s=r(61988),l=r(38097),d=r(12441),u=r(82191),c=r(91877),h=r(93185),p=r(17198);const m=e=>a.iv`
  color: ${e.colors.error.base};
`;var g={name:"833hqy",styles:"width:200px"};function f({showReportModal:e,toggleActive:t,deleteActiveReport:r}){const f=(0,n.v9)((e=>e.reports)),y=f[Object.keys(f)[0]],[v,b]=(0,i.useState)(null),Z=(0,o.Fg)();return(0,c.cr)(h.T.ALERT_REPORTS)?(0,a.tZ)(i.Fragment,null,(0,a.tZ)(u.$i,{overlay:(0,a.tZ)(u.v2,{selectable:!1,css:g},(0,a.tZ)(u.v2.Item,null,(0,s.t)("Email reports active"),(0,a.tZ)(d.r,{checked:null==y?void 0:y.active,onClick:e=>(async(e,r)=>{null!=e&&e.id&&t(e,r)})(y,e),size:"small",css:(0,a.iv)({marginLeft:2*Z.gridUnit},"","")})),(0,a.tZ)(u.v2.Item,{onClick:e},(0,s.t)("Edit email report")),(0,a.tZ)(u.v2.Item,{onClick:()=>b(y),css:m},(0,s.t)("Delete email report"))),trigger:["click"],getPopupContainer:e=>e.closest(".action-button")},(0,a.tZ)("span",{role:"button",className:"action-button",tabIndex:0},(0,a.tZ)(l.Z.Calendar,null))),v&&(0,a.tZ)(p.Z,{description:(0,s.t)("This action will permanently delete %s.",v.name),onConfirm:()=>{v&&(e=>{r(e),b(null)})(v)},onHide:()=>b(null),open:!0,title:(0,s.t)("Delete Report?")})):null}},97860:(e,t,r)=>{r.d(t,{Z:()=>O});var a=r(67294),i=r(61988),n=r(98286),o=r(14890),s=r(37703),l=r(61358),d=r(98978),u=r(70917),c=r(38097),h=r(14114),p=r(51995),m=r(11965),g=r(74069),f=r(35932),y=r(87183),v=r(9433);const b=(0,p.iK)(g.Z)`
  .ant-modal-body {
    padding: 0;
  }

  h4 {
    font-weight: 600;
  }
`,Z=p.iK.div`
  padding: ${({theme:e})=>`${3*e.gridUnit}px ${4*e.gridUnit}px ${2*e.gridUnit}px`};
  label {
    font-size: ${({theme:e})=>e.typography.sizes.s-1}px;
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }
`,S=p.iK.div`
  border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  padding: ${({theme:e})=>`${4*e.gridUnit}px ${4*e.gridUnit}px ${6*e.gridUnit}px`};
  .ant-select {
    width: 100%;
  }
  .control-label {
    font-size: ${({theme:e})=>e.typography.sizes.s-1}px;
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }
`,R=p.iK.span`
  span {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
    vertical-align: middle;
  }
  .text {
    vertical-align: middle;
  }
`,C=p.iK.div`
  margin-bottom: ${({theme:e})=>7*e.gridUnit}px;

  h4 {
    margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
  }
`,T=(0,p.iK)(v.CronPicker)`
  margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
`,w=p.iK.p`
  color: ${({theme:e})=>e.colors.error.base};
`,D=m.iv`
  margin-bottom: 0;
`,x=(0,p.iK)(f.Z)`
  width: ${({theme:e})=>40*e.gridUnit}px;
`,k=p.iK.div`
  margin: ${({theme:e})=>8*e.gridUnit}px 0
    ${({theme:e})=>4*e.gridUnit}px;
`,P=(0,p.iK)(y.Y)`
  display: block;
  line-height: ${({theme:e})=>8*e.gridUnit}px;
`,F=(0,p.iK)(y.Y.Group)`
  margin-left: ${({theme:e})=>.5*e.gridUnit}px;
`;var q;!function(e){e[e.inputChange=0]="inputChange",e[e.fetched=1]="fetched",e[e.reset=2]="reset",e[e.error=3]="error"}(q||(q={}));const M=["pivot_table","pivot_table_v2","table","paired_ttest"],E="TEXT",N=(e,t)=>{const r={name:"Weekly Report"};switch(t.type){case q.inputChange:return{...r,...e,[t.payload.name]:t.payload.value};case q.fetched:return{...r,...t.payload};case q.reset:return{...r};case q.error:return{...e,error:t.payload.name[0]};default:return e}},O=(0,s.$j)(null,(e=>(0,o.DE)({addReport:l.cq,editReport:l.Me},e)))((0,h.Z)((({onReportAdd:e,onHide:t,show:r=!1,...o})=>{var h,p;const g=null==(h=o.props.chart)||null==(p=h.sliceFormData)?void 0:p.viz_type,f=!!o.props.chart,y=f&&M.includes(g)?E:"PNG",[v,O]=(0,a.useReducer)(N,null),$=(0,a.useCallback)(((e,t)=>{O({type:e,payload:t})}),[]),[I,_]=(0,a.useState)(),z=(0,s.I0)(),j=(0,s.v9)((e=>e.reports)),A=j&&Object.keys(j).length;(0,a.useEffect)((()=>{if(A){const e=Object.keys(j),t=j[e[0]];O({type:q.fetched,payload:t})}else O({type:q.reset})}),[j]);const U=(0,m.tZ)(R,null,(0,m.tZ)(c.Z.Calendar,null),(0,m.tZ)("span",{className:"text"},A?(0,i.t)("Edit Email Report"):(0,i.t)("New Email Report"))),V=(0,m.tZ)(a.Fragment,null,(0,m.tZ)(x,{key:"back",onClick:t},(0,i.t)("Cancel")),(0,m.tZ)(x,{key:"submit",buttonStyle:"primary",onClick:async()=>{var r;const a={crontab:null==v?void 0:v.crontab,dashboard:o.props.dashboardId,chart:null==(r=o.props.chart)?void 0:r.id,description:null==v?void 0:v.description,name:null==v?void 0:v.name,owners:[o.props.userId],recipients:[{recipient_config_json:{target:o.props.userEmail},type:"Email"}],type:"Report",creation_method:o.props.creationMethod,active:!0,report_format:(null==v?void 0:v.report_format)||y,timezone:null==v?void 0:v.timezone,force_screenshot:!1};if(A)await z((0,l.Me)(null==v?void 0:v.id,a)),t();else try{await z((0,l.cq)(a)),t()}catch(e){const t=(await(0,n.O)(e)).message;$(q.error,t)}e&&e()},disabled:!(null!=v&&v.name)},A?(0,i.t)("Save"):(0,i.t)("Add"))),K=(0,m.tZ)(a.Fragment,null,(0,m.tZ)(k,null,(0,m.tZ)("h4",null,(0,i.t)("Message Content"))),(0,m.tZ)("div",{className:"inline-container"},(0,m.tZ)(F,{onChange:e=>{$(q.inputChange,{name:"report_format",value:e.target.value})},value:(null==v?void 0:v.report_format)||y},M.includes(g)&&(0,m.tZ)(P,{value:E},(0,i.t)("Text embedded in email")),(0,m.tZ)(P,{value:"PNG"},(0,i.t)("Image (PNG) embedded in email")),(0,m.tZ)(P,{value:"CSV"},(0,i.t)("Formatted CSV attached in email")))));return(0,m.tZ)(b,{show:r,onHide:t,title:U,footer:V,width:"432",centered:!0},(0,m.tZ)(Z,null,(0,m.tZ)(u.Z,{id:"name",name:"name",value:(null==v?void 0:v.name)||"",placeholder:(0,i.t)("Weekly Report"),required:!0,validationMethods:{onChange:({target:e})=>$(q.inputChange,{name:e.name,value:e.value})},errorMessage:(null==v?void 0:v.error)||"",label:"Report Name"}),(0,m.tZ)(u.Z,{id:"description",name:"description",value:(null==v?void 0:v.description)||"",validationMethods:{onChange:({target:e})=>$(q.inputChange,{name:e.name,value:e.value})},errorMessage:"",label:(0,i.t)("Description"),placeholder:(0,i.t)("Include a description that will be sent with your report"),css:D})),(0,m.tZ)(S,null,(0,m.tZ)(C,null,(0,m.tZ)("h4",{css:e=>(e=>m.iv`
  margin: ${3*e.gridUnit}px 0;
  font-weight: ${e.typography.weights.bold};
`)(e)},(0,i.t)("Schedule")),(0,m.tZ)("p",null,(0,i.t)("Scheduled reports will be sent to your email as a PNG"))),(0,m.tZ)(T,{clearButton:!1,value:(0,i.t)((null==v?void 0:v.crontab)||"0 12 * * 1"),setValue:e=>{$(q.inputChange,{name:"crontab",value:e})},onError:_}),(0,m.tZ)(w,null,I),(0,m.tZ)("div",{className:"control-label",css:e=>(e=>m.iv`
  margin: ${3*e.gridUnit}px 0 ${2*e.gridUnit}px;
`)(e)},(0,i.t)("Timezone")),(0,m.tZ)(d.Z,{onTimezoneChange:e=>{O({type:q.inputChange,payload:{name:"timezone",value:e}})},timezone:null==v?void 0:v.timezone}),f&&K))})))},12441:(e,t,r)=>{r.d(t,{r:()=>s}),r(67294);var a=r(51995),i=r(40987),n=r(11965);const o=(0,a.iK)(i.Z)`
  .ant-switch-checked {
    background-color: ${({theme:e})=>e.colors.primary.base};
  }
`,s=e=>(0,n.tZ)(o,e)},98978:(e,t,r)=>{r.d(t,{Z:()=>Z});var a=r(11965),i=r(67294),n=r(80008),o=r.n(n),s=r(61988),l=r(4715);const d="GMT Standard Time",u="Africa/Abidjan",c={"-300-240":["Eastern Standard Time","Eastern Daylight Time"],"-360-300":["Central Standard Time","Central Daylight Time"],"-420-360":["Mountain Standard Time","Mountain Daylight Time"],"-420-420":["Mountain Standard Time - Phoenix","Mountain Standard Time - Phoenix"],"-480-420":["Pacific Standard Time","Pacific Daylight Time"],"-540-480":["Alaska Standard Time","Alaska Daylight Time"],"-600-600":["Hawaii Standard Time","Hawaii Daylight Time"],60120:["Central European Time","Central European Daylight Time"],"00":[d,d],"060":["GMT Standard Time - London","British Summer Time"]},h=o()(),p=o()([2021,1]),m=o()([2021,7]),g=e=>p.tz(e).utcOffset().toString()+m.tz(e).utcOffset().toString(),f=e=>{var t,r;const a=g(e);return(h.tz(e).isDST()?null==(t=c[a])?void 0:t[1]:null==(r=c[a])?void 0:r[0])||e},y=o().tz.countries().map((e=>o().tz.zonesForCountry(e,!0))).flat(),v=[];y.forEach((e=>{v.find((t=>g(t.name)===g(e.name)))||v.push(e)}));const b=v.map((e=>({label:`GMT ${o().tz(h,e.name).format("Z")} (${f(e.name)})`,value:e.name,offsets:g(e.name),timezoneName:e.name}))),Z=({onTimezoneChange:e,timezone:t})=>{const r=(0,i.useRef)(t),n=(0,i.useCallback)((t=>{r.current=t,e(t)}),[e]);return(0,i.useEffect)((()=>{const e=(e=>{var t;return(null==(t=b.find((t=>t.offsets===g(e))))?void 0:t.value)||u})(t||o().tz.guess());r.current!==e&&n(e)}),[t,n]),(0,a.tZ)(l.P,{ariaLabel:(0,s.t)("Timezone selector"),css:(0,a.iv)({minWidth:"400px"},"",""),onChange:e,value:t||u,options:b,sortComparator:(e,t)=>o().tz(h,e.timezoneName).utcOffset()-o().tz(h,t.timezoneName).utcOffset()})}},9531:(e,t,r)=>{r.d(t,{t:()=>a});const a={id:0,type:r(46078).i.Table,uid:"_placeholder_",datasource_name:"",table_name:"",columns:[],column_types:[],metrics:[],column_format:{},verbose_map:{},main_dttm_col:"",description:""}},713:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(61988),i=r(80621);const n=[{value:i.HE,label:(0,a.t)("Transparent"),className:"background--transparent"},{value:i.b5,label:(0,a.t)("White"),className:"background--white"}]},79271:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(61988),i=r(80621);const n=[{value:i.u_,label:(0,a.t)("Small"),className:"header-style-option header-small"},{value:i.OE,label:(0,a.t)("Medium"),className:"header-style-option header-medium"},{value:i.pQ,label:(0,a.t)("Large"),className:"header-style-option header-large"}]},50909:(e,t,r)=>{r.d(t,{qi:()=>g,m:()=>y,HS:()=>v,uy:()=>b,C4:()=>Z,_q:()=>S});var a=r(67294),i=r(51995),n=r(61988),o=r(23279),s=r.n(o),l=r(82191),d=r(27600),u=r(35932),c=r(54076),h=r(13433),p=r(14086),m=r(11965);const g=(0,i.iK)(u.Z)`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;

  // needed to override button's first-of-type margin: 0
  && {
    margin: 0 ${({theme:e})=>2*e.gridUnit}px;
  }

  i {
    padding: 0 ${({theme:e})=>e.gridUnit}px;
  }
`,f=(0,m.tZ)(g,{buttonSize:"xsmall","aria-label":(0,n.t)("Copy")},(0,m.tZ)("i",{className:"fa fa-clipboard"})),y=({data:e,columns:t})=>(0,m.tZ)(h.Z,{text:e&&t?(0,c.Mv)(e,t):"",wrapped:!1,copyNode:f}),v=({onChangeHandler:e})=>{const t=s()(e,d.M$);return(0,m.tZ)(l.II,{placeholder:(0,n.t)("Search"),onChange:e=>{const r=e.target.value;t(r)}})},b=({data:e,loading:t})=>{var r;return(0,m.tZ)(p.Z,{rowcount:null!=(r=null==e?void 0:e.length)?r:0,loading:t,suffix:(0,n.t)("rows retrieved")})},Z=(e,t)=>{const r=(0,a.useMemo)((()=>{var e;return null!=(e=null==t?void 0:t.map((e=>Object.values(e).map((e=>null==e?void 0:e.toString().toLowerCase())))))?e:[]}),[t]);return(0,a.useMemo)((()=>null!=t&&t.length?t.filter(((t,a)=>r[a].some((t=>null==t?void 0:t.includes(e.toLowerCase()))))):[]),[t,e,r])},S=(e,t,r)=>(0,a.useMemo)((()=>e&&null!=t&&t.length?e.filter((e=>Object.keys(t[0]).includes(e))).map((e=>({accessor:t=>t[e],Header:e||" ",Cell:({value:e})=>!0===e?d.Ly:!1===e?d.gz:String(e),...null==r?void 0:r[e]}))):[]),[t,e,r])},15423:(e,t,r)=>{r.d(t,{Z:()=>R});var a=r(67294),i=r(51995),n=r(55786),o=r(61988),s=r(42110),l=r(120),d=r(13433),u=r(38703),c=r(50909),h=r(98286),p=r(22428),m=r(53459),g=r(49889),f=r(33743),y=r(22489),v=r(11965);const b=(0,i.iK)(c.qi)`
  && {
    margin: 0 0 ${({theme:e})=>e.gridUnit}px;
  }
`;s.Z.registerLanguage("markdown",m.Z),s.Z.registerLanguage("html",g.Z),s.Z.registerLanguage("sql",f.Z),s.Z.registerLanguage("json",y.Z);const Z=i.iK.div`
  height: 100%;
`,S=(0,i.iK)(s.Z)`
  height: calc(100% - 26px); // 100% - clipboard height
`,R=e=>{const[t,r]=(0,a.useState)([]),[i,s]=(0,a.useState)(!1),[c,m]=(0,a.useState)(null);return(0,a.useEffect)((()=>{s(!0),(0,p.getChartDataRequest)({formData:e.latestQueryFormData,resultFormat:"json",resultType:"query"}).then((({json:e})=>{r((0,n.Z)(e.result)),s(!1),m(null)})).catch((e=>{(0,h.O)(e).then((({error:t,message:r})=>{m(t||r||e.statusText||(0,o.t)("Sorry, An error occurred")),s(!1)}))}))}),[JSON.stringify(e.latestQueryFormData)]),i?(0,v.tZ)(u.Z,null):c?(0,v.tZ)("pre",null,c):(0,v.tZ)(a.Fragment,null,t.map((e=>e.query?(0,v.tZ)(Z,{key:e.query},(0,v.tZ)(d.Z,{text:e.query,shouldShowText:!1,copyNode:(0,v.tZ)(b,{buttonSize:"xsmall"},(0,v.tZ)("i",{className:"fa fa-clipboard"}))}),(0,v.tZ)(S,{language:e.language||void 0,style:l.Z},e.query)):null)))}},70326:(e,t,r)=>{r.d(t,{n:()=>n});var a=r(67294),i=r(23525);function n(e){const[t,r]=(0,a.useState)(!1),[n,o]=(0,a.useState)("");return(0,a.useEffect)((()=>r(!0)),[e]),async function(a){if(t){const t=await(0,i.O)(a||e);return o(t),r(!1),t}return n}}},56727:(e,t,r)=>{r.d(t,{Z:()=>d}),r(15306);var a=r(29306),i=r.n(a),n=r(21804),o=r.n(n),s=r(61988),l=r(72570);function d(e,t,r={},a=!1){return r=>{const n=a?document.querySelector(e):r.currentTarget.closest(e);return n?i().toJpeg(n,{quality:.95,bgcolor:"#F5F5F5",filter:e=>"string"!=typeof e.className||"mapboxgl-control-container"!==e.className&&!e.className.includes("ant-dropdown")}).then((e=>{const r=document.createElement("a");r.download=`${((e,t=new Date)=>`${o()(e)}-${t.toISOString().replace(/[: ]/g,"-")}`)(t)}.jpg`,r.href=e,r.click()})).catch((e=>{console.error("Creating image failed",e)})):(0,l.Dz)((0,s.t)("Image download failed, please refresh and try again."))}}}}]);