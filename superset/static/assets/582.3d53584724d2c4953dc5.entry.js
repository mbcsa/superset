"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[582],{80221:(e,t,o)=>{o.d(t,{gO:()=>u,fF:()=>m,Ad:()=>p,Gx:()=>h,yy:()=>f,n4:()=>b,HO:()=>y,RO:()=>x,zK:()=>w,Vl:()=>C,T7:()=>S,o2:()=>T,Aw:()=>k,Gr:()=>A,GF:()=>R,N4:()=>P,UG:()=>L,Hy:()=>E,z_:()=>F,Ml:()=>M,tH:()=>D,po:()=>Z}),o(15306);var r=o(15078),a=o.n(r),i=o(32383),n=o(27856),l=o.n(n),s=o(78900),c=o(67190);const d=/\d+ \w+ offset/;function u(e){return String(e).trim().replace(" (right axis)","").split(", ").filter((e=>!d.test(e))).join(", ")}function m(e){return"smart_date"===e?s.Z:(0,c.JB)(e)}function p(e,t,o,r){const i=(0,c.JB)(r),n=t.filter((e=>!e.disabled)).length,l=o&&0!==t.length?t[0].values.map(((e,o)=>{const r=t.filter((e=>!e.disabled)).map((e=>e.values[o]));return a().sum(r,(e=>e.y))})):[];e.selectAll(".bar-chart-label-group").remove(),setTimeout((()=>{e.selectAll(".bar-chart-label-group").remove();const t=e.select("g.nv-barsWrap").append("g").attr("class","bar-chart-label-group");e.selectAll("g.nv-group").filter(((e,t)=>!o||t===n-1)).selectAll("rect").each((function(e,r){const n=a().select(this),s=n.attr("transform"),c=parseFloat(n.attr("x")),d=parseFloat(n.attr("y")),u=parseFloat(n.attr("width")),m=parseFloat(n.attr("height")),p=t.append("text").text(i(o?l[r]:e.y)).attr("transform",s).attr("class","bar-chart-label"),g=p.node().getBBox(),h=g.width,f=g.height;p.attr("x",c+u/2-h/2),n.attr("class").includes("positive")?p.attr("y",d-5):p.attr("y",d+m+f)}))}),1e3)}function g(e,t){return"<NULL>"===e?`&lt;${e.slice(1,-1)}&gt;`:t?l().sanitize(e):e}function h(e,t,o){let r="";return r+=`<table><thead><tr><td colspan='3'><strong class='x-value'>${t(e.value)}</strong></td></tr></thead><tbody>`,e.series.sort(((e,t)=>e.value>=t.value?-1:1)),e.series.forEach((e=>{const t=g(e.key,!0);r+=`<tr class="${e.highlight?"emph":""}"><td class='legend-color-guide' style="opacity: ${e.highlight?"1":"0.75"};""><div style="border: 2px solid ${e.highlight?"black":"transparent"}; background-color: ${e.color};"></div></td><td>${t}</td><td>${o(e.value)}</td></tr>`})),r+="</tbody></table>",l().sanitize(r)}function f(e,t){let o="";return o+=`<table><thead><tr><td colspan='3'><strong class='x-value'>${e.value}</strong></td></tr></thead><tbody>`,e.series.sort(((e,t)=>e.value>=t.value?-1:1)),e.series.forEach((e=>{const r=g(e.key,!0);o+=`<tr class="${e.highlight?"emph":""}"><td class='legend-color-guide' style="opacity: ${e.highlight?"1":"0.75"};""><div style="border: 2px solid ${e.highlight?"black":"transparent"}; background-color: ${e.color};"></div></td><td>${r}</td><td>${t(e.value)}</td></tr>`})),o+="</tbody></table>",l().sanitize(o)}function b(e,t,o,r){const i="expand"===r.style()?a().sum(e.series,(e=>e.value)):e.series[e.series.length-1].value;let n="";return n+=`<table><thead><tr><td colspan='4'><strong class='x-value'>${t(e.value)}</strong></td></tr></thead><tbody><tr class="tooltip-header"><td></td><td>Category</td><td>Value</td><td>% to total</td></tr>`,e.series.forEach((e=>{const t=g(e.key,!0);let r="";e.highlight?r="superset-legacy-chart-nvd3-tr-highlight":"TOTAL"===e.key&&(r="superset-legacy-chart-nvd3-tr-total"),n+=`<tr class="${r}" style="border-color: ${e.color}"><td style="color: ${e.color}">${"TOTAL"===e.key?"":"&#9724;"}</td><td>${t}</td><td>${o(e.value)}</td><td>${(100*e.value/i).toFixed(2)}%</td></tr>`})),n+="</tbody></table>",l().sanitize(n)}function y(e,t,o){const r=t(e.value);let a="";return a+=`<table><thead><tr><td colspan='3'><strong class='x-value'>${r}</strong></td></tr></thead><tbody>`,e.series.forEach(((e,t)=>{const r=o[t],i=g(e.key,!1);a+=`<tr><td class='legend-color-guide'><div style="background-color: ${e.color};"></div></td><td class='key'>${i}</td><td class='value'>${r(e.value)}</td></tr>`})),a+="</tbody></table>",a}function x(e,t,o){const r=t(e.value);let a="";return a+=`<table><thead><tr><td colspan='3'><strong class='x-value'>${r}</strong></td></tr></thead><tbody>`,e.series.forEach((e=>{if(e.highlight){let t="";t="current"===e.key?e.key:`${e.key} of the selected frequency:`,a+=`<tr><td class='legend-color-guide'><div style="background-color: ${e.color};"></div></td><td class='key'>${t}</td><td class='value'>${o(e.value)}</td></tr>`}})),a+="</tbody></table>",l().sanitize(a)}function v(e){return e.label||e}function _(e,t){return`<tr><td>${e}</td><td>${t}</td></tr>`}function w({point:e,entity:t,xField:o,yField:r,sizeField:a,xFormatter:i,yFormatter:n,sizeFormatter:l}){let s="<table>";return s+=`<tr><td style="color: ${e.color};"><strong>${e[t]}</strong> (${e.group})</td></tr>`,s+=_(v(o),i(e.x)),s+=_(v(r),n(e.y)),s+=_(v(a),l(e.size)),s+="</table>",s}function C(e){const t=document.querySelectorAll(".nvtooltip");t.length>0&&t.forEach((t=>{e?t.remove():t.style.opacity=0}))}function S(e){return`tooltip-${e}`}function T(e){const t=`.${S(e)}`,o=document.querySelector(t);o&&o.remove()}function k(e){const t=e.useInteractiveGuideline&&e.useInteractiveGuideline()?e.interactiveLayer:e,o=t.tooltip.contentGenerator();t.tooltip.contentGenerator((e=>{let t="<div>";return t+=o(e),t+="</div>",t}))}function A(e){return(0,i.Z)().attr("class",`d3-tip ${e.annotationTipClass||""}`).direction("n").offset([-5,0]).html((t=>t?`<div><strong>${t[e.titleColumn]&&t[e.titleColumn].length>0?`${t[e.titleColumn]} - ${e.name}`:e.name}</strong></div><br/><div>${(Array.isArray(e.descriptionColumns)?e.descriptionColumns.map((e=>t[e])):Object.values(t)).join(", ")}</div>`:""))}function R(e,t){const o=e.selectAll(`.${t} g.tick text`);if(o.length>0){const e=o[0].map((e=>e.getComputedTextLength()));return Math.ceil(Math.max(0,...e))}return 0}function P(e,t={}){const o=e=>t[e]||e;return Array.isArray(e)&&e.length>0?e.map((e=>d.test(e)?e:o(e))).join(", "):o(e)}function L(e,t,o){const r=18*(t?a().max(e,(e=>e.values.length)):a().sum(e,(e=>e.values.length)));return Math.max(r,o)}function E(e){const t=Number(e);return Number.isNaN(t)?e:t}function F(e){return e.some((e=>void 0===e.toISOString))?null:e.map((e=>e.toISOString().slice(0,-1))).join(" : ")}function M(e,t){e&&e.showMaxMin&&void 0!==t&&e.showMaxMin(t)}function D(e){if(Array.isArray(e)&&e.length>0&&Array.isArray(e[0].values)){const t=e.filter((e=>!e.disabled)).map((e=>a().extent(e.values,(e=>e.y))));return[a().min(t,(([e])=>e)),a().max(t,(([,e])=>e))]}return[0,1]}function Z(e){if(Array.isArray(e)&&e.length>0&&Array.isArray(e[0].values)){const t=e.filter((e=>!e.disabled)).map((e=>e.values.map((e=>e.y)))),o=t[0].map(((e,o)=>t.reduce(((e,t)=>e+t[o]),0)));return[Math.min(0,...o),Math.max(0,...o)]}return[0,1]}},83937:(e,t,o)=>{function r(e){return"boolean"==typeof e?e:"string"==typeof e?["yes","y","true","t","1"].includes(e.toLowerCase()):!!e}o.d(t,{Z:()=>r})},95963:(e,t,o)=>{function r(e){return Object.keys(e).reduce(((e,t)=>{const o=e;return o[t]=t,o}),{})}o.d(t,{DT:()=>a,yb:()=>l,ZP:()=>s});const a=r({FORMULA:{value:"FORMULA",label:"Formula"},EVENT:{value:"EVENT",label:"Event",supportNativeSource:!0},INTERVAL:{value:"INTERVAL",label:"Interval",supportNativeSource:!0},TIME_SERIES:{value:"TIME_SERIES",label:"Time Series"}}),i=(a.FORMULA,r({NATIVE:{value:"NATIVE",label:"Superset annotation"}})),n={descriptionColumns:["long_descr"],intervalEndColumn:"end_dttm",timeColumn:"start_dttm",titleColumn:"short_descr"};function l(e){return e.sourceType===i.NATIVE?{...e,...n}:e}const s=a},48805:(e,t,o)=>{o.d(t,{Z:()=>r});class r{constructor(e){this.name=void 0,this.canBeAnnotationTypes=void 0,this.canBeAnnotationTypesLookup=void 0,this.credits=void 0,this.description=void 0,this.show=void 0,this.supportedAnnotationTypes=void 0,this.thumbnail=void 0,this.useLegacyApi=void 0,this.behaviors=void 0,this.datasourceCount=void 0,this.enableNoResults=void 0,this.deprecated=void 0,this.exampleGallery=void 0,this.tags=void 0,this.category=void 0;const{name:t,canBeAnnotationTypes:o=[],credits:r=[],description:a="",show:i=!0,supportedAnnotationTypes:n=[],thumbnail:l,useLegacyApi:s=!1,behaviors:c=[],datasourceCount:d=1,enableNoResults:u=!0,deprecated:m=!1,exampleGallery:p=[],tags:g=[],category:h=null}=e;this.name=t,this.credits=r,this.description=a,this.show=i,this.canBeAnnotationTypes=o,this.canBeAnnotationTypesLookup=o.reduce(((e,t)=>{const o=e;return o[t]=!0,o}),{}),this.supportedAnnotationTypes=n,this.thumbnail=l,this.useLegacyApi=s,this.behaviors=c,this.datasourceCount=d,this.enableNoResults=u,this.deprecated=m,this.exampleGallery=p,this.tags=g,this.category=h}canBeAnnotationType(e){return this.canBeAnnotationTypesLookup[e]||!1}clone(){return new r(this)}}},84912:(e,t,o)=>{o.d(t,{Z:()=>p});var r=o(91189),a=o(49714),i=o(11064),n=o(19427),l=o(54085),s=o(37687),c=o(74464);function d(e){return e}const u={};function m(e){return()=>{const t=e();return t instanceof Promise?t.then((e=>"default"in e&&e.default||e)):t}}class p extends r.Z{constructor(e){super(),this.controlPanel=void 0,this.metadata=void 0,this.loadBuildQuery=void 0,this.loadTransformProps=void 0,this.loadChart=void 0;const{metadata:t,buildQuery:o,loadBuildQuery:r,transformProps:a=d,loadTransformProps:i,Chart:n,loadChart:l,controlPanel:s=u}=e;if(this.controlPanel=s,this.metadata=t,this.loadBuildQuery=r&&m(r)||o&&m((()=>o))||void 0,this.loadTransformProps=m(null!=i?i:()=>a),l)this.loadChart=m(l);else{if(!n)throw new Error("Chart or loadChart is required");this.loadChart=()=>n}}register(){const e=this.config.key||(0,a.Z)("config.key");return(0,i.Z)().registerValue(e,this.metadata),(0,l.Z)().registerLoader(e,this.loadChart),(0,s.Z)().registerValue(e,this.controlPanel),(0,c.Z)().registerLoader(e,this.loadTransformProps),this.loadBuildQuery&&(0,n.Z)().registerLoader(e,this.loadBuildQuery),this}unregister(){const e=this.config.key||(0,a.Z)("config.key");return(0,i.Z)().remove(e),(0,l.Z)().remove(e),(0,s.Z)().remove(e),(0,c.Z)().remove(e),(0,n.Z)().remove(e),this}configure(e,t){return super.configure(e,t),this}}},54085:(e,t,o)=>{o.d(t,{Z:()=>n});var r=o(90537),a=o(1875);class i extends r.Z{constructor(){super({name:"ChartComponent",overwritePolicy:r.r.WARN})}}const n=(0,a.Z)(i)},74464:(e,t,o)=>{o.d(t,{Z:()=>n});var r=o(90537),a=o(1875);class i extends r.Z{constructor(){super({name:"ChartTransformProps",overwritePolicy:r.r.WARN})}}const n=(0,a.Z)(i)},60524:(e,t,o)=>{o.d(t,{f:()=>l,$:()=>s}),o(15306);var r=o(22087),a=o.n(r);const i=[[new RegExp(/==/g),"Eq"],[new RegExp(/>=/g),"Gte"],[new RegExp(/<=/g),"Lte"],[new RegExp(/>/g),"Gt"],[new RegExp(/</g),"Lt"]],n=[{type:3,token:"x",show:"x",value:"x"},{type:2,token:"&",show:"&",value:(e,t)=>e&t},{type:2,token:"|",show:"|",value:(e,t)=>e|t},{type:2,token:"and",show:"and",value:(e,t)=>e&&t},{type:2,token:"xor",show:"xor",value:(e,t)=>e^t},{type:2,token:"or",show:"or",value:(e,t)=>Number(e||t)},{type:2,token:"Eq",show:"Eq",value:(e,t)=>Number(e===t)},{type:2,token:"Lt",show:"Lt",value:(e,t)=>Number(e<t)},{type:2,token:"Lte",show:"Lte",value:(e,t)=>Number(e<=t)},{type:2,token:"Gt",show:"Gt",value:(e,t)=>Number(e>t)},{type:2,token:"Gte",show:"Gte",value:(e,t)=>Number(e>=t)}];function l(e,t){var o;let r=e;i.forEach((([e,t])=>{r=r.replace(e,t)}));const l=String(r).split("=");return r=null!=(o=l[1])?o:l[0],Number(a().eval(r,n,{x:t}))}function s(e){try{l(e,0)}catch(e){return!1}return!0}},91189:(e,t,o)=>{o.d(t,{Z:()=>r});class r{constructor(){this.config=void 0,this.config={}}resetConfig(){return this.config={},this}configure(e,t=!1){return this.config=t?e:{...this.config,...e},this}register(){return this}unregister(){return this}}},46449:(e,t,o)=>{o.d(t,{Z:()=>r});class r{constructor(e={}){this.name=void 0,this.description=void 0,this.presets=void 0,this.plugins=void 0;const{name:t="",description:o="",presets:r=[],plugins:a=[]}=e;this.name=t,this.description=o,this.presets=r,this.plugins=a}register(){return this.presets.forEach((e=>{e.register()})),this.plugins.forEach((e=>{e.register()})),this}}},5031:(e,t,o)=>{function r(e){const{time_grain_sqla:t,extra_filters:o,extra_form_data:r}=e;if(null!=r&&r.time_grain_sqla)return r.time_grain_sqla;const a=(o||[]).filter((e=>"__time_grain"===e.col));return a.length?a[0].val:t}o.d(t,{Z:()=>r})},82028:(e,t,o)=>{o.d(t,{Z:()=>l});var r=o(41609),a=o.n(r),i=o(51584),n=o.n(i);function l(e){if(Array.isArray(e.orderby)&&e.orderby.length>0){const t=e.orderby[0];if(Array.isArray(t)&&2===t.length&&!a()(t[0])&&n()(t[1]))return e}const t={...e};delete t.timeseries_limit_metric,delete t.legacy_order_by,delete t.order_desc,delete t.orderby;const o=!e.order_desc;return void 0===e.timeseries_limit_metric||null===e.timeseries_limit_metric||a()(e.timeseries_limit_metric)?void 0===e.legacy_order_by||null===e.legacy_order_by||a()(e.legacy_order_by)?Array.isArray(e.metrics)&&e.metrics.length>0?{...t,orderby:[[e.metrics[0],o]]}:t:{...t,orderby:[[e.legacy_order_by,o]]}:{...t,orderby:[[e.timeseries_limit_metric,o]]}}},34804:(e,t,o)=>{var r,a,i,n;function l(e){return e.annotationType===r.Formula}function s(e){return e.annotationType===r.Event}function c(e){return e.annotationType===r.Interval}function d(e){return e.annotationType===r.Timeseries}function u(e){return e.sourceType===a.Table}function m(e){return Array.isArray(e)}function p(e){return"columns"in e&&"records"in e}o.d(t,{JJ:()=>r,u$:()=>a,TJ:()=>i,QW:()=>n,x5:()=>l,pD:()=>s,Ry:()=>c,nl:()=>d,mn:()=>u,b4:()=>m,$c:()=>p}),function(e){e.Event="EVENT",e.Formula="FORMULA",e.Interval="INTERVAL",e.Timeseries="TIME_SERIES"}(r||(r={})),function(e){e.Line="line",e.Native="NATIVE",e.Table="table",e.Undefined=""}(a||(a={})),function(e){e.High="opacityHigh",e.Low="opacityLow",e.Medium="opacityMedium",e.Undefined=""}(i||(i={})),function(e){e.Dashed="dashed",e.Dotted="dotted",e.Solid="solid",e.LongDashed="longDashed"}(n||(n={}))},62720:(e,t,o)=>{o.d(t,{Z:()=>r});const r=(0,o(11538).Z)({id:"smart_date_detailed",label:"Detailed adaptive formatter",formats:{millisecond:"%Y-%m-%d %H:%M:%S.%L",second:"%Y-%m-%d %H:%M:%S",minute:"%Y-%m-%d %H:%M",hour:"%Y-%m-%d %H:%M",day:"%Y-%m-%d",week:"%Y-%m-%d",month:"%Y-%m-%d",year:"%Y"}})},33444:(e,t,o)=>{o.d(t,{Z:()=>a});var r=o(61988);function a(e){return!("string"==typeof e&&e.trim().length>0&&Number.isInteger(Number(e.trim()))||"number"==typeof e&&Number.isInteger(e))&&(0,r.t)("is expected to be an integer")}},21341:(e,t,o)=>{o.d(t,{O$:()=>H,ZP:()=>Q});var r=o(6004),a=o(27522),i=o(25295),n=o(58944),l=o(77630),s=o(92971),c=o(576),d=o(41798),u=o(12722),m=o(11783),p=o(20958),g=o(77884),h=o(49172),f=o(93509),b=o(75437),y=o(23958),x=o(45287),v=o(7700),_=o(50085),w=o(71881),C=o(61478),S=o(42092),T=o(40779),k=o(15546),A=o(71368),R=o(92646),P=o(71211),L=o(74569),E=o(38731),F=o(28492),M=o(45576),D=o(88579),Z=o(71751),I=o(99660),N=o(62175),O=o(41466),B=o(85012),z=o(59034),V=o(40646),q=o(81865),$=o(68955),W=o(91077),j=o(72147),G=o(83449),Y=o(55254);const J={austria:r,australia:a,belgium:i,brazil:n,bulgaria:l,canada:s,china:c,cyprus:d,denmark:u,egypt:m,estonia:p,france:g,finland:h,germany:f,iceland:b,india:y,indonesia:x,iran:v,italy:_,italy_regions:w,japan:C,jordan:S,kenya:T,korea:k,kuwait:A,liechtenstein:R,lithuania:P,malaysia:F,morocco:M,myanmar:D,netherlands:Z,nigeria:L,norway:E,oman:I,pakistan:N,philippines:O,peru:B,poland:z,portugal:V,qatar:q,russia:$,saudi_arabia:W,singapore:j,slovenia:G,spain:o(43674),sweden:Y,switzerland:o(71524),syria:o(34680),thailand:o(60153),timorleste:o(43090),united_arab_emirates:o(86487),uk:o(40106),ukraine:o(737),uruguay:o(22096),usa:o(71574),zambia:o(1792),vietnam:o(5098)},H=Object.keys(J).map((e=>"uk"===e||"usa"===e?[e,e.toUpperCase()]:"italy_regions"===e?[e,"Italy (regions)"]:[e,e[0].toUpperCase()+e.slice(1)])),Q=J},51824:(e,t,o)=>{function r(e){return e>550?.8:e>400&&e<=550?.55:.45}o.d(t,{Py:()=>r,Ce:()=>i});const a=(e,t=0)=>{const{x:o,y:r,width:a,height:i}=e.getBoundingClientRect();return{x:o,y:r+t,width:a,height:i-2*t}},i=e=>{const t=[];return e.forEach(((o,r)=>{const i=a(o,1);e.forEach(((o,n)=>{if(n<=r)return;const l=a(o,1);((e,t)=>{const{x:o,y:r,width:a,height:i}=e,{x:n,y:l,width:s,height:c}=t;return!(o>n+s||o+a<n||r>l+c||r+i<l)})(i,l)&&(t.push(e[n]),t.push(e[r]))}))})),t}},92638:(e,t,o)=>{o.d(t,{My:()=>r,oO:()=>a,YF:()=>i,Lh:()=>n,dS:()=>l,Im:()=>s});const r=[.7,.4],a=11,i=2,n=2,l="#fff",s=e=>{const t=(null!=e?e:[]).map((e=>(null==e?void 0:e.name)||"")).filter((e=>""!==e));return{metricLabel:t.shift()||"",treePath:t}}},49239:(e,t,o)=>{o.d(t,{li:()=>a,SM:()=>i,N4:()=>n,ZV:()=>l});var r=o(30080);const a="<NULL>",i={gridOffsetRight:40,gridOffsetLeft:20,gridOffsetTop:20,gridOffsetBottom:20,gridOffsetBottomZoomable:80,legendRightTopOffset:30,legendTopRightOffset:55,zoomBottom:30,toolboxTop:0,toolboxRight:5,dataZoomStart:0,dataZoomEnd:100,yAxisLabelTopOffset:20},n=[[r.Pl.Top,"Top"],[r.Pl.Left,"Left"],[r.Pl.Right,"Right"],[r.Pl.Bottom,"Bottom"],[r.Pl.Inside,"Inside"],[r.Pl.InsideBottomLeft,"Inside left"],[r.Pl.InsideBottomRight,"Inside right"],[r.Pl.InsideTop,"Inside top"],[r.Pl.InsideBottom,"Inside bottom"],[r.Pl.InsideTopLeft,"Inside top left"],[r.Pl.InsideBottomLeft,"Inside bottom left"],[r.Pl.InsideTopRight,"Inside top right"],[r.Pl.InsideBottomRight,"Inside bottom right"]];var l;!function(e){e[e.Transparent=0]="Transparent",e[e.SemiTransparent=.3]="SemiTransparent",e[e.NonTransparent=1]="NonTransparent"}(l||(l={}))},96886:(e,t,o)=>{o.d(t,{oe:()=>a,Ku:()=>i,C0:()=>n,mW:()=>l});var r=o(30080);const a={containLabel:!0},i={confine:!0},n={scale:!0},l={[r.IY.Top]:20,[r.IY.Bottom]:20,[r.IY.Left]:170,[r.IY.Right]:170}},30080:(e,t,o)=>{var r,a,i;o.d(t,{i1:()=>r,IY:()=>a,HJ:()=>i,xo:()=>n,Pl:()=>l,f6:()=>s}),function(e){e.Observation="",e.ForecastTrend="__yhat",e.ForecastUpper="__yhat_upper",e.ForecastLower="__yhat_lower"}(r||(r={})),function(e){e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right"}(a||(a={})),function(e){e.Scroll="scroll",e.Plain="plain"}(i||(i={}));const n={legendMargin:null,legendOrientation:a.Top,legendType:i.Scroll,showLegend:!1};var l;!function(e){e.Top="top",e.Left="left",e.Right="right",e.Bottom="bottom",e.Inside="inside",e.InsideLeft="insideLeft",e.InsideRight="insideRight",e.InsideTop="insideTop",e.InsideBottom="insideBottom",e.InsideTopLeft="insideTopLeft",e.InsideBottomLeft="insideBottomLeft",e.InsideTopRight="insideTopRight",e.InsideBottomRight="insideBottomRight"}(l||(l={}));const s={xAxisTitle:"",xAxisTitleMargin:0,yAxisTitle:"",yAxisTitleMargin:0,yAxisTitlePosition:"Top"}},6915:(e,t,o)=>{o.d(t,{Ie:()=>u,mj:()=>m,IW:()=>p,iw:()=>g,zp:()=>h,G_:()=>f,IE:()=>b,Z6:()=>y,aI:()=>x});var r=o(5364),a=o(88889),i=o(55786),n=o(29027),l=o(49239),s=o(30080),c=o(96886);function d(e){return null!=e}function u(e,t={}){const{fillNeighborValue:o,xAxis:a=r.W3,removeNulls:i=!1}=t;if(0===e.length)return[];const n=e.map((e=>({...e,[a]:e[a]})));return Object.keys(n[0]).filter((e=>e!==a&&e!==r.W3)).map((e=>({id:e,name:e,data:n.map(((t,r)=>{var i,l;const s=d(null==(i=n[r-1])?void 0:i[e])||d(null==(l=n[r+1])?void 0:l[e]);return[t[a],!d(t[e])&&s&&void 0!==o?o:t[e]]})).filter((e=>!i||null!==e[0]&&null!==e[1]))})))}function m(e,{numberFormatter:t,timeFormatter:o,coltype:r}={}){if(null==e)return l.li;if("number"==typeof e)return t?t(e):e.toString();if("boolean"==typeof e)return e.toString();if(e instanceof Date||r===a.Z.TEMPORAL){const t=e instanceof Date?e:new Date(e);return o?o(t):t.toISOString()}return e}const p=({coltypes:e=[],colnames:t=[]})=>t.reduce(((t,o,r)=>({...t,[o]:e[r]})),{});function g({datum:e={},groupby:t,numberFormatter:o,timeFormatter:r,coltypeMapping:a={}}){return(0,i.Z)(t).map((t=>m(e[t],{numberFormatter:o,timeFormatter:r,...a[t]&&{coltype:a[t]}}))).join(", ")}function h(e,t,o,r=!1){const a={orient:[s.IY.Top,s.IY.Bottom].includes(t)?"horizontal":"vertical",show:o,type:e};switch(t){case s.IY.Left:a.left=0;break;case s.IY.Right:a.right=0,a.top=r?l.SM.legendRightTopOffset:0;break;case s.IY.Bottom:a.bottom=0;break;case s.IY.Top:default:a.top=0,a.right=r?l.SM.legendTopRightOffset:0}return a}function f(e,t,o,r){let a;a=e?null==o||"string"==typeof o?c.mW[t]:o:0;const{bottom:i=0,left:n=0,right:l=0,top:d=0}=r||{};return{left:n+(t===s.IY.Left?a:0),right:l+(t===s.IY.Right?a:0),top:d+(t===s.IY.Top?a:0),bottom:i+(t===s.IY.Bottom?a:0)}}function b(e){const t=new Map;return e.map((e=>{let{id:o}=e;if(void 0===o)return e;o=String(o);const r=t.get(o)||0,a=r>0?` (${r})`:"";return t.set(o,r+1),{...e,id:`${o}${a}`}}))}function y(e){return n.WU.encodeHTML(e)}const x={name:"",legend:""}},86769:(e,t,o)=>{var r;o.d(t,{Q:()=>r}),function(e){e.ROWS="ROWS",e.COLUMNS="COLUMNS"}(r||(r={}))},12456:(e,t,o)=>{o.d(t,{X:()=>r});const r=(e=(()=>{}),t,o)=>e({ownState:{currentPage:t,pageSize:o}})},2608:(e,t,o)=>{o.d(t,{T:()=>n});var r=o(6126),a=o(61988),i=o(39826);(0,a.oK)(i.Z);const n=(0,r.m)([[0,(0,a.t)("page_size.all")],10,20,50,100,200])},39826:(e,t,o)=>{o.d(t,{Z:()=>r});const r={en:{"Query Mode":[""],Aggregate:[""],"Raw Records":[""],"Emit Filter Events":[""],"Show Cell Bars":[""],"page_size.show":["Show"],"page_size.all":["All"],"page_size.entries":["entries"],"table.previous_page":["Previous"],"table.next_page":["Next"],"search.num_records":["%s record","%s records..."]},fr:{"Query Mode":[""],Aggregate:[""],"Raw Records":[""],"Emit Filter Events":[""],"Show Cell Bars":[""],"page_size.show":["Afficher"],"page_size.all":["tous"],"page_size.entries":["entrées"],"table.previous_page":["Précédent"],"table.next_page":["Suivante"],"search.num_records":["%s enregistrement","%s enregistrements..."]},zh:{"Query Mode":["查询模式"],Aggregate:["分组聚合"],"Raw Records":["原始数据"],"Emit Filter Events":["关联看板过滤器"],"Show Cell Bars":["为指标添加条状图背景"],"page_size.show":["每页显示"],"page_size.all":["全部"],"page_size.entries":["条"],"table.previous_page":["上一页"],"table.next_page":["下一页"],"search.num_records":["%s条记录..."]}}},57790:(e,t,o)=>{o.d(t,{Z:()=>a});const r=/T(\d{2}:){2}\d{2}$/;class a extends Date{constructor(e,{formatter:t=String,forceUTC:o=!0}={}){let a=e;o&&"string"==typeof a&&r.test(a)&&(a=`${a}Z`),super(a),this.formatter=void 0,this.input=void 0,this.input=e,this.formatter=t,this.toString=()=>this.formatter===String?String(this.input):this.formatter?this.formatter(this):Date.toString.call(this)}}},78676:(e,t,o)=>{var r;o.d(t,{c:()=>r}),function(e){e[e.Minimum=0]="Minimum",e[e.Exact=1]="Exact",e[e.Maximum=2]="Maximum"}(r||(r={}))},40582:(e,t,o)=>{o.d(t,{Z:()=>Rp});var r=o(37687),a=o(46449),i=o(93185),n=o(48805),l=o(61988),s=o(84912),c=o(67190),d=o(51115);function u(e){const{height:t,formData:o,queriesData:r,datasource:a}=e,{cellPadding:i,cellRadius:n,cellSize:l,domainGranularity:s,linearColorScheme:u,showLegend:m,showMetricName:p,showValues:g,steps:h,subdomainGranularity:f,xAxisTimeFormat:b,yAxisFormat:y}=o,{verboseMap:x}=a,v=(0,c.JB)(y);return{height:t,data:r[0].data,cellPadding:i,cellRadius:n,cellSize:l,domainGranularity:s,linearColorScheme:u,showLegend:m,showMetricName:p,showValues:g,steps:h,subdomainGranularity:f,timeFormatter:e=>((e,t)=>{const o=new Date(e),r=60*o.getTimezoneOffset()*1e3;return(0,d.bt)(t)(o.getTime()-r)})(e,b),valueFormatter:v,verboseMap:x}}var m=o(75294),p=o(674),g=o(6126),h=o(58842);const f={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"domain_granularity",config:{type:"SelectControl",label:(0,l.t)("Domain"),default:"month",choices:(0,g.m)(["hour","day","week","month","year"]),description:(0,l.t)("The time unit used for the grouping of blocks")}},{name:"subdomain_granularity",config:{type:"SelectControl",label:(0,l.t)("Subdomain"),default:"day",choices:(0,g.m)(["min","hour","day","week","month"]),description:(0,l.t)("The time unit for each block. Should be a smaller unit than domain_granularity. Should be larger or equal to Time Grain")}}],["metrics"],["adhoc_filters"]]},{label:(0,l.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["linear_color_scheme"],[{name:"cell_size",config:{type:"TextControl",isInt:!0,default:10,validators:[m.Z],renderTrigger:!0,label:(0,l.t)("Cell Size"),description:(0,l.t)("The size of the square cell, in pixels")}},{name:"cell_padding",config:{type:"TextControl",isInt:!0,validators:[m.Z],renderTrigger:!0,default:2,label:(0,l.t)("Cell Padding"),description:(0,l.t)("The distance between cells, in pixels")}}],[{name:"cell_radius",config:{type:"TextControl",isInt:!0,validators:[m.Z],renderTrigger:!0,default:0,label:(0,l.t)("Cell Radius"),description:(0,l.t)("The pixel radius")}},{name:"steps",config:{type:"TextControl",isInt:!0,validators:[m.Z],renderTrigger:!0,default:10,label:(0,l.t)("Color Steps"),description:(0,l.t)('The number color "steps"')}}],["y_axis_format",{name:"x_axis_time_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Time Format"),renderTrigger:!0,default:"smart_date",choices:h.HC,description:h.YD}}],[{name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Legend"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display the legend (toggles)")}},{name:"show_values",config:{type:"CheckboxControl",label:(0,l.t)("Show Values"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the numerical values within the cells")}}],[{name:"show_metric_name",config:{type:"CheckboxControl",label:(0,l.t)("Show Metric Names"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display the metric name as a title")}},null]]}],controlOverrides:{y_axis_format:{label:(0,l.t)("Number Format")}}};var b=o(58699);const y=new n.Z({category:(0,l.t)("Correlation"),credits:["https://github.com/wa0x6e/cal-heatmap"],description:(0,l.t)("Visualizes how a metric has changed over a time using a color scale and a calendar view. Gray values are used to indicate missing values and the linear color scheme is used to encode the magnitude of each day's value."),name:(0,l.t)("Calendar Heatmap"),tags:[(0,l.t)("Business"),(0,l.t)("Comparison"),(0,l.t)("Intensity"),(0,l.t)("Pattern"),(0,l.t)("Report"),(0,l.t)("Trend")],thumbnail:b,useLegacyApi:!0});class x extends s.Z{constructor(){super({loadChart:()=>o.e(5428).then(o.bind(o,15428)),metadata:y,transformProps:u,controlPanel:f})}}function v(e){const{width:t,height:o,formData:r,queriesData:a}=e,{yAxisFormat:i,colorScheme:n}=r;return{colorScheme:n,data:a[0].data,height:o,numberFormat:i,width:t}}var _=o(87691),w=o(25666),C=o(95826);const S={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["columns"],["metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["y_axis_format",null],["color_scheme"]]}],controlOverrides:{y_axis_format:{label:(0,l.t)("Number format"),description:(0,l.t)("Choose a number format")},groupby:{label:(0,l.t)("Source"),multi:!1,validators:[C.Z],description:(0,l.t)("Choose a source")},columns:{label:(0,l.t)("Target"),multi:!1,validators:[C.Z],description:(0,l.t)("Choose a target")}}},T=new n.Z({category:(0,l.t)("Flow"),credits:["https://github.com/d3/d3-chord"],description:(0,l.t)("Showcases the flow or link between categories using thickness of chords. The value and corresponding thickness can be different for each side."),exampleGallery:[{url:_,caption:(0,l.t)("Relationships between community channels")}],name:(0,l.t)("Chord Diagram"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Circular"),(0,l.t)("Legacy"),(0,l.t)("Proportional"),(0,l.t)("Relational")],thumbnail:w,useLegacyApi:!0});class k extends s.Z{constructor(){super({loadChart:()=>o.e(5264).then(o.bind(o,15264)),metadata:T,transformProps:v,controlPanel:S})}}function A(e){const{width:t,height:o,formData:r,queriesData:a}=e,{linearColorScheme:i,numberFormat:n,selectCountry:l}=r;return{width:t,height:o,data:a[0].data,country:l?String(l).toLowerCase():null,linearColorScheme:i,numberFormat:n}}var R=o(51324),P=o(21341);const L={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"select_country",config:{type:"SelectControl",label:(0,l.t)("Country"),default:null,choices:P.O$,description:(0,l.t)("Which country to plot the map for?"),validators:[C.Z]}}],["entity"],["metric"],["adhoc_filters"]]},{label:(0,l.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:h.YD}}],["linear_color_scheme"]]}],controlOverrides:{entity:{label:(0,l.t)("ISO 3166-2 Codes"),description:(0,l.t)("Column containing ISO 3166-2 codes of region/province/department in your table.")},metric:{label:(0,l.t)("Metric"),description:(0,l.t)("Metric to display bottom title")},linear_color_scheme:{renderTrigger:!1}}},E=new n.Z({category:(0,l.t)("Map"),credits:["https://bl.ocks.org/john-guerra"],description:(0,l.t)("Visualizes how a single metric varies across a country's principal subdivisions (states, provinces, etc) on a chloropleth map. Each subdivision's value is elevated when you hover over the corresponding geographic boundary."),name:(0,l.t)("Country Map"),tags:[(0,l.t)("2D"),(0,l.t)("Comparison"),(0,l.t)("Geo"),(0,l.t)("Range"),(0,l.t)("Report"),(0,l.t)("Stacked")],thumbnail:R,useLegacyApi:!0});class F extends s.Z{constructor(){super({loadChart:()=>o.e(2101).then(o.bind(o,62101)),metadata:E,transformProps:A,controlPanel:L})}}var M=o(49970),D=o(67294),Z=o(75781),I=o(65634),N=o(11965);const O={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Event definition"),controlSetRows:[["entity"],[{name:"all_columns_x",config:{type:"SelectControl",label:(0,l.t)("Event Names"),description:(0,l.t)("Columns to display"),mapStateToProps:e=>({choices:(0,Z.Z)(null==e?void 0:e.datasource)}),default:e=>e.choices&&e.choices.length>0?e.choices[0][0]:null,validators:[C.Z]}}],["row_limit"],[{name:"order_by_entity",config:{type:"CheckboxControl",label:(0,l.t)("Order by entity id"),description:(0,l.t)("Important! Select this if the table is not already sorted by entity id, else there is no guarantee that all events for each entity are returned."),default:!0}}],[{name:"min_leaf_node_event_count",config:{type:"SelectControl",freeForm:!1,label:(0,l.t)("Minimum leaf node event count"),default:1,choices:(0,g.B)(1,10),description:(0,l.t)("Leaf nodes that represent fewer than this number of events will be initially hidden in the visualization")}}]]},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["adhoc_filters"]]},{label:(0,l.t)("Additional metadata"),controlSetRows:[[{name:"all_columns",config:{type:"SelectControl",multi:!0,label:(0,l.t)("Metadata"),default:[],description:(0,l.t)("Select any columns for metadata inspection"),optionRenderer:e=>(0,N.tZ)(I.E,{showType:!0,column:e}),valueRenderer:e=>(0,N.tZ)(I.E,{column:e}),valueKey:"column_name",allowAll:!0,mapStateToProps:e=>({options:e.datasource?e.datasource.columns:[]}),commaChoosesOption:!1,freeForm:!0}}]]}],controlOverrides:{entity:{label:(0,l.t)("Entity ID"),description:(0,l.t)('e.g., a "user id" column')},row_limit:{label:(0,l.t)("Max Events"),description:(0,l.t)("The maximum number of events to return, equivalent to the number of rows")}}},B=new n.Z({category:(0,l.t)("Flow"),credits:["https://github.com/williaster/data-ui"],description:(0,l.t)("Compares the lengths of time different activities take in a shared timeline view."),name:(0,l.t)("Event Flow"),tags:[(0,l.t)("Legacy"),(0,l.t)("Progressive")],thumbnail:M,useLegacyApi:!0});class z extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(9857),o.e(8701)]).then(o.bind(o,88701)),loadTransformProps:()=>Promise.all([o.e(9857),o.e(349)]).then(o.bind(o,90349)),metadata:B,controlPanel:O})}}function V(e){const{width:t,height:o,formData:r,queriesData:a}=e,{bottomMargin:i,canvasImageRendering:n,allColumnsX:l,allColumnsY:s,linearColorScheme:c,leftMargin:d,metric:u,normalized:m,showLegend:p,showPerc:g,showValues:h,sortXAxis:f,sortYAxis:b,xscaleInterval:y,yscaleInterval:x,yAxisBounds:v,yAxisFormat:_}=r;return{width:t,height:o,data:a[0].data,bottomMargin:i,canvasImageRendering:n,colorScheme:c,columnX:l,columnY:s,leftMargin:d,metric:u,normalized:m,numberFormat:_,showLegend:p,showPercentage:g,showValues:h,sortXAxis:f,sortYAxis:b,xScaleInterval:parseInt(y,10),yScaleInterval:parseInt(x,10),yAxisBounds:v}}var q=o(77342),$=o(95752),W=o(16588),j=o(92722),G=o(53769);const Y=[["alpha_asc",(0,l.t)("Axis ascending")],["alpha_desc",(0,l.t)("Axis descending")],["value_asc",(0,l.t)("Metric ascending")],["value_desc",(0,l.t)("Metric descending")]],J={type:"SelectControl",default:null,description:(0,l.t)("Columns to display"),mapStateToProps:e=>({choices:(0,Z.Z)(e.datasource)}),validators:[C.Z]},H={...G.zo,description:(0,l.t)("Columns to display")},Q=(0,i.c)(i.T.ENABLE_EXPLORE_DRAG_AND_DROP)?H:J,U={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"all_columns_x",config:{...Q,label:"X Axis"}}],[{name:"all_columns_y",config:{...Q,label:"Y Axis"}}],["metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Heatmap Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["linear_color_scheme"],[{name:"xscale_interval",config:{type:"SelectControl",label:(0,l.t)("XScale Interval"),renderTrigger:!0,choices:(0,g.B)(1,50),default:1,clearable:!1,description:(0,l.t)("Number of steps to take between ticks when displaying the X scale")}}],[{name:"yscale_interval",config:{type:"SelectControl",label:(0,l.t)("YScale Interval"),choices:(0,g.B)(1,50),default:1,clearable:!1,renderTrigger:!0,description:(0,l.t)("Number of steps to take between ticks when displaying the Y scale")}}],[{name:"canvas_image_rendering",config:{type:"SelectControl",label:(0,l.t)("Rendering"),renderTrigger:!0,choices:[["pixelated","pixelated (Sharp)"],["auto","auto (Smooth)"]],default:"pixelated",description:(0,l.t)("image-rendering CSS attribute of the canvas object that defines how the browser scales up the image")}}],[{name:"normalize_across",config:{type:"SelectControl",label:(0,l.t)("Normalize Across"),choices:[["heatmap","heatmap"],["x","x"],["y","y"]],default:"heatmap",description:(0,l.t)("Color will be rendered based on a ratio of the cell against the sum of across this criteria")}}],[{name:"left_margin",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Left Margin"),choices:(0,g.m)(["auto",50,75,100,125,150,200]),default:"auto",renderTrigger:!0,description:(0,l.t)("Left margin, in pixels, allowing for more room for axis labels")}}],[{name:"bottom_margin",config:{type:"SelectControl",clearable:!1,freeForm:!0,label:(0,l.t)("Bottom Margin"),choices:(0,g.m)(["auto",50,75,100,125,150,200]),default:"auto",renderTrigger:!0,description:(0,l.t)("Bottom margin, in pixels, allowing for more room for axis labels")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Value bounds"),renderTrigger:!0,default:[null,null],description:(0,l.t)("Hard value bounds applied for color coding. Is only relevant and applied when the normalization is applied against the whole heatmap.")}}],["y_axis_format"],[{name:"sort_x_axis",config:{type:"SelectControl",label:(0,l.t)("Sort X Axis"),choices:Y,clearable:!1,default:"alpha_asc"}}],[{name:"sort_y_axis",config:{type:"SelectControl",label:(0,l.t)("Sort Y Axis"),choices:Y,clearable:!1,default:"alpha_asc"}}],[{name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Legend"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the legend (toggles)")}}],[{name:"show_perc",config:{type:"CheckboxControl",label:(0,l.t)("Show percentage"),renderTrigger:!0,description:(0,l.t)("Whether to include the percentage in the tooltip"),default:!0}}],[{name:"show_values",config:{type:"CheckboxControl",label:(0,l.t)("Show Values"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the numerical values within the cells")}}],[{name:"normalized",config:{type:"CheckboxControl",label:(0,l.t)("Normalized"),renderTrigger:!0,description:(0,l.t)("Whether to apply a normal distribution based on rank on the color scale"),default:!1}}]]}],controlOverrides:{y_axis_format:{label:(0,l.t)("Value Format")}}},X=new n.Z({category:(0,l.t)("Correlation"),credits:["http://bl.ocks.org/mbostock/3074470"],description:(0,l.t)("Visualize a related metric across pairs of groups. Heatmaps excel at showcasing the correlation or strength between two groups. Color is used to emphasize the strength of the link between each pair of groups."),exampleGallery:[{url:q,caption:(0,l.t)("Sizes of vehicles")},{url:$,caption:(0,l.t)("Relationships between community channels")},{url:W,caption:(0,l.t)("Employment and education")}],name:(0,l.t)("Heatmap"),tags:[(0,l.t)("Business"),(0,l.t)("Intensity"),(0,l.t)("Legacy"),(0,l.t)("Density"),(0,l.t)("Predictive"),(0,l.t)("Single Metric")],thumbnail:j,useLegacyApi:!0});class K extends s.Z{constructor(){super({loadChart:()=>o.e(5138).then(o.bind(o,55138)),metadata:X,transformProps:V,controlPanel:U})}}function ee(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:i,linkLength:n,normalized:l,cumulative:s,globalOpacity:c,xAxisLabel:d,yAxisLabel:u,showLegend:m}=r;return{width:t,height:o,data:a[0].data,binCount:parseInt(n,10),colorScheme:i,normalized:l,cumulative:s,opacity:c,xAxisLabel:d,yAxisLabel:u,showLegend:m}}var te=o(16831),oe=o(86946),re=o(36542),ae=o(99880);const ie={type:"SelectControl",label:(0,l.t)("Columns"),default:null,description:(0,l.t)("Select the numeric columns to draw the histogram"),mapStateToProps:e=>({choices:(0,Z.Z)(e.datasource)}),multi:!0,validators:[C.Z]},ne={...G.lC,description:(0,l.t)("Select the numeric columns to draw the histogram"),validators:[C.Z]},le=(0,i.c)(i.T.ENABLE_EXPLORE_DRAG_AND_DROP)?ne:ie,se={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"all_columns_x",config:le}],["adhoc_filters"],["row_limit"],["groupby"]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"link_length",config:{type:"SelectControl",renderTrigger:!0,freeForm:!0,label:(0,l.t)("No of Bins"),default:5,choices:(0,g.m)(["10","25","50","75","100","150","200","250"]),description:(0,l.t)("Select the number of bins for the histogram")}}],[{name:"x_axis_label",config:{type:"TextControl",label:(0,l.t)("X Axis Label"),renderTrigger:!0,default:""}}],[{name:"y_axis_label",config:{type:"TextControl",label:(0,l.t)("Y Axis Label"),renderTrigger:!0,default:""}}],[{name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Legend"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the legend (toggles)")}}],[{name:"normalized",config:{type:"CheckboxControl",label:(0,l.t)("Normalized"),renderTrigger:!0,description:(0,l.t)("Whether to normalize the histogram"),default:!1}}],[{name:"cumulative",config:{type:"CheckboxControl",label:(0,l.t)("Cumulative"),renderTrigger:!0,description:(0,l.t)("Whether to make the histogram cumulative"),default:!1}}]]}]},ce=new n.Z({category:(0,l.t)("Distribution"),description:(0,l.t)('Take your data points, and group them into "bins" to see where the densest areas of information lie'),exampleGallery:[{url:te,caption:(0,l.t)("Population age data")},{url:oe},{url:re}],name:(0,l.t)("Histogram"),tags:[(0,l.t)("Comparison"),(0,l.t)("Legacy"),(0,l.t)("Pattern"),(0,l.t)("Range")],thumbnail:ae,useLegacyApi:!0});class de extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(1095),o.e(895)]).then(o.bind(o,895)),metadata:ce,transformProps:ee,controlPanel:se})}}function ue(e){const{height:t,width:o,formData:r,queriesData:a}=e,{horizonColorScale:i,seriesHeight:n}=r;return{colorScale:i,data:a[0].data,height:t,seriesHeight:parseInt(n,10),width:o}}var me=o(18568),pe=o(44439);const ge={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}},{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[{name:"series_height",config:{type:"SelectControl",renderTrigger:!0,freeForm:!0,label:(0,l.t)("Series Height"),default:"25",choices:(0,g.m)(["10","25","40","50","75","100","150","200"]),description:(0,l.t)("Pixel height of each series")}},{name:"horizon_color_scale",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Value Domain"),choices:[["series","series"],["overall","overall"],["change","change"]],default:"series",description:(0,l.t)("series: Treat each series independently; overall: All series use the same scale; change: Show changes compared to the first data point in each series")}}]]}]},he=ge,fe=new n.Z({category:(0,l.t)("Distribution"),credits:["http://kmandov.github.io/d3-horizon-chart/"],description:(0,l.t)("Compares how a metric changes over time between different groups. Each group is mapped to a row and change over time is visualized bar lengths and color."),exampleGallery:[{url:me}],name:(0,l.t)("Horizon Chart"),tags:[(0,l.t)("Legacy")],thumbnail:pe,useLegacyApi:!0});class be extends s.Z{constructor(){super({loadChart:()=>o.e(9387).then(o.bind(o,49387)),metadata:fe,transformProps:ue,controlPanel:he})}}var ye=o(82540),xe=o(25704),ve=o(24188);const _e={type:"SelectControl",default:null,mapStateToProps:e=>({choices:(0,Z.Z)(e.datasource)})},we=(0,i.c)(i.T.ENABLE_EXPLORE_DRAG_AND_DROP)?G.zo:_e,Ce={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"all_columns_x",config:{...we,label:(0,l.t)("Longitude"),description:(0,l.t)("Column containing longitude data")}}],[{name:"all_columns_y",config:{...we,label:(0,l.t)("Latitude"),description:(0,l.t)("Column containing latitude data")}}],[{name:"clustering_radius",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Clustering Radius"),default:"60",choices:(0,g.m)(["0","20","40","60","80","100","200","500","1000"]),description:(0,l.t)("The radius (in pixels) the algorithm uses to define a cluster. Choose 0 to turn off clustering, but beware that a large number of points (>1000) will cause lag.")}}],["row_limit"],["adhoc_filters"],["groupby"]]},{label:(0,l.t)("Points"),controlSetRows:[[{name:"point_radius",config:{type:"SelectControl",label:(0,l.t)("Point Radius"),default:"Auto",description:(0,l.t)("The radius of individual points (ones that are not in a cluster). Either a numerical column or `Auto`, which scales the point based on the largest cluster"),mapStateToProps:e=>{const t=(0,Z.Z)(e.datasource);return{choices:(0,g.m)(["Auto"]).concat(t)}}}}],[{name:"point_radius_unit",config:{type:"SelectControl",label:(0,l.t)("Point Radius Unit"),default:"Pixels",choices:(0,g.m)(["Pixels","Miles","Kilometers"]),description:(0,l.t)("The unit of measure for the specified point radius")}}]]},{label:(0,l.t)("Labelling"),controlSetRows:[[{name:"mapbox_label",config:{type:"SelectControl",multi:!0,label:(0,l.t)("label"),default:[],description:(0,l.t)("`count` is COUNT(*) if a group by is used. Numerical columns will be aggregated with the aggregator. Non-numerical columns will be used to label points. Leave empty to get a count of points in each cluster."),mapStateToProps:e=>({choices:(0,Z.Z)(e.datasource)})}}],[{name:"pandas_aggfunc",config:{type:"SelectControl",label:(0,l.t)("Cluster label aggregator"),clearable:!1,choices:(0,g.m)(["sum","mean","min","max","std","var"]),default:"sum",description:(0,l.t)("Aggregate function applied to the list of points in each cluster to produce the cluster label.")}}]]},{label:(0,l.t)("Visual Tweaks"),controlSetRows:[[{name:"render_while_dragging",config:{type:"CheckboxControl",label:(0,l.t)("Live render"),default:!0,description:(0,l.t)("Points and clusters will update as the viewport is being changed")}}],[{name:"mapbox_style",config:{type:"SelectControl",label:(0,l.t)("Map Style"),clearable:!1,renderTrigger:!0,choices:[["mapbox://styles/mapbox/streets-v9","Streets"],["mapbox://styles/mapbox/dark-v9","Dark"],["mapbox://styles/mapbox/light-v9","Light"],["mapbox://styles/mapbox/satellite-streets-v9","Satellite Streets"],["mapbox://styles/mapbox/satellite-v9","Satellite"],["mapbox://styles/mapbox/outdoors-v9","Outdoors"]],default:"mapbox://styles/mapbox/light-v9",description:(0,l.t)("Base layer map style")}}],[{name:"global_opacity",config:{type:"TextControl",label:(0,l.t)("Opacity"),default:1,isFloat:!0,description:(0,l.t)("Opacity of all clusters, points, and labels. Between 0 and 1.")}}],[{name:"mapbox_color",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("RGB Color"),default:"rgb(0, 122, 135)",choices:[["rgb(0, 139, 139)","Dark Cyan"],["rgb(128, 0, 128)","Purple"],["rgb(255, 215, 0)","Gold"],["rgb(69, 69, 69)","Dim Gray"],["rgb(220, 20, 60)","Crimson"],["rgb(34, 139, 34)","Forest Green"]],description:(0,l.t)("The color for points and clusters in RGB")}}]]},{label:(0,l.t)("Viewport"),expanded:!0,controlSetRows:[[{name:"viewport_longitude",config:{type:"TextControl",label:(0,l.t)("Default longitude"),renderTrigger:!0,default:-122.405293,isFloat:!0,description:(0,l.t)("Longitude of default viewport"),places:8,dontRefreshOnChange:!0}},{name:"viewport_latitude",config:{type:"TextControl",label:(0,l.t)("Default latitude"),renderTrigger:!0,default:37.772123,isFloat:!0,description:(0,l.t)("Latitude of default viewport"),places:8,dontRefreshOnChange:!0}}],[{name:"viewport_zoom",config:{type:"TextControl",label:(0,l.t)("Zoom"),renderTrigger:!0,isFloat:!0,default:11,description:(0,l.t)("Zoom level of the map"),places:8,dontRefreshOnChange:!0}},null]]}],controlOverrides:{groupby:{description:(0,l.t)("One or many controls to group by. If grouping, latitude and longitude columns must be present.")}}},Se=new n.Z({category:(0,l.t)("Map"),credits:["https://www.mapbox.com/mapbox-gl-js/api/"],description:"",exampleGallery:[{url:xe,description:(0,l.t)("Light mode")},{url:ve,description:(0,l.t)("Dark mode")}],name:(0,l.t)("MapBox"),tags:[(0,l.t)("Business"),(0,l.t)("Intensity"),(0,l.t)("Legacy"),(0,l.t)("Density"),(0,l.t)("Scatter"),(0,l.t)("Transformable")],thumbnail:ye,useLegacyApi:!0});class Te extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(5662),o.e(5253)]).then(o.bind(o,55253)),loadTransformProps:()=>Promise.all([o.e(5662),o.e(1877)]).then(o.bind(o,1877)),metadata:Se,controlPanel:Ce})}}function ke(e){const{formData:t,queriesData:o}=e,{groupby:r,liftvaluePrecision:a,metrics:i,pvaluePrecision:n,significanceLevel:l}=t;return{alpha:l,data:o[0].data,groups:r,liftValPrec:parseInt(a,10),metrics:i.map((e=>"string"==typeof e?e:e.label)),pValPrec:parseInt(n,10)}}var Ae=o(27605);const Re={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],[{name:"groupby",override:{validators:[C.Z]}}],["limit","timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}},{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,l.t)("Parameters"),expanded:!1,controlSetRows:[[{name:"significance_level",config:{type:"TextControl",label:(0,l.t)("Significance Level"),default:.05,description:(0,l.t)("Threshold alpha level for determining significance")}}],[{name:"pvalue_precision",config:{type:"TextControl",label:(0,l.t)("p-value precision"),default:6,description:(0,l.t)("Number of decimal places with which to display p-values")}}],[{name:"liftvalue_precision",config:{type:"TextControl",label:(0,l.t)("Lift percent precision"),default:4,description:(0,l.t)("Number of decimal places with which to display lift values")}}]]}]},Pe=Re,Le=new n.Z({category:(0,l.t)("Correlation"),description:(0,l.t)("Table that visualizes paired t-tests, which are used to understand statistical differences between groups."),name:(0,l.t)("Paired t-test Table"),tags:[(0,l.t)("Legacy"),(0,l.t)("Statistical"),(0,l.t)("Tabular")],thumbnail:Ae,useLegacyApi:!0});class Ee extends s.Z{constructor(){super({loadChart:()=>o.e(1484).then(o.bind(o,51484)),metadata:Le,transformProps:ke,controlPanel:Pe})}}function Fe(e){const{width:t,height:o,formData:r,queriesData:a}=e,{includeSeries:i,linearColorScheme:n,metrics:l,secondaryMetric:s,series:c,showDatatable:d}=r;return{width:t,height:o,data:a[0].data,includeSeries:i,linearColorScheme:n,metrics:l.map((e=>e.label||e)),colorMetric:s&&s.label?s.label:s,series:c,showDatatable:d}}var Me=o(72377);const De={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["series"],["metrics"],["secondary_metric"],["adhoc_filters"],["limit","row_limit"],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"show_datatable",config:{type:"CheckboxControl",label:(0,l.t)("Data Table"),default:!1,renderTrigger:!0,description:(0,l.t)("Whether to display the interactive data table")}},{name:"include_series",config:{type:"CheckboxControl",label:(0,l.t)("Include Series"),renderTrigger:!0,default:!1,description:(0,l.t)("Include series name as an axis")}}],["linear_color_scheme"]]}]},Ze=De,Ie=new n.Z({category:(0,l.t)("Ranking"),credits:["https://syntagmatic.github.io/parallel-coordinates"],description:(0,l.t)("Plots the individual metrics for each row in the data vertically and links them together as a line. This chart is useful for comparing multiple metrics across all of the samples or rows in the data."),name:(0,l.t)("Parallel Coordinates"),tags:[(0,l.t)("Coordinates"),(0,l.t)("Directional"),(0,l.t)("Legacy"),(0,l.t)("Relational")],thumbnail:Me,useLegacyApi:!0});class Ne extends s.Z{constructor(){super({loadChart:()=>o.e(9364).then(o.bind(o,29364)),metadata:Ie,transformProps:Fe,controlPanel:Ze})}}function Oe(e){const{width:t,height:o,datasource:r,formData:a,queriesData:i}=e,{colorScheme:n,dateTimeFormat:l,equalDateSize:s,groupby:c,logScale:d,metrics:u,numberFormat:m,partitionLimit:p,partitionThreshold:g,richTooltip:h,timeSeriesOption:f}=a,{verboseMap:b}=r;return{width:t,height:o,data:i[0].data,colorScheme:n,dateTimeFormat:l,equalDateSize:s,levels:c.map((e=>b[e]||e)),metrics:u,numberFormat:m,partitionLimit:p&&parseInt(p,10),partitionThreshold:g&&parseInt(g,10),timeSeriesOption:f,useLogScale:d,useRichTooltip:h}}var Be=o(9754),ze=o(45697),Ve=o.n(ze),qe=o(9882);const $e={option:Ve().object.isRequired};function We({option:e}){return(0,N.tZ)("span",null,(0,N.tZ)("span",{className:"m-r-5 option-label"},e.label),e.description&&(0,N.tZ)(qe.V,{className:"m-r-5 text-muted",icon:"question-circle-o",tooltip:e.description,label:`descr-${e.label}`}))}We.propTypes=$e;const je={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}},{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,l.t)("Time Series Options"),expanded:!0,controlSetRows:[[{name:"time_series_option",config:{type:"SelectControl",label:(0,l.t)("Options"),validators:[C.Z],default:"not_time",valueKey:"value",options:[{label:(0,l.t)("Not Time Series"),value:"not_time",description:(0,l.t)("Ignore time")},{label:(0,l.t)("Time Series"),value:"time_series",description:(0,l.t)("Standard time series")},{label:(0,l.t)("Aggregate Mean"),value:"agg_mean",description:(0,l.t)("Mean of values over specified period")},{label:(0,l.t)("Aggregate Sum"),value:"agg_sum",description:(0,l.t)("Sum of values over specified period")},{label:(0,l.t)("Difference"),value:"point_diff",description:(0,l.t)("Metric change in value from `since` to `until`")},{label:(0,l.t)("Percent Change"),value:"point_percent",description:(0,l.t)("Metric percent change in value from `since` to `until`")},{label:(0,l.t)("Factor"),value:"point_factor",description:(0,l.t)("Metric factor change from `since` to `until`")},{label:(0,l.t)("Advanced Analytics"),value:"adv_anal",description:(0,l.t)("Use the Advanced Analytics options below")}],optionRenderer:e=>(0,N.tZ)(We,{option:e}),valueRenderer:e=>(0,N.tZ)(We,{option:e}),description:(0,l.t)("Settings for time series")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["color_scheme"],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:h.YD}},{name:"date_time_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date Time Format"),renderTrigger:!0,default:"smart_date",choices:h.HC,description:h.YD}}],[{name:"partition_limit",config:{type:"TextControl",label:(0,l.t)("Partition Limit"),isInt:!0,default:"5",description:(0,l.t)("The maximum number of subdivisions of each group; lower values are pruned first")}},{name:"partition_threshold",config:{type:"TextControl",label:(0,l.t)("Partition Threshold"),isFloat:!0,default:"0.05",description:(0,l.t)("Partitions whose height to parent height proportions are below this value are pruned")}}],[{name:"log_scale",config:{type:"CheckboxControl",label:(0,l.t)("Log Scale"),default:!1,renderTrigger:!0,description:(0,l.t)("Use a log scale")}}],[{name:"equal_date_size",config:{type:"CheckboxControl",label:(0,l.t)("Equal Date Sizes"),default:!0,renderTrigger:!0,description:(0,l.t)("Check to force date partitions to have the same height")}}],[{name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,l.t)("Rich Tooltip"),renderTrigger:!0,default:!0,description:(0,l.t)("The rich tooltip shows a list of all series for that point in time")}}]]},{label:(0,l.t)("Advanced Analytics"),tabOverride:"data",description:(0,l.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Rolling Window"))],[{name:"rolling_type",config:{type:"SelectControl",label:(0,l.t)("Rolling Function"),default:"None",choices:(0,g.m)(["None","mean","sum","std","cumsum"]),description:(0,l.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,l.t)("Periods"),isInt:!0,description:(0,l.t)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:(0,l.t)("Min Periods"),isInt:!0,description:(0,l.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Time Comparison"))],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,l.t)("Time Shift"),choices:(0,g.m)(["1 day","1 week","28 days","30 days","52 weeks","1 year","104 weeks","2 years","156 weeks","3 years"]),description:(0,l.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example:  24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:(0,l.t)("Calculation type"),default:"values",choices:[["values","Actual Values"],["absolute","Difference"],["percentage","Percentage change"],["ratio","Ratio"]],description:(0,l.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Python Functions"))],[(0,N.tZ)("h2",{className:"section-header"},"pandas.resample")],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Rule"),default:null,choices:(0,g.m)(["1T","1H","1D","7D","1M","1AS"]),description:(0,l.t)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Method"),default:null,choices:(0,g.m)(["asfreq","bfill","ffill","median","mean","sum"]),description:(0,l.t)("Pandas resample method")}}]]}]},Ge=je,Ye=new n.Z({category:(0,l.t)("Part of a Whole"),description:(0,l.t)("Compare the same summarized metric across multiple groups."),name:(0,l.t)("Partition Chart"),tags:[(0,l.t)("Categorical"),(0,l.t)("Comparison"),(0,l.t)("Legacy"),(0,l.t)("Proportional")],thumbnail:Be,useLegacyApi:!0});class Je extends s.Z{constructor(){super({loadChart:()=>o.e(5714).then(o.bind(o,35714)),metadata:Ye,transformProps:Oe,controlPanel:Ge})}}var He=o(5031);function Qe(e){const{height:t,datasource:o,formData:r,queriesData:a,rawFormData:i}=e,{groupby:n,numberFormat:l,dateFormat:s}=r,{columnFormats:c,verboseMap:d}=o,u=(0,He.Z)(i);return{columnFormats:c,data:a[0].data,dateFormat:s,granularity:u,height:t,numberFormat:l,numGroups:n.length,verboseMap:d}}var Ue=o(23998);const Xe={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["columns"],["row_limit",null],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}]]},{label:(0,l.t)("Pivot Options"),controlSetRows:[[{name:"pandas_aggfunc",config:{type:"SelectControl",label:(0,l.t)("Aggregation function"),clearable:!1,choices:(0,g.m)(["sum","mean","min","max","std","var"]),default:"sum",description:(0,l.t)("Aggregate function to apply when pivoting and computing the total rows and columns")}},null],[{name:"pivot_margins",config:{type:"CheckboxControl",label:(0,l.t)("Show totals"),default:!0,description:(0,l.t)("Display total row/column")}},{name:"combine_metric",config:{type:"CheckboxControl",label:(0,l.t)("Combine Metrics"),default:!1,description:(0,l.t)("Display metrics side by side within each column, as opposed to each column being displayed side by side for each metric.")}}],[{name:"transpose_pivot",config:{type:"CheckboxControl",label:(0,l.t)("Transpose Pivot"),default:!1,description:(0,l.t)("Swap Groups and Columns")}}]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:h.YD}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}}]]}],controlOverrides:{groupby:{includeTime:!0},columns:{includeTime:!0}}},Ke=Xe,et=new n.Z({category:(0,l.t)("Table"),description:(0,l.t)("Used to summarize a set of data by grouping together multiple statistics along two axes. Examples: Sales numbers by region and month, tasks by status and assignee, active users by age and location.\n\n  This chart is being deprecated and we recommend checking out Pivot Table V2 instead!"),name:(0,l.t)("Pivot Table"),tags:[(0,l.t)("Legacy")],thumbnail:Ue,useLegacyApi:!0});class tt extends s.Z{constructor(){super({loadChart:()=>o.e(8650).then(o.bind(o,88650)),metadata:et,transformProps:Qe,controlPanel:Ke})}}function ot(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:i,dateTimeFormat:n,numberFormat:l,richTooltip:s,roseAreaProportion:c}=r;return{width:t,height:o,data:a[0].data,colorScheme:i,dateTimeFormat:n,numberFormat:l,useAreaProportions:c,useRichTooltip:s}}var rt=o(95215);const at={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}},{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:h.YD}},{name:"date_time_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date Time Format"),renderTrigger:!0,default:"smart_date",choices:h.HC,description:h.YD}}],[{name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,l.t)("Rich Tooltip"),renderTrigger:!0,default:!0,description:(0,l.t)("The rich tooltip shows a list of all series for that point in time")}},{name:"rose_area_proportion",config:{type:"CheckboxControl",label:(0,l.t)("Use Area Proportions"),description:(0,l.t)("Check if the Rose Chart should use segment area instead of segment radius for proportioning"),default:!1,renderTrigger:!0}}]]},{label:(0,l.t)("Advanced Analytics"),tabOverride:"data",description:(0,l.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Rolling Window"))],[{name:"rolling_type",config:{type:"SelectControl",label:(0,l.t)("Rolling Function"),default:"None",choices:(0,g.m)(["None","mean","sum","std","cumsum"]),description:(0,l.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,l.t)("Periods"),isInt:!0,description:(0,l.t)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:(0,l.t)("Min Periods"),isInt:!0,description:(0,l.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Time Comparison"))],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,l.t)("Time Shift"),choices:(0,g.m)(["1 day","1 week","28 days","30 days","52 weeks","1 year","104 weeks","2 years","156 weeks","3 years"]),description:(0,l.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example:  24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:(0,l.t)("Calculation type"),default:"values",choices:[["values","Actual Values"],["absolute","Difference"],["percentage","Percentage change"],["ratio","Ratio"]],description:(0,l.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Python Functions"))],[(0,N.tZ)("h2",{className:"section-header"},"pandas.resample")],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Rule"),default:null,choices:(0,g.m)(["1T","1H","1D","7D","1M","1AS"]),description:(0,l.t)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Method"),default:null,choices:(0,g.m)(["asfreq","bfill","ffill","median","mean","sum"]),description:(0,l.t)("Pandas resample method")}}]]}]},it=at,nt=new n.Z({category:(0,l.t)("Ranking"),description:(0,l.t)("A polar coordinate chart where the circle is broken into wedges of equal angle, and the value represented by any wedge is illustrated by its area, rather than its radius or sweep angle."),name:(0,l.t)("Nightingale Rose Chart"),tags:[(0,l.t)("Legacy"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Circular"),(0,l.t)("Multi-Layers"),(0,l.t)("Pattern"),(0,l.t)("Time"),(0,l.t)("Trend")],thumbnail:rt,useLegacyApi:!0});class lt extends s.Z{constructor(){super({loadChart:()=>o.e(9164).then(o.bind(o,59164)),metadata:nt,transformProps:ot,controlPanel:it})}}var st=o(51824);function ct(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:i}=r;return{width:t,height:o,data:a[0].data,colorScheme:i,fontSize:(0,st.Py)(t)}}var dt=o(21535),ut=o(17713),mt=o(66626);const pt={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",override:{label:(0,l.t)("Source / Target"),description:(0,l.t)("Choose a source and a target")}}],["metric"],["adhoc_filters"],[{name:"row_limit",override:{description:(0,l.t)("Limiting rows may result in incomplete data and misleading charts. Consider filtering or grouping source/target names instead.")}}],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"]]}]},gt=new n.Z({category:(0,l.t)("Flow"),credits:["https://github.com/d3/d3-sankey"],description:(0,l.t)("Visualizes the flow of different group's values through different stages of a system. New stages in the pipeline are visualized as nodes or layers. The thickness of the bars or edges represent the metric being visualized."),exampleGallery:[{url:ut,description:(0,l.t)("Demographics")},{url:mt,description:(0,l.t)("Survey Responses")}],name:(0,l.t)("Sankey Diagram"),tags:[(0,l.t)("Categorical"),(0,l.t)("Directional"),(0,l.t)("Legacy"),(0,l.t)("Percentages"),(0,l.t)("Proportional"),(0,l.t)("Relational")],thumbnail:dt,useLegacyApi:!0});class ht extends s.Z{constructor(){super({loadChart:()=>o.e(7984).then(o.bind(o,47984)),metadata:gt,transformProps:ct,controlPanel:pt})}}function ft(e){const{width:t,height:o,formData:r,queriesData:a,datasource:i}=e,{colorScheme:n,linearColorScheme:l,metric:s,secondaryMetric:c}=r,d={width:t,height:o,data:a[0].data,colorScheme:n,linearColorScheme:l,metrics:[s,c]};if(i&&i.metrics){const e=i.metrics.find((({metric_name:e,d3format:t})=>e===r.metric&&t));e&&Object.assign(d,{numberFormat:e.d3format})}return d}var bt=o(11733),yt=o(65638);const xt={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metric"],["secondary_metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],["linear_color_scheme"]]}],controlOverrides:{metric:{label:(0,l.t)("Primary Metric"),description:(0,l.t)("The primary metric is used to define the arc segment sizes")},secondary_metric:{label:(0,l.t)("Secondary Metric"),default:null,description:(0,l.t)("[optional] this secondary metric is used to define the color as a ratio against the primary metric. When omitted, the color is categorical and based on labels")},color_scheme:{description:(0,l.t)("When only a primary metric is provided, a categorical color scale is used.")},linear_color_scheme:{description:(0,l.t)("When a secondary metric is provided, a linear color scale is used.")},groupby:{label:(0,l.t)("Hierarchy"),description:(0,l.t)("This defines the level of the hierarchy")}}},vt=new n.Z({category:(0,l.t)("Part of a Whole"),credits:["https://bl.ocks.org/kerryrodden/7090426"],description:(0,l.t)("Uses circles to visualize the flow of data through different stages of a system. Hover over individual paths in the visualization to understand the stages a value took. Useful for multi-stage, multi-group visualizing funnels and pipelines."),exampleGallery:[{url:yt}],name:(0,l.t)("Sunburst Chart"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Legacy"),(0,l.t)("Multi-Levels"),(0,l.t)("Proportional")],thumbnail:bt,useLegacyApi:!0});class _t extends s.Z{constructor(){super({loadChart:()=>o.e(8296).then(o.bind(o,48296)),metadata:vt,transformProps:ft,controlPanel:xt})}}var wt=o(16355),Ct=o(30845),St=o(45636),Tt=o(42846),kt=o(88889),At=o(56652),Rt=o(78900),Pt=o(20620),Lt=o(9609);function Et(e,t){return e===t||!e&&!t||e&&t&&e.length===t.length&&e.every(((e,o)=>e===t[o]))}var Ft=o(57790);const{PERCENT_3_POINT:Mt}=St.Z,{DATABASE_DATETIME:Dt}=Tt.Z;function Zt(e,t=[]){return t.every((t=>null===t[e]||void 0===t[e]||"number"==typeof t[e]))}const It=(0,Ct.Z)((function(e,t){if(!e||!e[0])return e||[];const o=t.filter((e=>e.dataType===kt.Z.TEMPORAL));return o.length>0?e.map((e=>{const t={...e};return o.forEach((({key:o,formatter:r})=>{t[o]=new Ft.Z(e[o],{formatter:r})})),t})):e})),Nt=(0,Ct.Z)((function(e){const{datasource:{columnFormats:t,verboseMap:o},rawFormData:{table_timestamp_format:r,metrics:a,percent_metrics:i,column_config:n={}},queriesData:l}=e,s=(0,He.Z)(e.rawFormData),{data:u,colnames:m,coltypes:p}=l[0]||{},g=(null!=a?a:[]).map(At.Z),h=(null!=i?i:[]).map(At.Z),f=h.map((e=>`%${e}`)),b=new Set(g),y=new Set(f),x=new Set(h),v=(m||[]).filter((e=>!(x.has(e)&&!b.has(e)))).map(((e,a)=>{const i=(null==o?void 0:o[e])||e,l=p[a],m=n[e]||{},g=b.has(e)&&Zt(e,u),h=y.has(e),f=l===kt.Z.TEMPORAL,x=null==t?void 0:t[e],v=m.d3NumberFormat||x;let _;if(f||m.d3TimeFormat){const t=m.d3TimeFormat||x,o=t||r;o===Rt.Z.id?_=s?(0,d.uh)(s):t?(0,d.bt)(t):Zt(e,u)?(0,d.bt)(Dt):String:o&&(_=(0,d.bt)(o))}else h?_=(0,c.JB)(v||Mt):(g||v)&&(_=(0,c.JB)(v));return{key:e,label:i,dataType:l,isNumeric:l===kt.Z.NUMERIC,isMetric:g,isPercentMetric:h,formatter:_,config:m}}));return[g,f,v]}),(function(e,t){var o,r,a,i,n,l,s,c;const d=e[0],u=t[0];return d.datasource.columnFormats===u.datasource.columnFormats&&d.datasource.verboseMap===u.datasource.verboseMap&&d.formData.tableTimestampFormat===u.formData.tableTimestampFormat&&d.formData.timeGrainSqla===u.formData.timeGrainSqla&&JSON.stringify(d.formData.columnConfig||null)===JSON.stringify(u.formData.columnConfig||null)&&Et(d.formData.metrics,u.formData.metrics)&&Et(null==(o=d.queriesData)||null==(r=o[0])?void 0:r.colnames,null==(a=u.queriesData)||null==(i=a[0])?void 0:i.colnames)&&Et(null==(n=d.queriesData)||null==(l=n[0])?void 0:l.coltypes,null==(s=u.queriesData)||null==(c=s[0])?void 0:c.coltypes)&&JSON.stringify(d.formData.extraFilters||null)===JSON.stringify(u.formData.extraFilters||null)&&JSON.stringify(d.formData.extraFormData||null)===JSON.stringify(u.formData.extraFormData||null)})),Ot=e=>{var t,o,r;const{height:a,width:i,rawFormData:n,queriesData:l=[],filterState:s,ownState:c={},hooks:{onAddFilter:d,setDataMask:u=(()=>{})}}=e,{align_pn:m=!0,color_pn:p=!0,show_cell_bars:g=!0,include_search:h=!1,page_length:f,emit_filter:b,server_pagination:y=!1,server_page_length:x=10,order_desc:v=!1,query_mode:_,show_totals:w,conditional_formatting:C}=n,S=(0,He.Z)(n),[T,k,A]=Nt(e);let R,P,L,E;var F,M,D,Z,I,N;y?([R,P,L]=l,E=null!=(F=null==(M=P)||null==(D=M.data)||null==(Z=D[0])?void 0:Z.rowcount)?F:0):([R,L]=l,E=null!=(I=null==(N=R)?void 0:N.rowcount)?I:0);const O=It(null==(t=R)?void 0:t.data,A),B=w&&_===Pt.nJ.aggregate?null==(o=L)?void 0:o.data[0]:void 0,z=null!=(r=(0,Lt.ni)(C,O))?r:[];return{height:a,width:i,isRawRecords:_===Pt.nJ.raw,data:O,totals:B,columns:A,serverPagination:y,metrics:T,percentMetrics:k,serverPaginationData:c,setDataMask:u,alignPositiveNegative:m,colorPositiveNegative:p,showCellBars:g,sortDesc:v,includeSearch:h,rowCount:E,pageSize:y?x:(V=f,q=O.length,$=A.length,"number"==typeof V?V||0:"string"==typeof V?Number(V)||0:q*$>5e3?200:0),filters:s.filters,emitFilter:b,onChangeFilter:d,columnColorFormatters:z,timeGrain:S};var V,q,$};var Bt=o(59812),zt=o(71513),Vt=o(94362),qt=o(61957),$t=o(55786),Wt=o(35622),jt=o(16522),Gt=o(929),Yt=o(39826),Jt=o(2608);function Ht(e){var t,o;const r=null==e||null==(t=e.query_mode)?void 0:t.value;if(r===Pt.nJ.aggregate||r===Pt.nJ.raw)return r;const a=null==e||null==(o=e.all_columns)?void 0:o.value;return a&&a.length>0?Pt.nJ.raw:Pt.nJ.aggregate}function Qt(e){return({controls:t})=>Ht(t)===e}(0,l.oK)(Yt.Z);const Ut=Qt(Pt.nJ.aggregate),Xt=Qt(Pt.nJ.raw),Kt=(e,t)=>t.every((e=>0===(0,$t.Z)(e).length))&&Ut({controls:e})?[(0,l.t)("Group By, Metrics or Percentage Metrics must have a value")]:[],eo={type:"RadioButtonControl",label:(0,l.t)("Query mode"),default:null,options:[[Pt.nJ.aggregate,Wt.cm[Pt.nJ.aggregate]],[Pt.nJ.raw,Wt.cm[Pt.nJ.raw]]],mapStateToProps:({controls:e})=>({value:Ht(e)}),rerender:["all_columns","groupby","metrics","percent_metrics"]},to={type:"SelectControl",label:(0,l.t)("Columns"),description:(0,l.t)("Columns to display"),multi:!0,freeForm:!0,allowAll:!0,commaChoosesOption:!1,default:[],optionRenderer:e=>(0,N.tZ)(I.E,{showType:!0,column:e}),valueRenderer:e=>(0,N.tZ)(I.E,{column:e}),valueKey:"column_name",mapStateToProps:({datasource:e,controls:t},o)=>({options:(null==e?void 0:e.columns)||[],queryMode:Ht(t),externalValidationErrors:Xt({controls:t})&&0===(0,$t.Z)(o.value).length?[(0,l.t)("must have a value")]:[]}),sortComparator:(e,t)=>e.label.localeCompare(t.label),visibility:Xt},oo={type:"DndColumnSelect",label:(0,l.t)("Columns"),description:(0,l.t)("Columns to display"),default:[],mapStateToProps({datasource:e,controls:t},o){const r={};if(e){const t=e.columns;r.options=Object.fromEntries(t.map((e=>[e.column_name,e])))}return r.queryMode=Ht(t),r.externalValidationErrors=Xt({controls:t})&&0===(0,$t.Z)(o.value).length?[(0,l.t)("must have a value")]:[],r},visibility:Xt},ro={type:"MetricsControl",label:(0,l.t)("Percentage metrics"),description:(0,l.t)("Metrics for which percentage of total are to be displayed. Calculated from only data within the row limit."),multi:!0,visibility:Ut,mapStateToProps:({datasource:e,controls:t},o)=>{var r,a;return{columns:(null==e?void 0:e.columns)||[],savedMetrics:(null==e?void 0:e.metrics)||[],datasource:e,datasourceType:null==e?void 0:e.type,queryMode:Ht(t),externalValidationErrors:Kt(t,[null==(r=t.groupby)?void 0:r.value,null==(a=t.metrics)?void 0:a.value,o.value])}},rerender:["groupby","metrics"],default:[],validators:[]},ao={...ro,type:"DndMetricSelect"},io={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"query_mode",config:eo}],[{name:"groupby",override:{visibility:Ut,mapStateToProps:(e,t)=>{var o,r,a,i;const{controls:n}=e,l=null==jt.Hq||null==(o=jt.Hq.groupby)?void 0:o.mapStateToProps,s=null!=(r=null==l?void 0:l(e,t))?r:{};return s.externalValidationErrors=Kt(n,[null==(a=n.metrics)?void 0:a.value,null==(i=n.percent_metrics)?void 0:i.value,t.value]),s},rerender:["metrics","percent_metrics"]}}],[{name:"metrics",override:{validators:[],visibility:Ut,mapStateToProps:({controls:e,datasource:t,form_data:o},r)=>{var a,i;return{columns:(null==t?void 0:t.columns.filter((e=>e.filterable)))||[],savedMetrics:(null==t?void 0:t.metrics)||[],selectedMetrics:o.metrics||(o.metric?[o.metric]:[]),datasource:t,externalValidationErrors:Kt(e,[null==(a=e.groupby)?void 0:a.value,null==(i=e.percent_metrics)?void 0:i.value,r.value])}},rerender:["groupby","percent_metrics"]}},{name:"all_columns",config:(0,i.c)(i.T.ENABLE_EXPLORE_DRAG_AND_DROP)?oo:to}],[{name:"percent_metrics",config:{...(0,i.c)(i.T.ENABLE_EXPLORE_DRAG_AND_DROP)?ao:ro}}],["adhoc_filters"],[{name:"timeseries_limit_metric",override:{visibility:Ut}},{name:"order_by_cols",config:{type:"SelectControl",label:(0,l.t)("Ordering"),description:(0,l.t)("Order results by selected columns"),multi:!0,default:[],mapStateToProps:({datasource:e})=>({choices:(null==e?void 0:e.order_by_choices)||[]}),visibility:Xt,sortComparator:(e,t)=>e.label.localeCompare(t.label)}}],(0,i.c)(i.T.DASHBOARD_CROSS_FILTERS)||(0,i.c)(i.T.DASHBOARD_NATIVE_FILTERS)?[{name:"server_pagination",config:{type:"CheckboxControl",label:(0,l.t)("Server pagination"),description:(0,l.t)("Enable server side pagination of results (experimental feature)"),default:!1}}]:[],[{name:"row_limit",override:{visibility:({controls:e})=>{var t;return!(null!=e&&null!=(t=e.server_pagination)&&t.value)}}},{name:"server_page_length",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Server Page Length"),default:10,choices:Jt.T,description:(0,l.t)("Rows per page, 0 means no pagination"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.server_pagination)?void 0:t.value)}}}],[{name:"include_time",config:{type:"CheckboxControl",label:(0,l.t)("Include time"),description:(0,l.t)("Whether to include the time granularity as defined in the time section"),default:!1,visibility:Ut}},{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:Ut}}],[{name:"show_totals",config:{type:"CheckboxControl",label:(0,l.t)("Show totals"),default:!1,description:(0,l.t)("Show total aggregations of selected metrics. Note that row limit does not apply to the result."),visibility:Ut}}],Gt.a]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"table_timestamp_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Timestamp format"),default:Rt.Z.id,renderTrigger:!0,clearable:!1,choices:h.HC,description:(0,l.t)("D3 time format for datetime columns")}}],[{name:"page_length",config:{type:"SelectControl",freeForm:!0,renderTrigger:!0,label:(0,l.t)("Page length"),default:null,choices:Jt.T,description:(0,l.t)("Rows per page, 0 means no pagination"),visibility:({controls:e})=>{var t;return!(null!=e&&null!=(t=e.server_pagination)&&t.value)}}},null],[{name:"include_search",config:{type:"CheckboxControl",label:(0,l.t)("Search box"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to include a client-side search box")}},{name:"show_cell_bars",config:{type:"CheckboxControl",label:(0,l.t)("Cell bars"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display a bar chart background in table columns")}}],[{name:"align_pn",config:{type:"CheckboxControl",label:(0,l.t)("Align +/-"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to align background charts with both positive and negative values at 0")}},{name:"color_pn",config:{type:"CheckboxControl",label:(0,l.t)("Color +/-"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to colorize numeric values by if they are positive or negative")}}],[{name:"column_config",config:{type:"ColumnConfigControl",label:(0,l.t)("Customize columns"),description:(0,l.t)("Further customize how to display each column"),renderTrigger:!0,mapStateToProps(e,t,o){var r,a,i;return{queryResponse:null==o||null==(r=o.queriesResponse)?void 0:r[0],emitFilter:null==e||null==(a=e.controls)||null==(i=a.table_filter)?void 0:i.value}}}}],[{name:"conditional_formatting",config:{type:"ConditionalFormattingControl",renderTrigger:!0,label:(0,l.t)("Conditional formatting"),description:(0,l.t)("Apply conditional color formatting to numeric columns"),mapStateToProps(e,t,o){var r,a,i,n;const l=null!=(r=null==e||null==(a=e.datasource)?void 0:a.verbose_map)?r:{},{colnames:s,coltypes:c}=null!=(i=null==o||null==(n=o.queriesResponse)?void 0:n[0])?i:{};return{columnOptions:Array.isArray(s)&&Array.isArray(c)?s.filter(((e,t)=>c[t]===kt.Z.NUMERIC)).map((e=>{var t;return{value:e,label:null!=(t=l[e])?t:e}})):[],verboseMap:l}}}}]]}]},no=io;var lo=o(61654),so=o(74765),co=o(12456);const uo=(()=>{let e={};const t=t=>{e={...e,...t}};return(o,r)=>{var a;return((e,t)=>{const{percent_metrics:o,order_desc:r=!1}=e,a=function(e){const{query_mode:t}=e;if(t===Pt.nJ.aggregate||t===Pt.nJ.raw)return t;const o=null==e?void 0:e.all_columns;return o&&o.length>0?Pt.nJ.raw:Pt.nJ.aggregate}(e),i=(0,$t.Z)(e.timeseries_limit_metric)[0];let n=e;return a===Pt.nJ.raw&&(n={...e,include_time:!1}),(0,lo.Z)(n,(l=>{var s,c,d,u,m,p,g,h;let{metrics:f,orderby:b=[]}=l,y=[];var x;if(a===Pt.nJ.aggregate&&(f=f||[],i?b=[[i,!r]]:(null==(x=f)?void 0:x.length)>0&&(b=[[f[0],!1]]),o&&o.length>0)){const e=(0,so.Z)(o.map(At.Z));f=(0,so.Z)(f.concat(o),At.Z),y=[{operation:"contribution",options:{columns:e,rename_columns:e.map((e=>`%${e}`))}}]}const v={},_=null!=(s=null==t?void 0:t.ownState)?s:{};var w,C,S;n.server_pagination&&(v.row_limit=null!=(w=_.pageSize)?w:n.server_page_length,v.row_offset=(null!=(C=_.currentPage)?C:0)*(null!=(S=_.pageSize)?S:0));let T={...l,orderby:b,metrics:f,post_processing:y,...v};var k,A;e.server_pagination&&null!=t&&null!=(c=t.extras)&&null!=(d=c.cachedChanges)&&d[e.slice_id]&&JSON.stringify(null==t||null==(u=t.extras)||null==(m=u.cachedChanges)?void 0:m[e.slice_id])!==JSON.stringify(T.filters)&&(T={...T,row_offset:0},(0,co.X)(null==t||null==(k=t.hooks)?void 0:k.setDataMask,0,null!=(A=T.row_limit)?A:0)),null==t||null==(p=t.hooks)||p.setCachedChanges({[e.slice_id]:T.filters});const R=[];null!=(g=f)&&g.length&&e.show_totals&&a===Pt.nJ.aggregate&&R.push({...T,columns:[],row_limit:0,row_offset:0,post_processing:[]});const P=null==(h=e.extra_form_data)?void 0:h.interactive_groupby;return P&&T.columns&&(T.columns=[...new Set([...T.columns,...P])]),e.server_pagination?[{...T},{...T,row_limit:0,row_offset:0,post_processing:[],is_rowcount:!0},...R]:[T,...R]}))})({...o},{extras:{cachedChanges:e},ownState:null!=(a=null==r?void 0:r.ownState)?a:{},hooks:{...null==r?void 0:r.hooks,setDataMask:()=>{},setCachedChanges:t}})}})(),mo=new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Table"),canBeAnnotationTypes:["EVENT","INTERVAL"],description:(0,l.t)("Classic row-by-column spreadsheet like view of a dataset. Use tables to showcase a view into the underlying data or to show aggregated metrics."),exampleGallery:[{url:zt},{url:Vt},{url:qt}],name:(0,l.t)("Table"),tags:[(0,l.t)("Additive"),(0,l.t)("Business"),(0,l.t)("Formattable"),(0,l.t)("Pattern"),(0,l.t)("Popular"),(0,l.t)("Report"),(0,l.t)("Sequential"),(0,l.t)("Tabular"),(0,l.t)("Description")],thumbnail:Bt});class po extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(8924),o.e(3126)]).then(o.bind(o,96989)),metadata:mo,transformProps:Ot,controlPanel:no,buildQuery:uo})}}function go(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:i,treemapRatio:n}=r;let{numberFormat:l}=r;return!l&&e.datasource&&e.datasource.metrics&&e.datasource.metrics.forEach((t=>{t.metric_name===e.formData.metrics[0]&&t.d3format&&(l=t.d3format)})),{width:t,height:o,data:a[0].data,colorScheme:i,numberFormat:l,treemapRatio:n}}var ho=o(87832),fo=o(57205),bo=o(94340),yo=o(41120),xo=o(56127);const vo={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["row_limit"],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["color_scheme"],[{name:"treemap_ratio",config:{type:"TextControl",label:(0,l.t)("Ratio"),renderTrigger:!0,isFloat:!0,default:.5*(1+Math.sqrt(5)),description:(0,l.t)("Target aspect ratio for treemap tiles.")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:h.YD}}]]}],controlOverrides:{color_scheme:{renderTrigger:!1}}},_o=vo,wo=new n.Z({category:(0,l.t)("Part of a Whole"),credits:["https://bl.ocks.org/mbostock/911ad09bdead40ec0061"],description:(0,l.t)("Shows the composition of a dataset by segmenting a given rectangle as smaller rectangles with areas proportional to their value or contribution to the whole. Those rectangles may also, in turn, be further segmented hierarchically."),exampleGallery:[{url:fo},{url:bo},{url:yo},{url:xo}],name:(0,l.t)("Treemap"),tags:[(0,l.t)("Categorical"),(0,l.t)("Legacy"),(0,l.t)("Multi-Levels"),(0,l.t)("Percentages"),(0,l.t)("Proportional")],thumbnail:ho,useLegacyApi:!0});class Co extends s.Z{constructor(){super({loadChart:()=>o.e(2508).then(o.bind(o,42508)),metadata:wo,transformProps:go,controlPanel:_o})}}function So(e){return"string"==typeof e||void 0===e?e:Array.isArray(e)?e.length>0?So(e[0]):void 0:e.label}function To(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:i,metric:n,rotation:l,series:s,sizeFrom:c=0,sizeTo:d}=r,u=So(n),m={color:{field:s,scale:{scheme:i},type:"nominal"},fontSize:void 0===u?void 0:{field:u,scale:{range:[c,d],zero:!0},type:"quantitative"},text:{field:s}};return{data:a[0].data,encoding:m,height:o,rotation:l,width:t}}function ko(e){const{metric:t,sort_by_metric:o}=e;return(0,lo.Z)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}var Ao=o(91106),Ro=o(59754),Po=o(32701);const Lo={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["series"],["metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"size_from",config:{type:"TextControl",isInt:!0,label:(0,l.t)("Minimum Font Size"),renderTrigger:!0,default:10,description:(0,l.t)("Font size for the smallest value in the list")}},{name:"size_to",config:{type:"TextControl",isInt:!0,label:(0,l.t)("Maximum Font Size"),renderTrigger:!0,default:70,description:(0,l.t)("Font size for the biggest value in the list")}}],[{name:"rotation",config:{type:"SelectControl",label:(0,l.t)("Word Rotation"),choices:[["random","random"],["flat","flat"],["square","square"]],renderTrigger:!0,default:"square",clearable:!1,description:(0,l.t)("Rotation to apply to words in the cloud")}}],["color_scheme"]]}],controlOverrides:{series:{validators:[C.Z],clearable:!1},row_limit:{default:100}}};var Eo=o(44994),Fo=o(43897),Mo=o(13663),Do=o(45511),Zo=o(81545),Io=o(28062);Mo.Z.setNumberFormatResolver(c.JB).setTimeFormatResolver((({format:e,formatInLocalTime:t=!1}={})=>{const o=t?(0,Eo.addPrefix)(Tt.D,null!=e?e:(0,d.ZP)().getDefaultKey()):e;return(0,d.bt)(o)})).setColorSchemeResolver((({name:e,type:t="categorical"}={})=>{if("sequential"===t){const t=(0,Do.Z)().get(e);return void 0===t?t:{type:"sequential",...t}}if("categorical"===t){const t=(0,Zo.Z)().get(e);return void 0===t?t:{type:"categorical",...t}}return(0,Fo.kt)({name:e,type:t})})).setCategoricalColorScaleResolver((({name:e,namespace:t}={})=>Io.getScale(e,t)));const No=new n.Z({category:(0,l.t)("Ranking"),credits:["https://github.com/jasondavies/d3-cloud"],description:(0,l.t)("Visualizes the words in a column that appear the most often. Bigger font corresponds to higher frequency."),exampleGallery:[{url:Ro},{url:Po}],name:(0,l.t)("Word Cloud"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Categorical"),(0,l.t)("Comparison"),(0,l.t)("Description"),(0,l.t)("Density"),(0,l.t)("Single Metric")],thumbnail:Ao});class Oo extends s.Z{constructor(){super({buildQuery:ko,loadChart:()=>Promise.all([o.e(1216),o.e(6377),o.e(444)]).then(o.bind(o,70487)),metadata:No,transformProps:To,controlPanel:Lo})}}var Bo=o(16372);function zo(e){const{width:t,height:o,formData:r,queriesData:a}=e,{maxBubbleSize:i,showBubbles:n,linearColorScheme:l,colorPicker:s}=r,{r:c,g:d,b:u}=s;return{data:a[0].data,width:t,height:o,maxBubbleSize:parseInt(i,10),showBubbles:n,linearColorScheme:l,color:(0,Bo.B8)(c,d,u).hex()}}var Vo=o(67253),qo=o(89424),$o=o(89025);const Wo={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["entity"],[{name:"country_fieldtype",config:{type:"SelectControl",label:(0,l.t)("Country Field Type"),default:"cca2",choices:[["name","Full name"],["cioc","code International Olympic Committee (cioc)"],["cca2","code ISO 3166-1 alpha-2 (cca2)"],["cca3","code ISO 3166-1 alpha-3 (cca3)"]],description:(0,l.t)("The country code standard that Superset should expect to find in the [country] column")}}],["metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"show_bubbles",config:{type:"CheckboxControl",label:(0,l.t)("Show Bubbles"),default:!1,renderTrigger:!0,description:(0,l.t)("Whether to display bubbles on top of countries")}}],["secondary_metric"],[{name:"max_bubble_size",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Max Bubble Size"),default:"25",choices:(0,g.m)(["5","10","15","25","50","75","100"])}}],["color_picker"],["linear_color_scheme"]]}],controlOverrides:{entity:{label:(0,l.t)("Country Column"),description:(0,l.t)("3 letter code of the country")},metric:{label:(0,l.t)("Metric for Color"),description:(0,l.t)("Metric that defines the color of the country")},secondary_metric:{label:(0,l.t)("Bubble Size"),description:(0,l.t)("Metric that defines the size of the bubble")},color_picker:{label:(0,l.t)("Bubble Color")},linear_color_scheme:{label:(0,l.t)("Country Color Scheme")}}},jo=new n.Z({category:(0,l.t)("Map"),credits:["http://datamaps.github.io/"],description:(0,l.t)("A map of the world, that can indicate values in different countries."),exampleGallery:[{url:qo},{url:$o}],name:(0,l.t)("World Map"),tags:[(0,l.t)("2D"),(0,l.t)("Aesthetic"),(0,l.t)("Comparison"),(0,l.t)("Intensity"),(0,l.t)("Legacy"),(0,l.t)("Multi-Dimensions"),(0,l.t)("Multi-Layers"),(0,l.t)("Multi-Variables"),(0,l.t)("Scatter"),(0,l.t)("Popular")],thumbnail:Vo,useLegacyApi:!0});class Go extends s.Z{constructor(){super({loadChart:()=>o.e(1020).then(o.bind(o,71020)),metadata:jo,transformProps:zo,controlPanel:Wo})}}var Yo=o(83937),Jo=o(872);function Ho(e){if(null==e||!e.trim())return null;const t=e.split(",");if(t.some((e=>(0,Jo.Z)(e))))throw new Error("All values should be numeric");return t.map((e=>parseFloat(e)))}function Qo(e){return null!=e&&e.trim()?e.split(",").map((e=>e.trim())):null}var Uo=o(80221);const Xo=()=>{},Ko=(e,t)=>{let o;const{metrics:r=[]}=e||{};return r.forEach((e=>{e.d3format&&e.metric_name===t&&(o=e.d3format)})),o};function er(e){const{width:t,height:o,annotationData:r,datasource:a,formData:i,hooks:n,queriesData:l}=e,{onAddFilter:s=Xo,onError:c=Xo}=n,{annotationLayers:d,barStacked:u,bottomMargin:m,colorPicker:p,colorScheme:g,comparisonType:h,contribution:f,donut:b,entity:y,labelsOutside:x,leftMargin:v,lineInterpolation:_,maxBubbleSize:w,metric:C,metric2:S,metrics:T=[],orderBars:k,pieLabelType:A,reduceXTicks:R,richTooltip:P,sendTimeRange:L,showBarValue:E,showBrush:F,showControls:M,showLabels:D,showLegend:Z,showMarkers:I,size:N,stackedStyle:O,vizType:B,x:z,xAxisFormat:V,xAxisLabel:q,xAxisShowminmax:$,xLogScale:W,xTicksLayout:j,y:G,yAxisBounds:Y,yAxis2Bounds:J,yAxisLabel:H,yAxisShowminmax:Q,yAxis2Showminmax:U,yLogScale:X}=i;let{markerLabels:K,markerLines:ee,markerLineLabels:te,markers:oe,numberFormat:re,rangeLabels:ae,ranges:ie,yAxisFormat:ne,yAxis2Format:le}=i;const se=l[0].data||[],ce=Array.isArray(se)?se.map((e=>({...e,key:(0,Uo.N4)(e.key,a.verboseMap)}))):se;return"pie"===B?re=re||Ko(a,C):"dual_line"===B?(ne=ne||Ko(a,C),le=le||Ko(a,S)):["line","dist_bar","bar","area"].includes(e.formData.vizType)?ne=ne||Ko(a,T.length>0?T[0]:void 0):"bullet"===B&&(ie=Ho(ie)||[0,1.1*ce.measures],ae=Qo(ae),K=Qo(K),ee=Ho(ee),te=Qo(te),oe=Ho(oe)),{width:t,height:o,data:ce,annotationData:r,annotationLayers:d,areaStackedStyle:O,baseColor:p,bottomMargin:m,colorScheme:g,comparisonType:h,contribution:f,entity:y,isBarStacked:u,isDonut:b,isPieLabelOutside:x,leftMargin:v,lineInterpolation:_,markerLabels:K,markerLines:ee,markerLineLabels:te,markers:oe,maxBubbleSize:parseInt(w,10),numberFormat:re,onBrushEnd:(0,Yo.Z)(L)?e=>{s("__time_range",e,!1,!0)}:void 0,onError:c,orderBars:k,pieLabelType:A,rangeLabels:ae,ranges:ie,reduceXTicks:R,showBarValue:E,showBrush:F,showControls:M,showLabels:D,showLegend:Z,showMarkers:I,sizeField:N,useRichTooltip:P,vizType:B,xAxisFormat:V,xAxisLabel:q,xAxisShowMinMax:$,xField:z,xIsLogScale:W,xTicksLayout:j,yAxisFormat:ne,yAxis2Format:le,yAxisBounds:Y,yAxis2Bounds:J,yAxisLabel:H,yAxisShowMinMax:Q,yAxis2ShowMinMax:U,yField:G,yIsLogScale:X}}var tr=o(22431),or=o(48654),rr=o(48402),ar=o(62881),ir=o(81008),nr=o(95963);const lr={name:"y_axis_2_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Right Axis Format"),default:"SMART_NUMBER",choices:h.F6,description:h.YD}},sr={name:"show_markers",config:{type:"CheckboxControl",label:(0,l.t)("Show Markers"),renderTrigger:!0,default:!1,description:(0,l.t)("Show data points as circle markers on the lines")}},cr={name:"left_margin",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Left Margin"),choices:(0,g.m)(["auto",50,75,100,125,150,200]),default:"auto",renderTrigger:!0,description:(0,l.t)("Left margin, in pixels, allowing for more room for axis labels")}},dr={name:"y_axis_showminmax",config:{type:"CheckboxControl",label:(0,l.t)("Y bounds"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the min and max values of the Y-axis")}},ur={name:"y_axis_2_showminmax",config:{type:"CheckboxControl",label:(0,l.t)("Y 2 bounds"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the min and max values of the Y-axis")}},mr={name:"line_interpolation",config:{type:"SelectControl",label:(0,l.t)("Line Style"),renderTrigger:!0,choices:(0,g.m)(["linear","basis","cardinal","monotone","step-before","step-after"]),default:"linear",description:(0,l.t)("Line interpolation as defined by d3.js")}},pr={name:"show_brush",config:{type:"SelectControl",label:(0,l.t)("Show Range Filter"),renderTrigger:!0,clearable:!1,default:"auto",choices:[["yes","Yes"],["no","No"],["auto","Auto"]],description:(0,l.t)("Whether to display the time range interactive selector")}},gr={name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Legend"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the legend (toggles)")}},hr={name:"show_controls",config:{type:"CheckboxControl",label:(0,l.t)("Extra Controls"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to show extra controls or not. Extra controls include things like making mulitBar charts stacked or side by side.")}},fr={name:"x_axis_label",config:{type:"TextControl",label:(0,l.t)("X Axis Label"),renderTrigger:!0,default:""}},br={name:"bottom_margin",config:{type:"SelectControl",clearable:!1,freeForm:!0,label:(0,l.t)("Bottom Margin"),choices:(0,g.m)(["auto",50,75,100,125,150,200]),default:"auto",renderTrigger:!0,description:(0,l.t)("Bottom margin, in pixels, allowing for more room for axis labels")}},yr={name:"x_ticks_layout",config:{type:"SelectControl",label:(0,l.t)("X Tick Layout"),choices:(0,g.m)(["auto","flat","45°","staggered"]),default:"auto",clearable:!1,renderTrigger:!0,description:(0,l.t)("The way the ticks are laid out on the X-axis")}},xr={name:"x_axis_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("X Axis Format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}},vr={name:"y_log_scale",config:{type:"CheckboxControl",label:(0,l.t)("Y Log Scale"),default:!1,renderTrigger:!0,description:(0,l.t)("Use a log scale for the Y-axis")}},_r={name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:[null,null],description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent.")}},wr={name:"y_axis_2_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis 2 Bounds"),renderTrigger:!0,default:[null,null],description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent.")}},Cr={name:"x_axis_showminmax",config:{type:"CheckboxControl",label:(0,l.t)("X bounds"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the min and max values of the X-axis")}},Sr={name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,l.t)("Rich Tooltip"),renderTrigger:!0,default:!0,description:(0,l.t)("The rich tooltip shows a list of all series for that point in time")}},Tr={name:"show_bar_value",config:{type:"CheckboxControl",label:(0,l.t)("Bar Values"),default:!1,renderTrigger:!0,description:(0,l.t)("Show the value on top of the bar")}},kr={name:"bar_stacked",config:{type:"CheckboxControl",label:(0,l.t)("Stacked Bars"),renderTrigger:!0,default:!1,description:null}},Ar={name:"reduce_x_ticks",config:{type:"CheckboxControl",label:(0,l.t)("Reduce X ticks"),renderTrigger:!0,default:!1,description:(0,l.t)("Reduces the number of X-axis ticks to be rendered. If true, the x-axis will not overflow and labels may be missing. If false, a minimum width will be applied to columns and the width may overflow into an horizontal scroll.")}},Rr={name:"y_axis_label",config:{type:"TextControl",label:(0,l.t)("Y Axis Label"),renderTrigger:!0,default:""}},Pr=[{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit"],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}],[{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,l.t)("Advanced Analytics"),tabOverride:"data",description:(0,l.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Rolling Window"))],[{name:"rolling_type",config:{type:"SelectControl",label:(0,l.t)("Rolling Function"),default:"None",choices:(0,g.m)(["None","mean","sum","std","cumsum"]),description:(0,l.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,l.t)("Periods"),isInt:!0,description:(0,l.t)("Defines the size of the rolling window function, relative to the time granularity selected")}}],[{name:"min_periods",config:{type:"TextControl",label:(0,l.t)("Min Periods"),isInt:!0,description:(0,l.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Time Comparison"))],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,l.t)("Time Shift"),choices:(0,g.m)(["1 day","1 week","28 days","30 days","52 weeks","1 year","104 weeks","2 years","156 weeks","3 years"]),description:(0,l.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example:  24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}}],[{name:"comparison_type",config:{type:"SelectControl",label:(0,l.t)("Calculation type"),default:"values",choices:[["values","Actual Values"],["absolute","Difference"],["percentage","Percentage change"],["ratio","Ratio"]],description:(0,l.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Python Functions"))],[(0,N.tZ)("h2",{className:"section-header"},"pandas.resample")],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Rule"),default:null,choices:(0,g.m)(["1T","1H","1D","7D","1M","1AS"]),description:(0,l.t)("Pandas resample rule")}}],[{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Method"),default:null,choices:(0,g.m)(["asfreq","bfill","ffill","median","mean","sum"]),description:(0,l.t)("Pandas resample method")}}]]}],Lr={controlPanelSections:[p.sections.legacyTimeseriesTime,Pr[0],{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[pr,gr],[mr,{name:"stacked_style",config:{type:"SelectControl",label:(0,l.t)("Stacked Style"),renderTrigger:!0,choices:[["stack","stack"],["stream","stream"],["expand","expand"]],default:"stack",description:""}}],["color_scheme"],[Sr,hr]]},{label:(0,l.t)("X Axis"),tabOverride:"customize",expanded:!0,controlSetRows:[[fr,br],[yr,xr],[Cr,null]]},{label:(0,l.t)("Y Axis"),tabOverride:"customize",expanded:!0,controlSetRows:[["y_axis_format",_r],[vr,null]]},Pr[1],p.sections.annotations]},Er=new n.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("A time series chart that visualizes how a related metric from multiple groups vary over time. Each group is visualized using a different color."),exampleGallery:[{url:tr,caption:(0,l.t)("Stretched style")},{url:or,caption:(0,l.t)("Stacked style")},{url:rr,caption:(0,l.t)("Video game consoles")},{url:ar,caption:(0,l.t)("Vehicle Types")}],name:(0,l.t)("Area Chart"),supportedAnnotationTypes:[nr.DT.INTERVAL,nr.DT.EVENT],tags:[(0,l.t)("Aesthetic"),(0,l.t)("Comparison"),(0,l.t)("Continuous"),(0,l.t)("Legacy"),(0,l.t)("Line"),(0,l.t)("Percentages"),(0,l.t)("Proportional"),(0,l.t)("Stacked"),(0,l.t)("Time"),(0,l.t)("Trend"),(0,l.t)("nvd3"),(0,l.t)("Deprecated")],thumbnail:ir,useLegacyApi:!0});class Fr extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(4194)]).then(o.bind(o,44194)),metadata:Er,transformProps:er,controlPanel:Lr})}}var Mr=o(42598),Dr=o(78248),Zr=o(62016),Ir=o(59500);const Nr={controlPanelSections:[p.sections.legacyTimeseriesTime,Pr[0],{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[pr],[gr],[Tr],[Sr],[kr],[mr],[hr],[br]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[fr],[br],[yr],[xr],[Cr],[Ar]]},{label:(0,l.t)("Y Axis"),expanded:!0,controlSetRows:[[Rr],[cr],[dr],[vr],["y_axis_format"],[_r]]},Pr[1],p.sections.annotations]},Or=new n.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("Visualize how a metric changes over time using bars. Add a group by column to visualize group level metrics and how they change over time."),exampleGallery:[{url:Dr},{url:Zr},{url:Ir}],name:(0,l.t)("Time-series Bar Chart"),supportedAnnotationTypes:[nr.DT.INTERVAL,nr.DT.EVENT],tags:[(0,l.t)("Bar"),(0,l.t)("Time"),(0,l.t)("Trend"),(0,l.t)("Stacked"),(0,l.t)("Vertical"),(0,l.t)("Percentages"),(0,l.t)("Proportional"),(0,l.t)("Advanced-Analytics"),(0,l.t)("nvd3")],thumbnail:Mr,useLegacyApi:!0});class Br extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(4194)]).then(o.bind(o,44194)),metadata:Or,transformProps:er,controlPanel:Nr})}}var zr=o(28942);const Vr={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["series"],["entity"],["x"],["y"],["adhoc_filters"],["size"],[{name:"max_bubble_size",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Max Bubble Size"),default:"25",choices:(0,g.m)(["5","10","15","25","50","75","100"])}}],["limit",null]]},{label:(0,l.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["color_scheme"],[gr,null]]},{label:(0,l.t)("X Axis"),expanded:!0,tabOverride:"customize",controlSetRows:[[fr,cr],[{name:xr.name,config:{...xr.config,default:"SMART_NUMBER",choices:h.F6}},yr],[{name:"x_log_scale",config:{type:"CheckboxControl",label:(0,l.t)("X Log Scale"),default:!1,renderTrigger:!0,description:(0,l.t)("Use a log scale for the X-axis")}},Cr]]},{label:(0,l.t)("Y Axis"),expanded:!0,tabOverride:"customize",controlSetRows:[[Rr,br],["y_axis_format",null],[vr,dr],[_r]]}],controlOverrides:{color_scheme:{renderTrigger:!1}}},qr=new n.Z({category:(0,l.t)("Correlation"),credits:["http://nvd3.org"],description:(0,l.t)("Visualizes a metric across three dimensions of data in a single chart (X axis, Y axis, and bubble size). Bubbles from the same group can be showcased using bubble color."),name:(0,l.t)("Bubble Chart"),tags:[(0,l.t)("Multi-Dimensions"),(0,l.t)("Aesthetic"),(0,l.t)("Comparison"),(0,l.t)("Legacy"),(0,l.t)("Scatter"),(0,l.t)("Time"),(0,l.t)("Trend"),(0,l.t)("nvd3")],thumbnail:zr,useLegacyApi:!0});class $r extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(4194)]).then(o.bind(o,44194)),metadata:qr,transformProps:er,controlPanel:Vr})}}var Wr=o(65159);const jr={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[{name:"ranges",config:{type:"TextControl",label:(0,l.t)("Ranges"),default:"",description:(0,l.t)("Ranges to highlight with shading")}},{name:"range_labels",config:{type:"TextControl",label:(0,l.t)("Range labels"),default:"",description:(0,l.t)("Labels for the ranges")}}],[{name:"markers",config:{type:"TextControl",label:(0,l.t)("Markers"),default:"",description:(0,l.t)("List of values to mark with triangles")}},{name:"marker_labels",config:{type:"TextControl",label:(0,l.t)("Marker labels"),default:"",description:(0,l.t)("Labels for the markers")}}],[{name:"marker_lines",config:{type:"TextControl",label:(0,l.t)("Marker lines"),default:"",description:(0,l.t)("List of values to mark with lines")}},{name:"marker_line_labels",config:{type:"TextControl",label:(0,l.t)("Marker line labels"),default:"",description:(0,l.t)("Labels for the marker lines")}}]]}]},Gr=new n.Z({category:(0,l.t)("KPI"),credits:["http://nvd3.org"],description:(0,l.t)("Showcases the progress of a single metric against a given target. The higher the fill, the closer the metric is to the target."),name:(0,l.t)("Bullet Chart"),tags:[(0,l.t)("Business"),(0,l.t)("Legacy"),(0,l.t)("Report"),(0,l.t)("nvd3")],thumbnail:Wr,useLegacyApi:!0});class Yr extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(4194)]).then(o.bind(o,44194)),metadata:Gr,transformProps:er,controlPanel:jr})}}var Jr=o(2739);const Hr={controlPanelSections:[p.sections.legacyTimeseriesTime,Pr[0],{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[fr,br],[yr,xr],[Cr,null]]},{label:(0,l.t)("Y Axis"),expanded:!0,controlSetRows:[[Rr,cr],[dr,vr],["y_axis_format",_r]]},Pr[1],p.sections.annotations]},Qr=new n.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("Visualizes many different time-series objects in a single chart. This chart is being deprecated and we recommend using the Time-series Chart instead."),name:(0,l.t)("Time-series Percent Change"),tags:[(0,l.t)("Legacy"),(0,l.t)("Time"),(0,l.t)("nvd3"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Comparison"),(0,l.t)("Line"),(0,l.t)("Percentages"),(0,l.t)("Predictive"),(0,l.t)("Trend")],thumbnail:Jr,useLegacyApi:!0});class Ur extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(4194)]).then(o.bind(o,44194)),metadata:Qr,transformProps:er,controlPanel:Hr})}}var Xr=o(28584),Kr=o(48955),ea=o(50828),ta=o(26767);const oa={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["columns"],["row_limit"],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}],[{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[gr],[Tr],[Sr],[kr],[{name:"order_bars",config:{type:"CheckboxControl",label:(0,l.t)("Sort Bars"),default:!1,renderTrigger:!0,description:(0,l.t)("Sort bars by x labels.")}}],["y_axis_format"],[Rr],[hr,null],[dr],[_r]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[fr],[br],[yr],[Ar]]}],controlOverrides:{groupby:{label:(0,l.t)("Series"),validators:[C.Z],mapStateToProps:(e,t)=>{const o=(null==jt.Hq.groupby.mapStateToProps?void 0:jt.Hq.groupby.mapStateToProps(e,t))||{};return o.canDropValue=t=>{var o,r;return!(0,$t.Z)(null==(o=e.controls)||null==(r=o.columns)?void 0:r.value).includes(t.column_name)},o},rerender:["columns"]},columns:{label:(0,l.t)("Breakdowns"),description:(0,l.t)("Defines how each series is broken down"),mapStateToProps:(e,t)=>{const o=(null==jt.Hq.columns.mapStateToProps?void 0:jt.Hq.columns.mapStateToProps(e,t))||{};return o.canDropValue=t=>{var o,r;return!(0,$t.Z)(null==(o=e.controls)||null==(r=o.groupby)?void 0:r.value).includes(t.column_name)},o},rerender:["groupby"]}}},ra=oa,aa=new n.Z({category:(0,l.t)("Ranking"),credits:["http://nvd3.org"],description:(0,l.t)("Compares metrics from different categories using bars. Bar lengths are used to indicate the magnitude of each value and color is used to differentiate groups."),exampleGallery:[{url:Kr,caption:"Stacked style"},{url:ea,caption:"Grouped style"},{url:ta}],name:(0,l.t)("Bar Chart"),tags:[(0,l.t)("Additive"),(0,l.t)("Bar"),(0,l.t)("Categorical"),(0,l.t)("Comparison"),(0,l.t)("Discrete"),(0,l.t)("Legacy"),(0,l.t)("Percentages"),(0,l.t)("Popular"),(0,l.t)("Stacked"),(0,l.t)("Vertical"),(0,l.t)("nvd3")],thumbnail:Xr,useLegacyApi:!0});class ia extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(4194)]).then(o.bind(o,44194)),metadata:aa,transformProps:er,controlPanel:ra})}}var na=o(7661);const la={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[gr],[xr]]},{label:(0,l.t)("Y Axis 1"),expanded:!0,controlSetRows:[["metric"],["y_axis_format"],[dr],[_r]]},{label:(0,l.t)("Y Axis 2"),expanded:!0,controlSetRows:[["metric_2"],[lr],[ur],[wr]]},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["adhoc_filters"]]},p.sections.annotations],controlOverrides:{metric:{label:(0,l.t)("Left Axis Metric"),description:(0,l.t)("Choose a metric for left axis")},y_axis_format:{label:(0,l.t)("Left Axis Format")}}},sa=new n.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("Visualizes 2 metrics as line plots using the same x-axis. This chart is useful for comparing metrics across the same time range."),name:(0,l.t)("Dual Line Chart"),tags:[(0,l.t)("Legacy"),(0,l.t)("nvd3")],thumbnail:na,useLegacyApi:!0});class ca extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(4194)]).then(o.bind(o,44194)),metadata:sa,transformProps:er,controlPanel:la})}}var da=o(75060),ua=o(81368),ma=o(27692),pa=o(61029);const ga={controlPanelSections:[p.sections.legacyTimeseriesTime,Pr[0],{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[pr],[{name:"send_time_range",config:{type:"CheckboxControl",label:(0,l.t)("Propagate"),renderTrigger:!0,default:!1,description:(0,l.t)("Send range filter events to other charts")}}],[gr],[Sr],[sr],[mr]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[fr],[br],[yr],[xr],[Cr,null]]},{label:(0,l.t)("Y Axis"),expanded:!0,controlSetRows:[[Rr],[cr],[dr],[vr],["y_axis_format"],[_r]]},Pr[1],p.sections.annotations],controlOverrides:{row_limit:{default:5e4}}},ha=new n.Z({canBeAnnotationTypes:[nr.DT.TIME_SERIES],category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("Classic chart that visualizes how metrics change over time."),exampleGallery:[{url:da},{url:ua},{url:ma,caption:(0,l.t)("Battery level over time")}],name:(0,l.t)("Line Chart"),supportedAnnotationTypes:[nr.DT.TIME_SERIES,nr.DT.INTERVAL,nr.DT.EVENT,nr.DT.FORMULA],tags:[(0,l.t)("Aesthetic"),(0,l.t)("Legacy"),(0,l.t)("nvd3"),(0,l.t)("Deprecated")],thumbnail:pa,useLegacyApi:!0});class fa extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(4194)]).then(o.bind(o,44194)),metadata:ha,transformProps:er,controlPanel:ga})}}var ba=o(15678);const ya={controlPanelSections:[{...p.sections.legacyRegularTime,controlSetRows:[["time_range"]]},{label:(0,l.t)("Chart Options"),tabOverride:"customize",expanded:!0,controlSetRows:[["color_scheme"],[{name:"prefix_metric_with_slice_name",config:{type:"CheckboxControl",label:(0,l.t)("Prefix metric name with slice name"),default:!1,renderTrigger:!0}},null],[gr],[sr],[mr,null]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[fr],[br],[yr],[xr],[Cr,null]]},{label:(0,l.t)("Y Axis Left"),expanded:!0,controlSetRows:[[{name:"line_charts",config:{type:"SelectAsyncControl",multi:!0,label:(0,l.t)("Left Axis chart(s)"),validators:[C.Z],default:[],description:(0,l.t)("Choose one or more charts for left axis"),dataEndpoint:"/sliceasync/api/read?_flt_0_viz_type=line&_flt_7_viz_type=line_multi",placeholder:(0,l.t)("Select charts"),onAsyncErrorMessage:(0,l.t)("Error while fetching charts"),mutator:e=>e&&e.result?e.result.map((e=>({value:e.id,label:e.slice_name}))):[]}}],["y_axis_format"],[dr],[_r]]},{label:(0,l.t)("Y Axis Right"),expanded:!1,controlSetRows:[[{name:"line_charts_2",config:{type:"SelectAsyncControl",multi:!0,label:(0,l.t)("Right Axis chart(s)"),validators:[],default:[],description:(0,l.t)("Choose one or more charts for right axis"),dataEndpoint:"/sliceasync/api/read?_flt_0_viz_type=line&_flt_7_viz_type=line_multi",placeholder:(0,l.t)("Select charts"),onAsyncErrorMessage:(0,l.t)("Error while fetching charts"),mutator:e=>e&&e.result?e.result.map((e=>({value:e.id,label:e.slice_name}))):[]}}],[lr],[ur],[wr]]},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["adhoc_filters"]]},p.sections.annotations],controlOverrides:{y_axis_format:{label:(0,l.t)("Left Axis Format")}}},xa=new n.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("Visualize two different time series using the same x-axis time range. This chart is being deprecated and we recommend using the Mixed Timeseries Chart instead!"),name:(0,l.t)("Multiple Line Charts"),tags:[(0,l.t)("Multi-Variables"),(0,l.t)("Legacy"),(0,l.t)("nvd3"),(0,l.t)("Comparison"),(0,l.t)("Time"),(0,l.t)("Multi-Layers"),(0,l.t)("Deprecated")],thumbnail:ba,useLegacyApi:!0});class va extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(4194)]).then(o.bind(o,44194)),metadata:xa,transformProps:er,controlPanel:ya})}}var _a=o(97373);const wa={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"],[{name:"freq",config:{type:"SelectControl",label:(0,l.t)("Frequency"),default:"W-MON",freeForm:!0,clearable:!1,choices:[["AS","Year (freq=AS)"],["52W-MON","52 weeks starting Monday (freq=52W-MON)"],["W-SUN","1 week starting Sunday (freq=W-SUN)"],["W-MON","1 week starting Monday (freq=W-MON)"],["D","Day (freq=D)"],["4W-MON","4 weeks (freq=4W-MON)"]],description:(0,l.t)('The periodicity over which to pivot time. Users can provide\n            "Pandas" offset alias.\n            Click on the info bubble for more details on accepted "freq" expressions.'),tooltipOnClick:()=>{window.open("https://pandas.pydata.org/pandas-docs/stable/timeseries.html#offset-aliases")}}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[gr],[mr],["color_picker",null]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[fr],[br],[Cr],[{name:xr.name,config:{...xr.config,default:"SMART_NUMBER",choices:h.F6}}]]},{label:(0,l.t)("Y Axis"),expanded:!0,controlSetRows:[[Rr],[cr],[dr],[vr],["y_axis_format"],[_r]]}],controlOverrides:{metric:{clearable:!1}}},Ca=new n.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:"",name:(0,l.t)("Time-series Period Pivot"),tags:[(0,l.t)("Legacy"),(0,l.t)("Time"),(0,l.t)("nvd3")],thumbnail:_a,useLegacyApi:!0});class Sa extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(4194)]).then(o.bind(o,44194)),metadata:Ca,transformProps:er,controlPanel:wa})}}var Ta=o(57666);const ka=()=>{};function Aa(e){const{datasource:t,height:o,hooks:r,queriesData:a,rawFormData:i,width:n}=e,{onAddFilter:l=ka,setControlValue:s=ka}=r;return{datasource:t,formData:i,height:o,onAddFilter:l,payload:a[0],setControlValue:s,viewport:{...i.viewport,height:o,width:n},width:n}}function Ra(e){return e&&e.columns?e.columns.map((e=>[e.column_name,e.verbose_name||e.column_name])).sort(((e,t)=>e[1].toLowerCase()>t[1].toLowerCase()?1:-1)):[]}const Pa=[["SMART_NUMBER","Adaptative formating"],["~g","Original value"],[",d",",d (12345.432 => 12,345)"],[".1s",".1s (12345.432 => 10k)"],[".3s",".3s (12345.432 => 12.3k)"],[",.1%",",.1% (12345.432 => 1,234,543.2%)"],[".3%",".3% (12345.432 => 1234543.200%)"],[".4r",".4r (12345.432 => 12350)"],[",.3f",",.3f (12345.432 => 12,345.432)"],["+,","+, (12345.432 => +12,345.432)"],["$,.2f","$,.2f (12345.432 => $12,345.43)"],["DURATION","Duration in ms (66000 => 1m 6s)"],["DURATION_SUB","Duration in ms (100.40008 => 100ms 400µs 80ns)"]],La={r:0,g:122,b:135,a:1},Ea={default:null,mapStateToProps:e=>({choices:e.datasource?e.datasource.time_grain_sqla.filter((e=>null!==e[0])):null})};function Fa(e){return e.map((e=>[e,e.toString()]))}o(15306),o(19755);const Ma=(0,N.tZ)("div",null,(0,l.t)("For more information about objects are in context in the scope of this function, refer to the"),(0,N.tZ)("a",{href:"https://github.com/apache/incubator-superset/blob/master/superset-frontend/src/modules/sandbox.js"},(0,l.t)(" source code of Superset's sandboxed parser"),"."),".");function Da(e,t,o=null,r=100,a=""){return{type:"TextAreaControl",language:"javascript",label:e,description:t,height:r,default:a,aboveEditorSection:(0,N.tZ)("div",null,(0,N.tZ)("p",null,t),(0,N.tZ)("p",null,Ma),o),mapStateToProps:e=>({warning:e.common.conf.ENABLE_JAVASCRIPT_CONTROLS?null:(0,l.t)("This functionality is disabled in your environment for security reasons."),readOnly:!e.common.conf.ENABLE_JAVASCRIPT_CONTROLS})}}const Za={name:"filter_nulls",config:{type:"CheckboxControl",label:(0,l.t)("Ignore null locations"),default:!0,description:(0,l.t)("Whether to ignore locations that are null")}},Ia={name:"autozoom",config:{type:"CheckboxControl",label:(0,l.t)("Auto Zoom"),default:!0,renderTrigger:!0,description:(0,l.t)("When checked, the map will zoom to your data after each query")}},Na="dimension",Oa={...jt.Hq.groupby,label:(0,l.t)("Dimension"),description:(0,l.t)("Select a dimension"),multi:!1,default:null},Ba={name:"js_columns",config:{...jt.Hq.groupby,label:(0,l.t)("Extra data for JS"),default:[],description:(0,l.t)("List of extra columns made available in Javascript functions")}},za={name:"js_data_mutator",config:Da((0,l.t)("Javascript data interceptor"),(0,l.t)("Define a javascript function that receives the data array used in the visualization and is expected to return a modified version of that array. This can be used to alter properties of the data, filter, or enrich the array."))},Va={name:"js_tooltip",config:Da((0,l.t)("Javascript tooltip generator"),(0,l.t)("Define a function that receives the input and outputs the content for a tooltip"))},qa={name:"js_onclick_href",config:Da((0,l.t)("Javascript onClick href"),(0,l.t)("Define a function that returns a URL to navigate to when user clicks"))},$a={name:"legend_format",config:{label:(0,l.t)("Legend Format"),description:(0,l.t)("Choose the format for legend values"),type:"SelectControl",clearable:!1,default:Pa[0],choices:Pa,renderTrigger:!0}},Wa={name:"legend_position",config:{label:(0,l.t)("Legend Position"),description:(0,l.t)("Choose the position of the legend"),type:"SelectControl",clearable:!1,default:"tr",choices:[[null,"None"],["tl","Top left"],["tr","Top right"],["bl","Bottom left"],["br","Bottom right"]],renderTrigger:!0}},ja={name:"line_column",config:{type:"SelectControl",label:(0,l.t)("Lines column"),default:null,description:(0,l.t)("The database columns that contains lines information"),mapStateToProps:e=>({choices:Ra(e.datasource)}),validators:[C.Z]}},Ga={name:"line_width",config:{type:"TextControl",label:(0,l.t)("Line width"),renderTrigger:!0,isInt:!0,default:10,description:(0,l.t)("The width of the lines")}},Ya={name:"fill_color_picker",config:{label:(0,l.t)("Fill Color"),description:(0,l.t)(" Set the opacity to 0 if you do not want to override the color specified in the GeoJSON"),type:"ColorPickerControl",default:La,renderTrigger:!0}},Ja={name:"stroke_color_picker",config:{label:(0,l.t)("Stroke Color"),description:(0,l.t)(" Set the opacity to 0 if you do not want to override the color specified in the GeoJSON"),type:"ColorPickerControl",default:La,renderTrigger:!0}},Ha={name:"filled",config:{type:"CheckboxControl",label:(0,l.t)("Filled"),renderTrigger:!0,description:(0,l.t)("Whether to fill the objects"),default:!0}},Qa={name:"stroked",config:{type:"CheckboxControl",label:(0,l.t)("Stroked"),renderTrigger:!0,description:(0,l.t)("Whether to display the stroke"),default:!1}},Ua={name:"extruded",config:{type:"CheckboxControl",label:(0,l.t)("Extruded"),renderTrigger:!0,default:!0,description:"Whether to make the grid 3D"}},Xa={name:"grid_size",config:{type:"TextControl",label:(0,l.t)("Grid Size"),renderTrigger:!0,default:20,isInt:!0,description:(0,l.t)("Defines the grid size in pixels")}},Ka={name:"viewport",config:{type:"ViewportControl",label:(0,l.t)("Viewport"),renderTrigger:!1,description:(0,l.t)("Parameters related to the view and perspective on the map"),default:{longitude:6.85236157047845,latitude:31.222656842808707,zoom:1,bearing:0,pitch:0},dontRefreshOnChange:!0}},ei={name:"spatial",config:{type:"SpatialControl",label:(0,l.t)("Longitude & Latitude"),validators:[C.Z],description:(0,l.t)("Point to your spatial columns"),mapStateToProps:e=>({choices:Ra(e.datasource)})}},ti={name:"point_radius_fixed",config:{type:"FixedOrMetricControl",label:(0,l.t)("Point Size"),default:{type:"fix",value:1e3},description:(0,l.t)("Fixed point radius"),mapStateToProps:e=>({datasource:e.datasource})}},oi={name:"multiplier",config:{type:"TextControl",label:(0,l.t)("Multiplier"),isFloat:!0,renderTrigger:!0,default:1,description:(0,l.t)("Factor to multiply the metric by")}},ri={name:"line_type",config:{type:"SelectControl",label:(0,l.t)("Lines encoding"),clearable:!1,default:"json",description:(0,l.t)("The encoding format of the lines"),choices:[["polyline","Polyline"],["json","JSON"],["geohash","geohash (square)"]]}},ai={name:"reverse_long_lat",config:{type:"CheckboxControl",label:(0,l.t)("Reverse Lat & Long"),default:!1}},ii={name:"mapbox_style",config:{type:"SelectControl",label:(0,l.t)("Map Style"),clearable:!1,renderTrigger:!0,choices:[["mapbox://styles/mapbox/streets-v9","Streets"],["mapbox://styles/mapbox/dark-v9","Dark"],["mapbox://styles/mapbox/light-v9","Light"],["mapbox://styles/mapbox/satellite-streets-v9","Satellite Streets"],["mapbox://styles/mapbox/satellite-v9","Satellite"],["mapbox://styles/mapbox/outdoors-v9","Outdoors"]],default:"mapbox://styles/mapbox/light-v9",description:(0,l.t)("Base layer map style")}},ni={name:"geojson",config:{type:"SelectControl",label:(0,l.t)("GeoJson Column"),validators:[C.Z],description:(0,l.t)("Select the geojson column"),mapStateToProps:e=>({choices:Ra(e.datasource)})}},li={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"start_spatial",config:{type:"SpatialControl",label:(0,l.t)("Start Longitude & Latitude"),validators:[C.Z],description:(0,l.t)("Point to your spatial columns"),mapStateToProps:e=>({choices:Ra(e.datasource)})}},{name:"end_spatial",config:{type:"SpatialControl",label:(0,l.t)("End Longitude & Latitude"),validators:[C.Z],description:(0,l.t)("Point to your spatial columns"),mapStateToProps:e=>({choices:Ra(e.datasource)})}}],["row_limit",Za],["adhoc_filters"]]},{label:(0,l.t)("Map"),controlSetRows:[[ii,Ka],[Ia,null]]},{label:(0,l.t)("Arc"),controlSetRows:[["color_picker",{name:"target_color_picker",config:{label:(0,l.t)("Target Color"),description:(0,l.t)("Color of the target location"),type:"ColorPickerControl",default:La,renderTrigger:!0}}],[{name:Na,config:{...Oa,label:(0,l.t)("Categorical Color"),description:(0,l.t)("Pick a dimension from which categorical colors are defined")}},"color_scheme"],[{name:"stroke_width",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Stroke Width"),validators:[m.Z],default:null,renderTrigger:!0,choices:Fa([1,2,3,4,5])}},Wa],[$a,null]]},{label:(0,l.t)("Advanced"),controlSetRows:[[Ba],[za],[Va],[qa]]}],controlOverrides:{size:{validators:[]},time_grain_sqla:Ea}},si=new n.Z({category:(0,l.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,l.t)("Plot the distance (like flight paths) between origin and destination."),name:(0,l.t)("deck.gl Arc"),thumbnail:Ta,useLegacyApi:!0,tags:[(0,l.t)("deckGL"),(0,l.t)("Geo"),(0,l.t)("3D"),(0,l.t)("Relational"),(0,l.t)("Web")]});class ci extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(5662),o.e(8924),o.e(56),o.e(2441),o.e(9322),o.e(789),o.e(1382),o.e(3867)]).then(o.bind(o,21382)),controlPanel:li,metadata:si,transformProps:Aa})}}var di=o(32014);const ui={name:"line_column",config:{...G.zo,label:(0,l.t)("Lines column"),description:(0,l.t)("The database columns that contains lines information")}},mi={name:"geojson",config:{...G.zo,label:(0,l.t)("GeoJson Column"),description:(0,l.t)("Select the geojson column")}},pi=(0,i.c)(i.T.ENABLE_EXPLORE_DRAG_AND_DROP)?mi:ni,gi={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[pi],["row_limit"],[Za],["adhoc_filters"]]},{label:(0,l.t)("Map"),controlSetRows:[[ii,Ka]]},{label:(0,l.t)("GeoJson Settings"),controlSetRows:[[Ya,Ja],[Ha,Qa],[Ua,null],[{name:"point_radius_scale",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Point Radius Scale"),validators:[m.Z],default:null,choices:Fa([0,100,200,300,500])}},null]]},{label:(0,l.t)("Advanced"),controlSetRows:[[Ba],[za],[Va],[qa]]}]},hi=new n.Z({category:(0,l.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,l.t)("The GeoJsonLayer takes in GeoJSON formatted data and renders it as interactive polygons, lines and points (circles, icons and/or texts)."),name:(0,l.t)("deck.gl Geojson"),thumbnail:di,useLegacyApi:!0,tags:[(0,l.t)("deckGL"),(0,l.t)("2D"),(0,l.t)("Aesthetic")]});class fi extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(5662),o.e(8924),o.e(56),o.e(5215),o.e(2112),o.e(1573),o.e(1497),o.e(3745)]).then(o.bind(o,3251)),controlPanel:gi,metadata:hi,transformProps:Aa})}}var bi=o(89411);const yi={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[ei],["size"],["row_limit"],[Za],["adhoc_filters"]]},{label:(0,l.t)("Map"),controlSetRows:[[ii,Ka],["color_picker",Ia],[Xa,Ua]]},{label:(0,l.t)("Advanced"),controlSetRows:[[Ba],[za],[Va],[qa]]}],controlOverrides:{size:{label:(0,l.t)("Height"),description:(0,l.t)("Metric used to control height"),validators:[C.Z]}}},xi=new n.Z({category:(0,l.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,l.t)("Visualize geospatial data like 3D buildings, landscapes, or objects in grid view."),name:(0,l.t)("deck.gl Grid"),thumbnail:bi,useLegacyApi:!0,tags:[(0,l.t)("deckGL"),(0,l.t)("3D"),(0,l.t)("Comparison"),(0,l.t)("Experimental")]});class vi extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(5662),o.e(8924),o.e(56),o.e(2441),o.e(9322),o.e(5215),o.e(347),o.e(3208),o.e(954),o.e(9396),o.e(789),o.e(5314)]).then(o.bind(o,94828)),controlPanel:yi,metadata:xi,transformProps:Aa})}}var _i=o(21508);const wi={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[ei],["size"],["row_limit"],[Za],["adhoc_filters"]]},{label:(0,l.t)("Map"),controlSetRows:[[ii,Ka],["color_picker"],[Ia],[Xa],[Ua],[{name:"js_agg_function",config:{type:"SelectControl",label:(0,l.t)("Dynamic Aggregation Function"),description:(0,l.t)("The function to use when aggregating points into groups"),default:"sum",clearable:!1,renderTrigger:!0,choices:Fa(["sum","min","max","mean","median","count","variance","deviation","p1","p5","p95","p99"])}}]]},{label:(0,l.t)("Advanced"),controlSetRows:[[Ba],[za],[Va],[qa]]}]},Ci=new n.Z({category:(0,l.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,l.t)("Overlays a hexagonal grid on a map, and aggregates data within the boundary of each cell."),name:(0,l.t)("deck.gl 3D Hexagon"),thumbnail:_i,useLegacyApi:!0,tags:[(0,l.t)("deckGL"),(0,l.t)("3D"),(0,l.t)("Geo"),(0,l.t)("Comparison"),(0,l.t)("Experimental")]});class Si extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(5662),o.e(8924),o.e(56),o.e(2441),o.e(9322),o.e(5215),o.e(347),o.e(954),o.e(789),o.e(9111)]).then(o.bind(o,33452)),controlPanel:wi,metadata:Ci,transformProps:Aa})}}var Ti=o(33353);const ki={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Map"),expanded:!0,controlSetRows:[[ii,Ka],[{name:"deck_slices",config:{type:"SelectAsyncControl",multi:!0,label:(0,l.t)("deck.gl charts"),validators:[C.Z],default:[],description:(0,l.t)("Pick a set of deck.gl charts to layer on top of one another"),dataEndpoint:"/sliceasync/api/read?_flt_0_viz_type=deck_&_flt_7_viz_type=deck_multi",placeholder:(0,l.t)("Select charts"),onAsyncErrorMessage:(0,l.t)("Error while fetching charts"),mutator:e=>e&&e.result?e.result.map((e=>({value:e.id,label:e.slice_name}))):[]}},null]]},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["adhoc_filters"]]}]},Ai=new n.Z({category:(0,l.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,l.t)("Compose multiple layers together to form complex visuals."),name:(0,l.t)("deck.gl Multiple Layers"),thumbnail:Ti,useLegacyApi:!0,tags:[(0,l.t)("deckGL"),(0,l.t)("Multi-Layers")]});class Ri extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(5662),o.e(8924),o.e(56),o.e(2441),o.e(4998),o.e(9322),o.e(5215),o.e(2112),o.e(347),o.e(3208),o.e(1573),o.e(954),o.e(1497),o.e(9396),o.e(789),o.e(1382),o.e(1221),o.e(8136)]).then(o.bind(o,81221)),controlPanel:ki,metadata:Ai,transformProps:Aa})}}var Pi=o(53448);const Li={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[(0,i.c)(i.T.ENABLE_EXPLORE_DRAG_AND_DROP)?ui:ja],[{...ri,config:{...ri.config,choices:[["polyline","Polyline"],["json","JSON"]]}}],["row_limit"],[Za],["adhoc_filters"]]},{label:(0,l.t)("Map"),expanded:!0,controlSetRows:[[ii,Ka],["color_picker",Ga],[ai,Ia]]},{label:(0,l.t)("Advanced"),controlSetRows:[[Ba],[za],[Va],[qa]]}]},Ei=new n.Z({category:(0,l.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,l.t)("Visualizes connected points, which form a path, on a map."),name:(0,l.t)("deck.gl Path"),thumbnail:Pi,useLegacyApi:!0,tags:[(0,l.t)("deckGL"),(0,l.t)("Web")]});class Fi extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(5662),o.e(8924),o.e(56),o.e(2441),o.e(9322),o.e(5215),o.e(2112),o.e(789),o.e(3129)]).then(o.bind(o,14228)),controlPanel:Li,metadata:Ei,transformProps:Aa})}}var Mi=o(24400);const Di=(0,i.c)(i.T.ENABLE_EXPLORE_DRAG_AND_DROP)?ui:ja,Zi={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{...Di,config:{...Di.config,label:(0,l.t)("Polygon Column")}}],[{...ri,config:{...ri.config,label:(0,l.t)("Polygon Encoding")}}],["adhoc_filters"],["metric"],[{...ti,config:{...ti.config,label:(0,l.t)("Elevation")}}],["row_limit"],[ai],[Za]]},{label:(0,l.t)("Map"),expanded:!0,controlSetRows:[[ii,Ka],[Ia,null]]},{label:(0,l.t)("Polygon Settings"),expanded:!0,controlSetRows:[[Ya,Ja],[Ha,Qa],[Ua,oi],[Ga,null],["linear_color_scheme",{name:"opacity",config:{type:"SliderControl",label:(0,l.t)("Opacity"),default:80,step:1,min:0,max:100,renderTrigger:!0,description:(0,l.t)("Opacity, expects values between 0 and 100")}}],[{name:"num_buckets",config:{type:"SelectControl",multi:!1,freeForm:!0,label:(0,l.t)("Number of buckets to group data"),default:5,choices:Fa([2,3,5,10]),description:(0,l.t)("How many buckets should the data be grouped in."),renderTrigger:!0}},{name:"break_points",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,l.t)("Bucket break points"),choices:Fa([]),description:(0,l.t)("List of n+1 values for bucketing metric into n buckets."),renderTrigger:!0}}],[{name:"table_filter",config:{type:"CheckboxControl",label:(0,l.t)("Emit Filter Events"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to apply filter when items are clicked")}},{name:"toggle_polygons",config:{type:"CheckboxControl",label:(0,l.t)("Multiple filtering"),renderTrigger:!0,default:!0,description:(0,l.t)("Allow sending multiple polygons as a filter event")}}],[Wa,$a]]},{label:(0,l.t)("Advanced"),controlSetRows:[[Ba],[za],[Va],[qa]]}],controlOverrides:{metric:{validators:[]},time_grain_sqla:Ea}},Ii=new n.Z({category:(0,l.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,l.t)("Visualizes geographic areas from your data as polygons on a Mapbox rendered map. Polygons can be colored using a metric."),name:(0,l.t)("deck.gl Polygon"),thumbnail:Mi,useLegacyApi:!0,tags:[(0,l.t)("deckGL"),(0,l.t)("3D"),(0,l.t)("Multi-Dimensions"),(0,l.t)("Geo"),(0,l.t)("Experimental")]});class Ni extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(5662),o.e(8924),o.e(56),o.e(2441),o.e(9322),o.e(5215),o.e(2112),o.e(1573),o.e(789),o.e(3183)]).then(o.bind(o,10357)),controlPanel:Zi,metadata:Ii,transformProps:Aa})}}var Oi=o(83566);const Bi={onInit:e=>({...e,time_grain_sqla:{...e.time_grain_sqla,value:null},granularity:{...e.granularity,value:null}}),controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[ei,null],["row_limit",Za],["adhoc_filters"]]},{label:(0,l.t)("Map"),expanded:!0,controlSetRows:[[ii,Ka],[Ia,null]]},{label:(0,l.t)("Point Size"),controlSetRows:[[ti],[{name:"point_unit",config:{type:"SelectControl",label:(0,l.t)("Point Unit"),default:"square_m",clearable:!1,choices:[["square_m","Square meters"],["square_km","Square kilometers"],["square_miles","Square miles"],["radius_m","Radius in meters"],["radius_km","Radius in kilometers"],["radius_miles","Radius in miles"]],description:(0,l.t)("The unit of measure for the specified point radius")}}],[{name:"min_radius",config:{type:"TextControl",label:(0,l.t)("Minimum Radius"),isFloat:!0,validators:[C.Z],renderTrigger:!0,default:2,description:(0,l.t)("Minimum radius size of the circle, in pixels. As the zoom level changes, this insures that the circle respects this minimum radius.")}},{name:"max_radius",config:{type:"TextControl",label:(0,l.t)("Maximum Radius"),isFloat:!0,validators:[C.Z],renderTrigger:!0,default:250,description:(0,l.t)("Maxium radius size of the circle, in pixels. As the zoom level changes, this insures that the circle respects this maximum radius.")}}],[oi,null]]},{label:(0,l.t)("Point Color"),controlSetRows:[["color_picker"],[Wa],[$a],[{name:Na,config:{...Oa,label:(0,l.t)("Categorical Color"),description:(0,l.t)("Pick a dimension from which categorical colors are defined")}}],["color_scheme"]]},{label:(0,l.t)("Advanced"),controlSetRows:[[Ba],[za],[Va],[qa]]}],controlOverrides:{size:{validators:[]},time_grain_sqla:Ea}},zi=new n.Z({category:(0,l.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,l.t)("A map that takes rendering circles with a variable radius at latitude/longitude coordinates"),name:(0,l.t)("deck.gl Scatterplot"),thumbnail:Oi,useLegacyApi:!0,tags:[(0,l.t)("deckGL"),(0,l.t)("Comparison"),(0,l.t)("Scatter"),(0,l.t)("2D"),(0,l.t)("Geo"),(0,l.t)("Intensity"),(0,l.t)("Density")]});class Vi extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(5662),o.e(8924),o.e(56),o.e(2441),o.e(9322),o.e(789),o.e(9411)]).then(o.bind(o,54448)),controlPanel:Bi,metadata:zi,transformProps:Aa})}}var qi=o(72203);const $i={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[ei],["size"],["row_limit"],[Za],["adhoc_filters"]]},{label:(0,l.t)("Map"),controlSetRows:[[ii,Ka],[Ia,null]]},{label:(0,l.t)("Grid"),expanded:!0,controlSetRows:[[Xa,"color_picker"]]},{label:(0,l.t)("Advanced"),controlSetRows:[[Ba],[za],[Va],[qa]]}],controlOverrides:{size:{label:(0,l.t)("Weight"),description:(0,l.t)("Metric used as a weight for the grid's coloring"),validators:[C.Z]},time_grain_sqla:Ea}},Wi=new n.Z({category:(0,l.t)("Map"),credits:["https://uber.github.io/deck.gl"],description:(0,l.t)("Aggregates data within the boundary of grid cells and maps the aggregated values to a dynamic color scale"),name:(0,l.t)("deck.gl Screen Grid"),thumbnail:qi,useLegacyApi:!0,tags:[(0,l.t)("deckGL"),(0,l.t)("Comparison"),(0,l.t)("Intensity"),(0,l.t)("Experimental"),(0,l.t)("Density")]});class ji extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(1216),o.e(5662),o.e(8924),o.e(56),o.e(2441),o.e(9322),o.e(347),o.e(3208),o.e(789),o.e(1221),o.e(1637)]).then(o.bind(o,31221)),controlPanel:$i,metadata:Wi,transformProps:Aa})}}class Gi extends a.Z{constructor(){super({name:"deck.gl charts",plugins:[(new ci).configure({key:"deck_arc"}),(new fi).configure({key:"deck_geojson"}),(new vi).configure({key:"deck_grid"}),(new Si).configure({key:"deck_hex"}),(new Ri).configure({key:"deck_multi"}),(new Fi).configure({key:"deck_path"}),(new Ni).configure({key:"deck_polygon"}),(new Vi).configure({key:"deck_scatter"}),(new ji).configure({key:"deck_screengrid"})]})}}const Yi={name:"header_font_size",config:{type:"SelectControl",label:(0,l.t)("Big Number Font Size"),renderTrigger:!0,clearable:!1,default:.4,options:[{label:(0,l.t)("Tiny"),value:.2},{label:(0,l.t)("Small"),value:.3},{label:(0,l.t)("Normal"),value:.4},{label:(0,l.t)("Large"),value:.5},{label:(0,l.t)("Huge"),value:.6}]}},Ji={name:"subheader_font_size",config:{type:"SelectControl",label:(0,l.t)("Subheader Font Size"),renderTrigger:!0,clearable:!1,default:.15,options:[{label:(0,l.t)("Tiny"),value:.125},{label:(0,l.t)("Small"),value:.15},{label:(0,l.t)("Normal"),value:.2},{label:(0,l.t)("Large"),value:.3},{label:(0,l.t)("Huge"),value:.4}]}},Hi={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"]]},{label:(0,l.t)("Options"),tabOverride:"data",expanded:!0,controlSetRows:[[{name:"compare_lag",config:{type:"TextControl",label:(0,l.t)("Comparison Period Lag"),isInt:!0,description:(0,l.t)("Based on granularity, number of time periods to compare against")}}],[{name:"compare_suffix",config:{type:"TextControl",label:(0,l.t)("Comparison suffix"),description:(0,l.t)("Suffix to apply after the percentage display")}}],[{name:"show_timestamp",config:{type:"CheckboxControl",label:(0,l.t)("Show Timestamp"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the timestamp")}}],[{name:"show_trend_line",config:{type:"CheckboxControl",label:(0,l.t)("Show Trend Line"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display the trend line")}}],[{name:"start_y_axis_at_zero",config:{type:"CheckboxControl",label:(0,l.t)("Start y-axis at 0"),renderTrigger:!0,default:!0,description:(0,l.t)("Start y-axis at zero. Uncheck to start y-axis at minimum value in the data.")}}],[{name:"time_range_fixed",config:{type:"CheckboxControl",label:(0,l.t)("Fix to selected Time Range"),description:(0,l.t)("Fix the trend line to the full time range specified in case filtered results do not include the start or end dates"),renderTrigger:!0,visibility(e){const{time_range:t}=e.form_data;return!!t&&"No filter"!==t}}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_picker",null],[Yi],[Ji],["y_axis_format"],[{name:"time_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,description:h.YD,default:Rt.Z.id}}],[{name:"force_timestamp_formatting",config:{type:"CheckboxControl",label:(0,l.t)("Force date format"),renderTrigger:!0,default:!1,description:(0,l.t)("Use date formatting even when metric value is not a timestamp")}}]]},{label:(0,l.t)("Advanced Analytics"),expanded:!1,controlSetRows:[[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Rolling Window"))],[{name:"rolling_type",config:{type:"SelectControl",label:(0,l.t)("Rolling Function"),default:"None",choices:(0,g.m)(["None","mean","sum","std","cumsum"]),description:(0,l.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,l.t)("Periods"),isInt:!0,description:(0,l.t)("Defines the size of the rolling window function, relative to the time granularity selected")}}],[{name:"min_periods",config:{type:"TextControl",label:(0,l.t)("Min Periods"),isInt:!0,description:(0,l.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}]]}],controlOverrides:{y_axis_format:{label:(0,l.t)("Number format")}}};var Qi=o(40962),Ui=o(5364),Xi=o(29027),Ki=o(30381),en=o.n(Ki);const tn=e=>{if("string"==typeof e){const t=en().utc(e,en().ISO_8601,!0);return t.isValid()?t.valueOf():null}return e},on=(e,t,o)=>e===Rt.Z.id?(0,d.uh)(t):(0,d.bt)(null!=e?e:o),rn=(0,c.JB)();function an(e=Qi.Z,t=rn){return function(o){return`\n      ${e(o[0].data[0])}\n      <br />\n      <strong>\n        ${null===o[0].data[1]?(0,l.t)("N/A"):t(o[0].data[1])}\n      </strong>\n    `}}const nn=(0,c.JB)(St.Z.PERCENT_SIGNED_1_POINT);function ln(e){var t,o,r;const{width:a,height:i,queriesData:n,formData:l,rawFormData:s}=e,{colorPicker:d,compareLag:u,compareSuffix:m="",timeFormat:p,headerFontSize:g,metric:h="value",showTimestamp:f,showTrendLine:b,startYAxisAtZero:y,subheader:x="",subheaderFontSize:v,forceTimestampFormatting:_,yAxisFormat:w,timeRangeFixed:C}=l,S=(0,He.Z)(s),{data:T=[],colnames:k=[],coltypes:A=[],from_dttm:R,to_dttm:P}=n[0],L=(0,At.Z)(h),E=Number(u)||0;let F=x;const{r:M,g:D,b:Z}=d,I=`rgb(${M}, ${D}, ${Z})`;let N,O,B=0,z=0===T.length?null:T[0][L],V=0===T.length?null:T[0][Ui.W3];const q=k.findIndex((e=>e===L)),$=q>-1?A[q]:null;if(T.length>0){const e=T.map((e=>[e[Ui.W3],tn(e[L])])).sort(((e,t)=>null!==e[0]&&null!==t[0]?t[0]-e[0]:0));if(z=e[0][1],V=e[0][0],null===z&&(O=e.find((e=>null!==e[1])),z=O?O[1]:null,V=O?O[0]:null),E>0){const t=E;if(t<e.length){const o=e[t][1];null!==z&&null!==o&&0!==o&&(B=(z-o)/Math.abs(o),F=`${nn(B)} ${m}`)}}e.reverse(),N=b?e:void 0}let W,j="";B>0?j="positive":B<0&&(j="negative"),e.datasource&&e.datasource.metrics&&(W=e.datasource.metrics.find((e=>e.metric_name===h)));const G=on(p,S,null==(t=W)?void 0:t.d3format),Y=$===kt.Z.TEMPORAL||$===kt.Z.STRING||_?G:(0,c.JB)(null!=(o=null!=w?w:null==(r=W)?void 0:r.d3format)?o:void 0);if(N&&C&&R){const e=null!=P?P:Date.now();(!N[0][0]||N[0][0]>R)&&N.unshift([R,null]),(!N[N.length-1][0]||N[N.length-1][0]<e)&&N.push([e,null])}return{width:a,height:i,bigNumber:z,bigNumberFallback:O,className:j,headerFormatter:Y,formatTime:G,headerFontSize:g,subheaderFontSize:v,mainColor:I,showTimestamp:f,showTrendLine:b,startYAxisAtZero:y,subheader:F,timestamp:V,trendLineData:N,echartOptions:N?{series:[{data:N,type:"line",smooth:!0,symbol:"circle",showSymbol:!1,color:I,areaStyle:{color:new Xi.Q.o(0,0,0,1,[{offset:0,color:I},{offset:1,color:"white"}])}}],xAxis:{min:N[0][0],max:N[N.length-1][0],show:!1,type:"value"},yAxis:{scale:!y,show:!1},grid:{left:0,right:0,top:0,bottom:0},tooltip:{show:!0,trigger:"axis",confine:!0,formatter:an(G,Y)},aria:{enabled:!0,label:{description:`Big number visualization ${x}`}}}:{}}}var sn=o(97490);const cn={PT1S:"S",PT1M:"min",PT5M:"5min",PT10M:"10min",PT15M:"15min",PT30M:"30min",PT1H:"H",P1D:"D",P1M:"M",P3M:"Q",P1Y:"A"};function dn(e){return(0,lo.Z)(e,(t=>{const o=(0,sn.V)(e,t);o&&(o.options={...o.options,is_pivot_df:!1});const{time_grain_sqla:r}=e;let a;if(o&&r){const e=cn[r];e&&(a={operation:"resample",options:{method:"asfreq",rule:e,fill_value:null,time_column:Ui.W3}})}return[{...t,is_timeseries:!0,post_processing:[{operation:"sort",options:{columns:{[Ui.W3]:!0}}},a,o]}]}))}var un=o(19258),mn=o(65857);const pn=new n.Z({category:(0,l.t)("KPI"),description:(0,l.t)("Showcases a single number accompanied by a simple line chart, to call attention to an important metric along with its change over time or other dimension."),exampleGallery:[{url:un}],name:(0,l.t)("Big Number with Trendline"),tags:[(0,l.t)("Advanced-Analytics"),(0,l.t)("Formattable"),(0,l.t)("Line"),(0,l.t)("Percentages"),(0,l.t)("Popular"),(0,l.t)("Report"),(0,l.t)("Description"),(0,l.t)("Trend")],thumbnail:mn});class gn extends s.Z{constructor(){super({loadChart:()=>o.e(2229).then(o.bind(o,32229)),metadata:pn,buildQuery:dn,transformProps:ln,controlPanel:Hi})}}const hn={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"]]},{label:(0,l.t)("Options"),expanded:!0,tabOverride:"data",controlSetRows:[[{name:"subheader",config:{type:"TextControl",label:(0,l.t)("Subheader"),renderTrigger:!0,description:(0,l.t)("Description text that shows up below your Big Number")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[Yi],[Ji],["y_axis_format"],[{name:"time_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,description:h.YD,default:Rt.Z.id}}],[{name:"force_timestamp_formatting",config:{type:"CheckboxControl",label:(0,l.t)("Force date format"),renderTrigger:!0,default:!1,description:(0,l.t)("Use date formatting even when metric value is not a timestamp")}}]]}],controlOverrides:{y_axis_format:{label:(0,l.t)("Number format")}}};function fn(e){var t,o,r;const{width:a,height:i,queriesData:n,formData:l,rawFormData:s}=e,{headerFontSize:d,metric:u="value",subheader:m="",subheaderFontSize:p,forceTimestampFormatting:g,timeFormat:h,yAxisFormat:f}=l,{data:b=[],coltypes:y=[]}=n[0],x=(0,He.Z)(s),v=(0,At.Z)(u),_=m,w=0===b.length?null:tn(b[0][v]);let C;e.datasource&&e.datasource.metrics&&(C=e.datasource.metrics.find((e=>e.metric_name===u)));const S=on(h,x,null==(t=C)?void 0:t.d3format);return{width:a,height:i,bigNumber:w,headerFormatter:y[0]===kt.Z.TEMPORAL||y[0]===kt.Z.STRING||g?S:(0,c.JB)(null!=(o=null!=f?f:null==(r=C)?void 0:r.d3format)?o:void 0),headerFontSize:d,subheaderFontSize:p,subheader:_}}function bn(e){return(0,lo.Z)(e,(e=>[e]))}var yn=o(39892),xn=o(48252),vn=o(20266);const _n=new n.Z({category:(0,l.t)("KPI"),description:(0,l.t)("Showcases a single metric front-and-center. Big number is best used to call attention to a KPI or the one thing you want your audience to focus on."),exampleGallery:[{url:yn,caption:(0,l.t)("A Big Number")},{url:xn,caption:(0,l.t)("With a subheader")}],name:(0,l.t)("Big Number"),tags:[(0,l.t)("Additive"),(0,l.t)("Business"),(0,l.t)("Formattable"),(0,l.t)("Legacy"),(0,l.t)("Percentages"),(0,l.t)("Popular"),(0,l.t)("Report"),(0,l.t)("Description")],thumbnail:vn});class wn extends s.Z{constructor(){super({loadChart:()=>o.e(2229).then(o.bind(o,32229)),metadata:_n,buildQuery:bn,transformProps:fn,controlPanel:hn})}}var Cn=o(20884);function Sn(e){const{columns:t=[],granularity_sqla:o,groupby:r=[]}=e;return(0,lo.Z)(e,(a=>{const i=[];return!t.length&&o&&i.push(o),[{...a,columns:[...i,...t,...r],series_columns:r,post_processing:[(0,Cn.F)(e,a)]}]}))}const Tn={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],Gt.a,["groupby"],["columns"],["series_limit"],["series_limit_metric"],[{name:"whiskerOptions",config:{clearable:!1,type:"SelectControl",freeForm:!0,label:(0,l.t)("Whisker/outlier options"),default:"Tukey",description:(0,l.t)("Determines how whiskers and outliers are calculated."),choices:(0,g.m)(["Tukey","Min/max (no outliers)","2/98 percentiles","9/91 percentiles"])}}]]},p.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"x_ticks_layout",config:{type:"SelectControl",label:(0,l.t)("X Tick Layout"),choices:(0,g.m)(["auto","flat","45°","90°","staggered"]),default:"auto",clearable:!1,renderTrigger:!0,description:(0,l.t)("The way the ticks are laid out on the X-axis")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:`${(0,l.t)("D3 format syntax: https://github.com/d3/d3-format")} ${(0,l.t)('Only applies when "Label Type" is set to show values.')}`}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}}]]}],controlOverrides:{groupby:{label:(0,l.t)("Series"),description:(0,l.t)("Categories to group by on the x-axis.")},columns:{label:(0,l.t)("Distribute across"),multi:!0,description:(0,l.t)("Columns to calculate distribution across. Defaults to temporal column if left empty.")}}};var kn=o(10581),An=o(6915),Rn=o(96886),Pn=o(34804),Ln=o(62720),En=o(30080);const Fn=new RegExp(`(.+)(${En.i1.ForecastLower}|${En.i1.ForecastTrend}|${En.i1.ForecastUpper})$`),Mn=e=>{const t=e,o=Fn.exec(t);return o?{name:o[1],type:o[2]}:{name:t,type:En.i1.Observation}},Dn=e=>{const t={};return e.forEach((e=>{const{marker:o,seriesId:r,value:a}=e,i=Mn(r),n=a[1];if(n){i.name in t||(t[i.name]={marker:o||""});const e=t[i.name];i.type===En.i1.Observation&&(e.observation=n),i.type===En.i1.ForecastTrend&&(e.forecastTrend=n),i.type===En.i1.ForecastLower&&(e.forecastLower=n),i.type===En.i1.ForecastUpper&&(e.forecastUpper=n)}})),t},Zn=({seriesName:e,observation:t,forecastTrend:o,forecastLower:r,forecastUpper:a,marker:i,formatter:n})=>{let l=`${i}${(0,An.Z6)(e)}: `,s=!1;return t&&(s=!0,l+=`${n(t)}`),o&&(s&&(l+=", "),l+=`ŷ = ${n(o)}`),r&&a&&(l=`${l.trim()} (${n(r)}, ${n(r+a)})`),`${l.trim()}`};function In(e,t={}){const o=e.length>0?Object.keys(e[0]):[];return e.map((e=>{const r={[Ui.W3]:""};return o.forEach((a=>{const i=Mn(a),n=`${i.name}${En.i1.ForecastLower}`;let l=e[a];i.type===En.i1.ForecastUpper&&o.includes(n)&&null!==l&&null!==e[n]&&(l-=e[n]);const s=a!==Ui.W3&&t[a]?t[a]:a;r[s]=l})),r}))}var Nn=o(60524);function On(e,t){const{value:o}=e;return t.map((e=>[Number(e.__timestamp),(0,Nn.f)(o,e.__timestamp)]))}function Bn(e){switch(e){case Pn.TJ.Low:return.2;case Pn.TJ.Medium:return.5;case Pn.TJ.High:return.8;default:return 1}}const zn={descriptionColumns:["long_descr"],intervalEndColumn:"end_dttm",timeColumn:"start_dttm",titleColumn:"short_descr"};function Vn(e,t){const{name:o}=e,r=t[o];if((0,Pn.$c)(r)){const{records:t}=r,{descriptionColumns:o=[],intervalEndColumn:a="",timeColumn:i="",titleColumn:n=""}=(0,Pn.mn)(e)?e:zn;return t.map((e=>({descriptions:o.map((t=>e[t]||"")),intervalEnd:e[a]||"",time:e[i]||"",title:e[n]||""})))}throw new Error("Please rerun the query.")}function qn(e,t,o=[]){const r=[],a=[],i=o.filter((e=>!!e));return e&&a.push(e),t&&a.push(t),a.length>0&&r.push(a.join(" - ")),i.length>0&&r.push(i.join("\n")),r.join("\n\n")}function $n(e,t){const o=e.filter((e=>e.annotationType===Pn.JJ.Formula&&e.show)).map((e=>e.name)),r=e.filter((e=>e.annotationType===Pn.JJ.Timeseries&&e.show)).flatMap((e=>{const o=t[e.name];return(0,Pn.b4)(o)?o.map((e=>e.key)):[]}));return o.concat(r)}var Wn=o(49239);function jn(e,t,o){const{name:r}=e,{area:a,filterState:i,seriesContexts:n={},markerEnabled:l,markerSize:s,areaOpacity:c=1,seriesType:d,stack:u,yAxisIndex:m=0,showValue:p,onlyTotal:g,formatter:h,totalStackedValues:f=[],showValueIndexes:b=[],thresholdValues:y=[],richTooltip:x}=o,v=n[r||""]||[],_=v.includes(En.i1.ForecastTrend)||v.includes(En.i1.ForecastLower)||v.includes(En.i1.ForecastUpper),w=Mn(r||""),C=w.type===En.i1.ForecastLower||w.type===En.i1.ForecastUpper,S=!(null==i?void 0:i.selectedValues)||null!=i&&i.selectedValues.includes(r)?Wn.ZV.NonTransparent:Wn.ZV.SemiTransparent;if((u||a)&&C)return;const T=w.type===En.i1.Observation,k=w.type===En.i1.ForecastTrend;let A,R;C?A=w.name:u&&T?A="obs":u&&k&&(A=w.type),R=!C&&("scatter"===d||_&&T)?"scatter":C?"line":"bar"===d?"bar":"line";const P={color:t(w.name),opacity:S};let L={},E=!1;C||("scatter"===R||_&&T||"line"===R&&p?E=!0:"line"!==R||x||l?l&&(E=!0):(E=!0,P.opacity=0,L={itemStyle:{opacity:1}}));const F=C?{opacity:Wn.ZV.Transparent}:{opacity:S};return{...e,yAxisIndex:m,name:w.name,itemStyle:P,type:R,smooth:"smooth"===d,triggerLineEvent:!0,step:["start","middle","end"].includes(d)?d:void 0,stack:A,lineStyle:F,areaStyle:a||w.type===En.i1.ForecastUpper?{opacity:S*c}:void 0,emphasis:{lineStyle:{width:"bolder"},...L},showSymbol:E,symbolSize:s,label:{show:!!p,position:"top",formatter:e=>{const{value:[,t],dataIndex:o,seriesIndex:r,seriesName:a}=e,i=An.aI.legend===a;return h?!u||i?h(t):g?r===b[o]?h(f[o]):"":t>=y[o]?h(t):"":t}}}}function Gn(e,t,o){const{name:r,color:a,opacity:i,width:n,style:l}=e;return{name:r,id:r,itemStyle:{color:a||o(r)},lineStyle:{opacity:Bn(i),type:l,width:n},type:"line",smooth:!0,data:On(e,t),symbolSize:0}}function Yn(e,t,o,r){const a=[];return Vn(e,o).forEach((t=>{const{name:o,color:i,opacity:n,showLabel:l}=e,{descriptions:s,intervalEnd:c,time:d,title:u}=t,m=qn(o,u,s),p=[[{name:m,xAxis:d},{xAxis:c}]],g=l?{show:!0,color:"#000000",position:"insideTop",verticalAlign:"top",fontWeight:"bold",emphasis:{position:"insideTop",verticalAlign:"top",backgroundColor:"#ffffff"}}:{show:!1,color:"#000000",emphasis:{fontWeight:"bold",show:!0,position:"insideTop",verticalAlign:"top",backgroundColor:"#ffffff"}};a.push({id:`Interval - ${m}`,type:"line",animation:!1,markArea:{silent:!1,itemStyle:{color:i||r(o),opacity:Bn(n||Pn.TJ.Medium),emphasis:{opacity:.8}},label:g,data:p}})})),a}function Jn(e,t,o,r){const a=[];return Vn(e,o).forEach((t=>{const{name:o,color:i,opacity:n,style:l,width:s,showLabel:c}=e,{descriptions:d,time:u,title:m}=t,p=qn(o,m,d),g=[{name:p,xAxis:u}],h={width:s,type:l,color:i||r(o),opacity:Bn(n),emphasis:{width:s?s+1:s,opacity:1}},f=c?{show:!0,color:"#000000",position:"insideEndTop",fontWeight:"bold",formatter:e=>e.name,emphasis:{backgroundColor:"#ffffff"}}:{show:!1,color:"#000000",position:"insideEndTop",emphasis:{formatter:e=>e.name,fontWeight:"bold",show:!0,backgroundColor:"#ffffff"}};a.push({id:`Event - ${p}`,type:"line",animation:!1,markLine:{silent:!1,symbol:"none",lineStyle:h,label:f,data:g}})})),a}function Hn(e,t,o,r){const a=[],{hideLine:i,name:n,opacity:l,showMarkers:s,style:c,width:d}=e,u=r[n];return(0,Pn.b4)(u)&&u.forEach((e=>{const{key:o,values:r}=e;a.push({type:"line",id:o,name:o,data:r.map((e=>[e.x,e.y])),symbolSize:s?t:0,lineStyle:{opacity:Bn(l),type:c,width:i?0:d}})})),a}function Qn(e,t,o,r,a,i,n,l,s){const c=o?Wn.SM.yAxisLabelTopOffset:0,d=i&&s||0;return(0,An.G_)(e,t,a,{top:n&&"Top"===n?Wn.SM.gridOffsetTop+(l||0):Wn.SM.gridOffsetTop+c,bottom:r?Wn.SM.gridOffsetBottomZoomable+d:Wn.SM.gridOffsetBottom+d,left:"Left"===n?Wn.SM.gridOffsetLeft+(l||0):Wn.SM.gridOffsetLeft,right:e&&t===En.IY.Right?0:Wn.SM.gridOffsetRight})}function Un(e){return e===Rt.Z.id?Ln.Z:e?(0,d.bt)(e):String}function Xn(e){if(e!==Rt.Z.id&&e)return e?(0,d.bt)(e):String}function Kn(e){const{width:t,height:o,formData:r,hooks:a,filterState:i,queriesData:n}=e,{data:l=[]}=n[0],{setDataMask:s=(()=>{})}=a,u=(0,An.IW)(n[0]),{colorScheme:m,groupby:p=[],metrics:g=[],numberFormat:h,dateFormat:f,xTicksLayout:b,emitFilter:y,legendOrientation:x="top",xAxisTitle:v,yAxisTitle:_,xAxisTitleMargin:w,yAxisTitleMargin:C,yAxisTitlePosition:S}=r,T=Io.getScale(m),k=(0,c.JB)(h),A=g.map(At.Z),R=p.map(kn.Z),P=l.map((e=>{const t=(0,An.iw)({datum:e,groupby:R,coltypeMapping:u,timeFormatter:(0,d.bt)(f)});return A.map((o=>{const r=1===A.length?t:`${t}, ${o}`,a=i.selectedValues&&!i.selectedValues.includes(r);return{name:r,value:[e[`${o}__min`],e[`${o}__q1`],e[`${o}__median`],e[`${o}__q3`],e[`${o}__max`],e[`${o}__mean`],e[`${o}__count`],e[`${o}__outliers`]],itemStyle:{color:T(t),opacity:a?Wn.ZV.SemiTransparent:.6,borderColor:T(t)}}}))})).flatMap((e=>e)),L=l.map((e=>A.map((t=>{const o=(0,An.iw)({datum:e,groupby:R,coltypeMapping:u,timeFormatter:(0,d.bt)(f)}),r=1===A.length?o:`${o}, ${t}`,a=e[`${t}__outliers`]||[],n=i.selectedValues&&!i.selectedValues.includes(r);return{name:"outlier",type:"scatter",data:a.map((e=>[r,e])),tooltip:{formatter:e=>{const[t,o]=e.data;return`${R.length?`<p><strong>${(0,An.Z6)(t)}</strong></p>`:""}${k(o)}`}},itemStyle:{color:T(o),opacity:n?Wn.ZV.SemiTransparent:Wn.ZV.NonTransparent}}})))).flat(2),E=l.reduce(((e,t)=>({...e,[(0,An.iw)({datum:t,groupby:R,coltypeMapping:u,timeFormatter:(0,d.bt)(f)})]:R.map((e=>t[e]))})),{}),F=(i.selectedValues||[]).reduce(((e,t)=>({...e,[P.findIndex((({name:e})=>e===t))]:t})),{});let M;M="45°"===b?{rotate:-45}:"90°"===b?{rotate:-90}:"flat"===b?{rotate:0}:"staggered"===b?{rotate:-45}:{show:!0};const D=[{name:"boxplot",type:"boxplot",data:P,tooltip:{formatter:e=>{const{value:t,name:o}=e,r=o?`<p><strong>${(0,An.Z6)(o)}</strong></p>`:"",a=[`Max: ${k(t[5])}`,`3rd Quartile: ${k(t[4])}`,`Mean: ${k(t[6])}`,`Median: ${k(t[3])}`,`1st Quartile: ${k(t[2])}`,`Min: ${k(t[1])}`,`# Observations: ${k(t[7])}`];return t[8].length>0&&a.push(`# Outliers: ${k(t[8].length)}`),r+a.join("<br/>")}}},...L],Z=Qn(!0,x,!!_,!1,null,!!v,S,C,w);return{formData:r,width:t,height:o,echartOptions:{grid:{...Rn.oe,...Z},xAxis:{type:"category",data:P.map((e=>e.name)),axisLabel:M,name:v,nameGap:w,nameLocation:"middle"},yAxis:{...Rn.C0,type:"value",axisLabel:{formatter:k},name:_,nameGap:C,nameLocation:"Left"===S?"middle":"end"},tooltip:{...Rn.Ku,trigger:"item",axisPointer:{type:"shadow"}},series:D},setDataMask:s,emitFilter:y,labelMap:E,groupby:p,selectedValues:F}}var el,tl=o(71421),ol=o(6416);class rl extends s.Z{constructor(){super({buildQuery:Sn,controlPanel:Tn,loadChart:()=>o.e(3496).then(o.bind(o,33496)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Distribution"),credits:["https://echarts.apache.org"],description:(0,l.t)("Also known as a box and whisker plot, this visualization compares the distributions of a related metric across multiple groups. The box in the middle emphasizes the mean, median, and inner 2 quartiles. The whiskers around each box visualize the min, max, range, and outer 2 quartiles."),exampleGallery:[{url:tl}],name:(0,l.t)("Box Plot"),tags:[(0,l.t)("ECharts"),(0,l.t)("Range"),(0,l.t)("Statistical")],thumbnail:ol}),transformProps:Kn})}}function al(e){const{metric:t,sort_by_metric:o}=e;return(0,lo.Z)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}!function(e){e[e.Key=0]="Key",e[e.Value=1]="Value",e[e.Percent=2]="Percent",e[e.KeyValue=3]="KeyValue",e[e.KeyPercent=4]="KeyPercent",e[e.KeyValuePercent=5]="KeyValuePercent"}(el||(el={}));const il={...En.xo,groupby:[],labelLine:!1,labelType:el.Key,legendOrientation:En.IY.Top,legendType:En.HJ.Scroll,numberFormat:"SMART_NUMBER",showLabels:!0,sort:"descending",orient:"vertical",gap:0,emitFilter:!1};var nl,ll;!function(e){e.Row="row",e.Column="column"}(nl||(nl={})),function(e){e.Line="line",e.Scatter="scatter",e.Smooth="smooth",e.Bar="bar",e.Start="start",e.Middle="middle",e.End="end"}(ll||(ll={}));const sl={...En.xo,annotationLayers:p.sections.annotationLayers,area:!1,forecastEnabled:p.sections.FORECAST_DEFAULT_DATA.forecastEnabled,forecastInterval:p.sections.FORECAST_DEFAULT_DATA.forecastInterval,forecastPeriods:p.sections.FORECAST_DEFAULT_DATA.forecastPeriods,forecastSeasonalityDaily:p.sections.FORECAST_DEFAULT_DATA.forecastSeasonalityDaily,forecastSeasonalityWeekly:p.sections.FORECAST_DEFAULT_DATA.forecastSeasonalityWeekly,forecastSeasonalityYearly:p.sections.FORECAST_DEFAULT_DATA.forecastSeasonalityYearly,logAxis:!1,markerEnabled:!1,markerSize:6,minorSplitLine:!1,opacity:.2,orderDesc:!0,rowLimit:1e4,seriesType:ll.Line,stack:!1,tooltipTimeFormat:"smart_date",truncateYAxis:!1,yAxisBounds:[null,null],zoomable:!1,richTooltip:!0,xAxisLabelRotation:0,emitFilter:!1,groupby:[],showValue:!1,onlyTotal:!1,percentageThreshold:0,...En.f6},{legendMargin:cl,legendOrientation:dl,legendType:ul,showLegend:ml}=En.xo,pl={name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Show legend"),renderTrigger:!0,default:ml,description:(0,l.t)("Whether to display a legend for the chart")}},gl={name:"legendMargin",config:{type:"TextControl",label:(0,l.t)("Margin"),renderTrigger:!0,isInt:!0,default:cl,description:(0,l.t)("Additional padding for legend."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_legend)?void 0:t.value)}}},hl={name:"legendType",config:{type:"SelectControl",freeForm:!1,label:"Type",choices:[["scroll","Scroll"],["plain","Plain"]],default:ul,renderTrigger:!0,description:(0,l.t)("Legend type"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_legend)?void 0:t.value)}}},fl={name:"legendOrientation",config:{type:"SelectControl",freeForm:!1,label:"Orientation",choices:[["top","Top"],["bottom","Bottom"],["left","Left"],["right","Right"]],default:dl,renderTrigger:!0,description:(0,l.t)("Legend type"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_legend)?void 0:t.value)}}},bl=[[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Legend"))],[pl],[hl],[fl],[gl]],yl={name:"show_value",config:{type:"CheckboxControl",label:(0,l.t)("Show Value"),default:!1,renderTrigger:!0,description:(0,l.t)("Show series values on the chart")}},xl={name:"stack",config:{type:"CheckboxControl",label:(0,l.t)("Stack series"),renderTrigger:!0,default:!1,description:(0,l.t)("Stack series on top of each other")}},vl={name:"only_total",config:{type:"CheckboxControl",label:(0,l.t)("Only Total"),default:!0,renderTrigger:!0,description:(0,l.t)("Only show the total value on the stacked chart, and not show on the selected category"),visibility:({controls:e})=>{var t,o;return Boolean(null==e||null==(t=e.show_value)?void 0:t.value)&&Boolean(null==e||null==(o=e.stack)?void 0:o.value)}}},_l={name:"x_axis",config:{...jt.Hq.groupby,label:(0,l.t)("X-axis"),default:null,multi:!1,description:(0,l.t)("Dimension to use on x-axis."),validators:[C.Z]}},wl={name:"percentage_threshold",config:{type:"TextControl",label:(0,l.t)("Percentage threshold"),renderTrigger:!0,isFloat:!0,default:sl.percentageThreshold,description:(0,l.t)("Minimum threshold in percentage points for showing labels."),visibility:({controls:e})=>{var t,o,r;return Boolean(null==e||null==(t=e.show_value)?void 0:t.value)&&Boolean(null==e||null==(o=e.stack)?void 0:o.value)&&Boolean(!(null!=e&&null!=(r=e.only_total)&&r.value))}}},Cl=[[yl],[xl],[vl],[wl]],Sl=[[yl],[vl]],Tl={name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,l.t)("Rich tooltip"),renderTrigger:!0,default:!0,description:(0,l.t)("Shows a list of all series available at that point in time")}},kl={name:"tooltipTimeFormat",config:{...jt.Hq.x_axis_time_format,label:(0,l.t)("Tooltip time format"),default:"smart_date",clearable:!1}},Al={name:"tooltipSortByMetric",config:{type:"CheckboxControl",label:(0,l.t)("Tooltip sort by metric"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to sort tooltip by the selected metric in descending order."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.rich_tooltip)?void 0:t.value)}}},Rl=[[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Tooltip"))],[Tl],[Al],[kl]],{labelType:Pl,numberFormat:Ll,showLabels:El}=il,Fl=[...bl];Fl.splice(2,1);const Ml={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metric"],["adhoc_filters"],Gt.a,[{name:"row_limit",config:{...jt.Hq.row_limit,default:10}}],[{name:"sort_by_metric",config:{default:!0,type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...Fl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Labels"))],[{name:"label_type",config:{type:"SelectControl",label:(0,l.t)("Label Type"),default:Pl,renderTrigger:!0,choices:[[el.Key,"Category Name"],[el.Value,"Value"],[el.Percent,"Percentage"],[el.KeyValue,"Category and Value"],[el.KeyPercent,"Category and Percentage"],[el.KeyValuePercent,"Category, Value and Percentage"]],description:(0,l.t)("What should be shown on the label?")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:Ll,choices:h.F6,description:`${(0,l.t)("D3 format syntax: https://github.com/d3/d3-format")} ${(0,l.t)('Only applies when "Label Type" is set to show values.')}`}}],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Labels"),renderTrigger:!0,default:El,description:(0,l.t)("Whether to display the labels.")}}]]}],onInit:e=>({...e,row_limit:{...e.row_limit,value:e.row_limit.default}})},Dl=(0,c.JB)(St.Z.PERCENT_2_POINT);function Zl({params:e,labelType:t,numberFormatter:o,sanitizeName:r=!1}){const{name:a="",value:i,percent:n}=e,l=r?(0,An.Z6)(a):a,s=o(i),c=Dl(n/100);switch(t){case el.Key:return l;case el.Value:return s;case el.Percent:return c;case el.KeyValue:return`${l}: ${s}`;case el.KeyValuePercent:return`${l}: ${s} (${c})`;case el.KeyPercent:return`${l}: ${c}`;default:return l}}function Il(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:i,width:n}=e,l=i[0].data||[],{colorScheme:s,groupby:d,orient:u,sort:m,gap:p,labelLine:g,labelType:h,legendMargin:f,legendOrientation:b,legendType:y,metric:x="",numberFormat:v,showLabels:_,showLegend:w,emitFilter:C}={...En.xo,...il,...t},S=(0,At.Z)(x),T=d.map(kn.Z),k=l.map((e=>(0,An.iw)({datum:e,groupby:T,coltypeMapping:{}}))),A=l.reduce(((e,t)=>({...e,[(0,An.iw)({datum:t,groupby:T,coltypeMapping:{}})]:T.map((e=>t[e]))})),{}),{setDataMask:R=(()=>{})}=r,P=Io.getScale(s),L=(0,c.JB)(v),E=l.map((e=>{const t=(0,An.iw)({datum:e,groupby:T,coltypeMapping:{}}),o=a.selectedValues&&!a.selectedValues.includes(t);return{value:e[S],name:t,itemStyle:{color:P(t),opacity:o?Wn.ZV.SemiTransparent:Wn.ZV.NonTransparent}}})),F=(a.selectedValues||[]).reduce(((e,t)=>({...e,[E.findIndex((({name:e})=>e===t))]:t})),{}),M={formatter:e=>Zl({params:e,numberFormatter:L,labelType:h}),show:_,color:"#000000"},D=[{type:"funnel",...(0,An.G_)(w,b,f),animation:!0,minSize:"0%",maxSize:"100%",sort:m,orient:u,gap:p,funnelAlign:"center",labelLine:{show:!!g},label:{...M,position:g?"outer":"inner",textBorderColor:"transparent"},emphasis:{label:{show:!0,fontWeight:"bold"}},data:E}];return{formData:t,width:n,height:o,echartOptions:{grid:{...Rn.oe},tooltip:{...Rn.Ku,trigger:"item",formatter:e=>Zl({params:e,numberFormatter:L,labelType:el.KeyValuePercent})},legend:{...(0,An.zp)(y,b,w),data:k},series:D},setDataMask:R,emitFilter:C,labelMap:A,groupby:d,selectedValues:F}}var Nl,Ol=o(71503);class Bl extends s.Z{constructor(){super({buildQuery:al,controlPanel:Ml,loadChart:()=>o.e(6693).then(o.bind(o,96693)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("KPI"),credits:["https://echarts.apache.org"],description:(0,l.t)("Showcases how a metric changes as the funnel progresses. This classic chart is useful for visualizing drop-off between stages in a pipeline or lifecycle."),name:(0,l.t)("Funnel Chart"),tags:[(0,l.t)("Business"),(0,l.t)("ECharts"),(0,l.t)("Progressive"),(0,l.t)("Report"),(0,l.t)("Sequential"),(0,l.t)("Trend")],thumbnail:Ol}),transformProps:Il})}}function zl(e){const{metric:t,sort_by_metric:o}=e;return(0,lo.Z)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}!function(e){e.Key="key",e.Value="value",e.KeyValue="key_value"}(Nl||(Nl={}));const Vl={groupby:[],labelType:Nl.KeyValue,labelPosition:En.Pl.InsideTopLeft,numberFormat:"SMART_NUMBER",showLabels:!0,showUpperLabels:!0,dateFormat:"smart_date",emitFilter:!1},{labelType:ql,numberFormat:$l,showLabels:Wl,showUpperLabels:jl,dateFormat:Gl}=Vl,Yl={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metric"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}],["adhoc_filters"],Gt.a]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Labels"))],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Labels"),renderTrigger:!0,default:Wl,description:(0,l.t)("Whether to display the labels.")}}],[{name:"show_upper_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Upper Labels"),renderTrigger:!0,default:jl,description:(0,l.t)("Show labels when the node has children.")}}],[{name:"label_type",config:{type:"SelectControl",label:(0,l.t)("Label Type"),default:ql,renderTrigger:!0,choices:[["Key","Key"],["value","Value"],["key_value","Category and Value"]],description:(0,l.t)("What should be shown on the label?")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:$l,choices:h.F6,description:`${(0,l.t)("D3 format syntax: https://github.com/d3/d3-format. ")} ${(0,l.t)('Only applies when "Label Type" is set to show values.')}`}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:Gl,description:h.YD}}]]}]};var Jl=o(68718),Hl=o.n(Jl),Ql=o(81763),Ul=o.n(Ql),Xl=o(7739),Kl=o.n(Xl),es=o(92638);function ts(e){const{formData:t,height:o,queriesData:r,width:a,hooks:i,filterState:n}=e,{data:l=[]}=r[0],{setDataMask:s=(()=>{})}=i,u=(0,An.IW)(r[0]),{colorScheme:m,groupby:p=[],metric:g="",labelType:h,labelPosition:f,numberFormat:b,dateFormat:y,showLabels:x,showUpperLabels:v,dashboardId:_,emitFilter:w}={...Vl,...t},C=Io.getScale(m),S=(0,c.JB)(b),T=e=>function({params:e,labelType:t,numberFormatter:o}){const{name:r="",value:a}=e,i=o(a);switch(t){case Nl.Key:return r;case Nl.Value:return i;case Nl.KeyValue:return`${r}: ${i}`;default:return r}}({params:e,numberFormatter:S,labelType:h}),k=new Map,A=(e,t,o,r,a)=>{const[i,...l]=t,s=Kl()(e,i);return l.length?Hl()(s,((e,t,n)=>{const s=(0,An.mj)(n,{numberFormatter:S,timeFormatter:(0,d.bt)(y),...u[i]&&{coltype:u[i]}}),c=A(t,l,o,r+1,a.concat(s));e.push({name:s,children:c,value:c.reduce(((e,t)=>e+t.value),0)}),e.sort(((e,t)=>t.value-e.value))}),[]).map((e=>({...e,colorSaturation:es.My,itemStyle:{borderColor:es.dS,color:C(`${e.name}`),borderWidth:es.YF,gapWidth:es.Lh}}))):Hl()(s,((e,t,r)=>{(null!=t?t:[]).forEach((t=>{const l=(0,An.mj)(r,{numberFormatter:S,timeFormatter:(0,d.bt)(y),...u[i]&&{coltype:u[i]}}),s={name:l,value:Ul()(t[o])?t[o]:0},c=a.concat(l).join(",");k.set(c,a.concat(l)),n.selectedValues&&!n.selectedValues.includes(c)&&(s.itemStyle={colorAlpha:Wn.ZV.SemiTransparent},s.label={color:`rgba(0, 0, 0, ${Wn.ZV.SemiTransparent})`}),e.push(s)}))}),[])},R=(0,At.Z)(g),P=p.map(kn.Z),L=[{name:R,colorSaturation:es.My,itemStyle:{borderColor:es.dS,borderWidth:es.YF,gapWidth:es.Lh},upperLabel:{show:!1},children:A(l,P,R,1,[])}],E=[{type:"treemap",width:"100%",height:"100%",nodeClick:void 0,roam:!_,breadcrumb:{show:!1,emptyItemWidth:25},emphasis:{label:{show:!0}},levels:[{upperLabel:{show:!1},label:{show:!1},itemStyle:{color:Io.getColor()}}],label:{show:x,position:f,formatter:T,color:"#000",fontSize:es.oO},upperLabel:{show:v,formatter:T,textBorderColor:"transparent",fontSize:es.oO},data:L}],F={tooltip:{...Rn.Ku,trigger:"item",formatter:e=>function({params:e,numberFormatter:t}){const{value:o,treePathInfo:r=[]}=e,a=t(o),{metricLabel:i,treePath:n}=(0,es.Im)(r),l=(0,c.JB)(St.Z.PERCENT_2_POINT);let s="";const d=r[r.length-1],u=r[r.length-2];return u&&(s=l(u.value?d.value/u.value:0)),[`<div>${n.join(" ▸ ")}</div>`,`${i}: ${a}`,s?` (${s})`:""].join("")}({params:e,numberFormatter:S})},series:E};return{formData:t,width:a,height:o,echartOptions:F,setDataMask:s,emitFilter:w,labelMap:Object.fromEntries(k),groupby:p,selectedValues:n.selectedValues||[]}}var os=o(68144),rs=o(97765),as=o(79067);class is extends s.Z{constructor(){super({buildQuery:zl,controlPanel:Yl,loadChart:()=>o.e(4790).then(o.bind(o,64790)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,l.t)("Show hierarchical relationships of data, with with the value represented by area, showing proportion and contribution to the whole."),exampleGallery:[{url:rs},{url:as}],name:(0,l.t)("Treemap v2"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Categorical"),(0,l.t)("Comparison"),(0,l.t)("ECharts"),(0,l.t)("Multi-Levels"),(0,l.t)("Percentages"),(0,l.t)("Proportional")],thumbnail:os}),transformProps:ts})}}var ns=o(33444);const ls={...En.xo,groupby:[],rowLimit:10,minVal:0,maxVal:100,fontSize:15,numberFormat:"SMART_NUMBER",animation:!0,showProgress:!0,overlap:!0,roundCap:!1,showAxisTick:!1,showSplitLine:!1,splitNumber:10,startAngle:225,endAngle:-45,showPointer:!0,intervals:"",intervalColorIndices:"",valueFormatter:"{value}",emitFilter:!1},ss={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...jt.Hq.groupby,label:(0,l.t)("Group by"),description:(0,l.t)("Columns to group by")}}],["metric"],["adhoc_filters"],Gt.a,[{name:"row_limit",config:{...jt.Hq.row_limit,choices:[...Array(10).keys()].map((e=>e+1)),default:ls.rowLimit}}],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("General"))],[{name:"min_val",config:{type:"TextControl",isInt:!0,default:String(ls.minVal),validators:[C.Z,ns.Z],renderTrigger:!0,label:(0,l.t)("Min"),description:(0,l.t)("Minimum value on the gauge axis")}},{name:"max_val",config:{type:"TextControl",isInt:!0,default:ls.maxVal,validators:[C.Z,ns.Z],renderTrigger:!0,label:(0,l.t)("Max"),description:(0,l.t)("Maximum value on the gauge axis")}}],[{name:"start_angle",config:{type:"TextControl",label:(0,l.t)("Start angle"),description:(0,l.t)("Angle at which to start progress axis"),renderTrigger:!0,default:ls.startAngle}},{name:"end_angle",config:{type:"TextControl",label:(0,l.t)("End angle"),description:(0,l.t)("Angle at which to end progress axis"),renderTrigger:!0,default:ls.endAngle}}],["color_scheme"],[{name:"font_size",config:{type:"SliderControl",label:(0,l.t)("Font size"),description:(0,l.t)("Font size for axis labels, detail value and other text elements"),renderTrigger:!0,min:10,max:20,default:ls.fontSize}}],[{name:"number_format",config:{type:"SelectControl",label:(0,l.t)("Number format"),description:(0,l.t)("D3 format syntax: https://github.com/d3/d3-format"),freeForm:!0,renderTrigger:!0,default:ls.numberFormat,choices:h.F6}}],[{name:"value_formatter",config:{type:"TextControl",label:(0,l.t)("Value format"),description:(0,l.t)("Additional text to add before or after the value, e.g. unit"),renderTrigger:!0,default:ls.valueFormatter}}],[{name:"show_pointer",config:{type:"CheckboxControl",label:(0,l.t)("Show pointer"),description:(0,l.t)("Whether to show the pointer"),renderTrigger:!0,default:ls.showPointer}}],[{name:"animation",config:{type:"CheckboxControl",label:(0,l.t)("Animation"),description:(0,l.t)("Whether to animate the progress and the value or just display them"),renderTrigger:!0,default:ls.animation}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Axis"))],[{name:"show_axis_tick",config:{type:"CheckboxControl",label:(0,l.t)("Show axis line ticks"),description:(0,l.t)("Whether to show minor ticks on the axis"),renderTrigger:!0,default:ls.showAxisTick}}],[{name:"show_split_line",config:{type:"CheckboxControl",label:(0,l.t)("Show split lines"),description:(0,l.t)("Whether to show the split lines on the axis"),renderTrigger:!0,default:ls.showSplitLine}}],[{name:"split_number",config:{type:"SliderControl",label:(0,l.t)("Split number"),description:(0,l.t)("Number of split segments on the axis"),renderTrigger:!0,min:3,max:30,default:ls.splitNumber}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Progress"))],[{name:"show_progress",config:{type:"CheckboxControl",label:(0,l.t)("Show progress"),description:(0,l.t)("Whether to show the progress of gauge chart"),renderTrigger:!0,default:ls.showProgress}}],[{name:"overlap",config:{type:"CheckboxControl",label:(0,l.t)("Overlap"),description:(0,l.t)("Whether the progress bar overlaps when there are multiple groups of data"),renderTrigger:!0,default:ls.overlap}}],[{name:"round_cap",config:{type:"CheckboxControl",label:(0,l.t)("Round cap"),description:(0,l.t)("Style the ends of the progress bar with a round cap"),renderTrigger:!0,default:ls.roundCap}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Intervals"))],[{name:"intervals",config:{type:"TextControl",label:(0,l.t)("Interval bounds"),description:(0,l.t)("Comma-separated interval bounds, e.g. 2,4,5 for intervals 0-2, 2-4 and 4-5. Last number should match the value provided for MAX."),renderTrigger:!0,default:ls.intervals}}],[{name:"interval_color_indices",config:{type:"TextControl",label:(0,l.t)("Interval colors"),description:(0,l.t)("Comma-separated color picks for the intervals, e.g. 1,2,4. Integers denote colors from the chosen color scheme and are 1-indexed. Length must be matching that of interval bounds."),renderTrigger:!0,default:ls.intervalColorIndices}}]]}]};var cs=o(96026),ds=o.n(cs);function us(e){if(null!=e&&!Number.isNaN(Number(e)))return Number(e)}function ms(e,t=";"){return e&&e.trim()?e.split(t).map((e=>{if((0,Jo.Z)(e))throw new Error("All values must be numeric");return Number(e)})):[]}const ps={lineStyle:{color:"#63677A"}},gs={lineStyle:{color:[[1,"#E6EBF8"]]}},hs={color:"#464646"},fs={lineStyle:{width:2,color:"#63677A"}},bs={color:"auto"},ys={splitLine:{lineStyle:{color:"auto"}},axisTick:{lineStyle:{color:"auto"}},axisLabel:{color:"auto"},pointer:{itemStyle:{color:"auto"}}};function xs(e){var t,o,r,a,i,n,l,s;const{width:d,height:u,formData:m,queriesData:p,hooks:g,filterState:h}=e,{groupby:f,metric:b,minVal:y,maxVal:x,colorScheme:v,fontSize:_,numberFormat:w,animation:C,showProgress:S,overlap:T,roundCap:k,showAxisTick:A,showSplitLine:R,splitNumber:P,startAngle:L,endAngle:E,showPointer:F,intervals:M,intervalColorIndices:D,valueFormatter:Z,emitFilter:I}={...ls,...m},N=(null==(t=p[0])?void 0:t.data)||[],O=(0,c.JB)(w),B=Io.getScale(v),z=x,V=((e,t,o)=>o?t:e.length*t)(N,_,T),q=ds()(y,x,(x-y)/P),$=Math.max(...q.map((e=>O(e).length)).concat([1])),W=f.map(kn.Z),j=.25*_,G=1*_,Y=2*_,J=.9*_,H=((e,t,o,r)=>{let a,i;try{a=ms(e,","),i=ms(t,",")}catch(e){a=[],i=[]}const n=a.map((e=>e/r)),l=i.map((e=>o.colors[(e-1)%o.colors.length]));return n.map(((e,t)=>[e,l[t]||o.colors[t]]))})(M,D,B,z),Q=new Map,U=N.map(((e,t)=>{const o=W.map((t=>`${t}: ${e[t]}`)).join(", ");Q.set(o,W.map((t=>e[t])));let r={value:e[(0,At.Z)(b)],name:o,itemStyle:{color:B(t)},title:{offsetCenter:["0%",t*Y+20+"%"],fontSize:_},detail:{offsetCenter:["0%",`${t*Y+20+J}%`],fontSize:1.2*_}};return h.selectedValues&&!h.selectedValues.includes(o)&&(r={...r,itemStyle:{color:B(t),opacity:Wn.ZV.SemiTransparent},detail:{show:!1},title:{show:!1}}),r})),{setDataMask:X=(()=>{})}=g,K={show:S,overlap:T,roundCap:k,width:_},ee={show:R,distance:-V-G-10,length:G,lineStyle:{width:.25*_,color:null==(o=ps)||null==(r=o.lineStyle)?void 0:r.color}},te={roundCap:k,lineStyle:{width:V,color:null==(a=gs)||null==(i=a.lineStyle)?void 0:i.color}},oe={distance:V-1.5*_*.35*$-(R?G:0)-(A?j:0)-10,fontSize:_,formatter:O,color:null==(n=hs)?void 0:n.color},re={show:A,distance:-V-j-10,length:j,lineStyle:null==(l=fs)?void 0:l.lineStyle},ae={valueAnimation:C,formatter:e=>(e=>Z.replace("{value}",O(e)))(e),color:null==(s=bs)?void 0:s.color};let ie;var ne,le,se,ce,de,ue;return H.length?(ee.lineStyle.color=null==(ne=ys.splitLine)||null==(le=ne.lineStyle)?void 0:le.color,re.lineStyle.color=null==ys||null==(se=ys.axisTick)||null==(ce=se.lineStyle)?void 0:ce.color,oe.color=null==(de=ys.axisLabel)?void 0:de.color,te.lineStyle.color=H,ie={show:F,showAbove:!1,itemStyle:null==(ue=ys.pointer)?void 0:ue.itemStyle}):ie={show:F,showAbove:!1},{formData:m,width:d,height:u,echartOptions:{series:[{type:"gauge",startAngle:L,endAngle:E,min:y,max:x,progress:K,animation:C,axisLine:te,splitLine:ee,splitNumber:P,axisLabel:oe,axisTick:re,pointer:ie,detail:ae,data:U}]},setDataMask:X,emitFilter:I,labelMap:Object.fromEntries(Q),groupby:f,selectedValues:h.selectedValues||[]}}var vs=o(4350);function _s(e){const{metric:t,sort_by_metric:o}=e;return(0,lo.Z)(e,(r=>[{...r,groupby:e.groupby||[],...o&&{orderby:[[t,!1]]}}]))}class ws extends s.Z{constructor(){super({buildQuery:_s,controlPanel:ss,loadChart:()=>o.e(775).then(o.bind(o,90775)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("KPI"),credits:["https://echarts.apache.org"],description:(0,l.t)("Uses a gauge to showcase progress of a metric towards a target. The position of the dial represents the progress and the terminal value in the gauge represents the target value."),name:(0,l.t)("Gauge Chart"),tags:[(0,l.t)("Multi-Variables"),(0,l.t)("Business"),(0,l.t)("Comparison"),(0,l.t)("ECharts"),(0,l.t)("Report")],thumbnail:vs}),transformProps:xs})}}const Cs={...En.xo,source:"",target:"",layout:"force",roam:!0,draggable:!1,selectedMode:"single",showSymbolThreshold:0,repulsion:1e3,gravity:.3,edgeSymbol:"none,arrow",edgeLength:400,baseEdgeWidth:3,baseNodeSize:20,friction:.2,legendOrientation:En.IY.Top,legendType:En.HJ.Scroll},Ss={...jt.Hq.entity,clearable:!1},Ts={...jt.Hq.entity,clearable:!0,validators:[]},ks={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"source",config:{...Ss,label:(0,l.t)("Source"),description:(0,l.t)("Name of the source nodes")}}],[{name:"target",config:{...Ss,label:(0,l.t)("Target"),description:(0,l.t)("Name of the target nodes")}}],["metric"],[{name:"source_category",config:{...Ts,label:(0,l.t)("Source category"),description:(0,l.t)("The category of source nodes used to assign colors. If a node is associated with more than one category, only the first will be used.")}}],[{name:"target_category",config:{...Ts,label:(0,l.t)("Target category"),description:(0,l.t)("Category of target nodes")}}],["adhoc_filters"],["row_limit"]]},{label:(0,l.t)("Chart options"),expanded:!0,controlSetRows:[["color_scheme"],...bl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Layout"))],[{name:"layout",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Graph layout"),default:Cs.layout,options:[["force",(0,l.t)("Force")],["circular",(0,l.t)("Circular")]],description:(0,l.t)("Layout type of graph")}}],[{name:"edgeSymbol",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Edge symbols"),description:(0,l.t)("Symbol of two ends of edge line"),default:Cs.edgeSymbol,choices:[["none,none",(0,l.t)("None -> None")],["none,arrow",(0,l.t)("None -> Arrow")],["circle,arrow",(0,l.t)("Circle -> Arrow")],["circle,circle",(0,l.t)("Circle -> Circle")]]}}],[{name:"draggable",config:{type:"CheckboxControl",label:(0,l.t)("Enable node dragging"),renderTrigger:!0,default:Cs.draggable,description:(0,l.t)("Whether to enable node dragging in force layout mode."),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===Cs.layout}}],[{name:"roam",config:{type:"SelectControl",label:(0,l.t)("Enable graph roaming"),renderTrigger:!0,default:Cs.roam,choices:[[!1,(0,l.t)("Disabled")],["scale",(0,l.t)("Scale only")],["move",(0,l.t)("Move only")],[!0,(0,l.t)("Scale and Move")]],description:(0,l.t)("Whether to enable changing graph position and scaling.")}}],[{name:"selectedMode",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Node select mode"),default:Cs.selectedMode,choices:[[!1,(0,l.t)("Disabled")],["single",(0,l.t)("Single")],["multiple",(0,l.t)("Multiple")]],description:(0,l.t)("Allow node selections")}}],[{name:"showSymbolThreshold",config:{type:"TextControl",label:(0,l.t)("Label threshold"),renderTrigger:!0,isInt:!0,default:Cs.showSymbolThreshold,description:(0,l.t)("Minimum value for label to be displayed on graph.")}}],[{name:"baseNodeSize",config:{type:"TextControl",label:(0,l.t)("Node size"),renderTrigger:!0,isFloat:!0,default:Cs.baseNodeSize,description:(0,l.t)("Median node size, the largest node will be 4 times larger than the smallest")}},{name:"baseEdgeWidth",config:{type:"TextControl",label:(0,l.t)("Edge width"),renderTrigger:!0,isFloat:!0,default:Cs.baseEdgeWidth,description:(0,l.t)("Median edge width, the thickest edge will be 4 times thicker than the thinnest.")}}],[{name:"edgeLength",config:{type:"SliderControl",label:(0,l.t)("Edge length"),renderTrigger:!0,min:100,max:1e3,step:50,default:Cs.edgeLength,description:(0,l.t)("Edge length between nodes"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===Cs.layout}}],[{name:"gravity",config:{type:"SliderControl",label:(0,l.t)("Gravity"),renderTrigger:!0,min:.1,max:1,step:.1,default:Cs.gravity,description:(0,l.t)("Strength to pull the graph toward center"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===Cs.layout}}],[{name:"repulsion",config:{type:"SliderControl",label:(0,l.t)("Repulsion"),renderTrigger:!0,min:100,max:3e3,step:50,default:Cs.repulsion,description:(0,l.t)("Repulsion strength between nodes"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===Cs.layout}}],[{name:"friction",config:{type:"SliderControl",label:(0,l.t)("Friction"),renderTrigger:!0,min:.1,max:1,step:.1,default:Cs.friction,description:(0,l.t)("Friction between nodes"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===Cs.layout}}]]}]};var As=o(4065);const Rs={zoom:.7,circular:{rotateLabel:!0},force:{initLayout:"circular",layoutAnimation:!0},label:{show:!0,position:"right",distance:5,rotate:0,offset:[0,0],fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:12,padding:[0,0,0,0],overflow:"truncate",formatter:"{b}"},emphasis:{focus:"adjacency"},animation:!0,animationDuration:500,animationEasing:"cubicOut",lineStyle:{color:"source",curveness:.1},select:{itemStyle:{borderWidth:3,opacity:1},label:{fontWeight:"bolder"}},tooltip:{formatter:"{b}: {c}"}};function Ps(e){return"none"===e||"circle"===e||"arrow"===e?e:"none"}function Ls(e){const[t,o]=(e||"").split(",");return[Ps(t),Ps(o)]}function Es(e){return Math.max(5,Math.min(2*e,20))}function Fs(e,t){return Object.keys(e).find((o=>e[o]===t))}function Ms(e,t){return!1===t?`${e}: false`:!0===t?`${e}: true`:null==t?"N/A":String(t)}function Ds(e){const{width:t,height:o,formData:r,queriesData:a}=e,i=a[0].data||[],{source:n,target:l,sourceCategory:s,targetCategory:c,colorScheme:d,metric:u="",layout:m,roam:p,draggable:g,selectedMode:h,showSymbolThreshold:f,edgeLength:b,gravity:y,repulsion:x,friction:v,legendMargin:_,legendOrientation:w,legendType:C,showLegend:S,baseEdgeWidth:T,baseNodeSize:k,edgeSymbol:A}={...Cs,...r},R=(0,At.Z)(u),P=Io.getScale(d),L={},E=new Set,F=[],M=[];function D(e,t){e in L||(L[e]=F.length,F.push({id:String(L[e]),name:e,value:0,category:t,select:Rs.select,tooltip:Rs.tooltip}));const o=F[L[e]];return t&&(E.add(t),o.category||(o.category=t)),o}i.forEach((e=>{const t=e[R];if(!t)return;const o=e[n],r=e[l],a=s?Ms(s,e[s]):void 0,i=c?Ms(c,e[c]):void 0,d=D(o,a),u=D(r,i);d.value+=t,u.value+=t,M.push({source:d.id,target:u.id,value:t,lineStyle:{},emphasis:{},select:{}})})),function(e,t,{baseNodeSize:o,baseEdgeWidth:r,showSymbolThreshold:a}){const i=.5*o,n=2*o,l=.5*r,s=2*r,[c,d]=(0,As.extent)(e,(e=>e.value)),u=d-c;e.forEach((e=>{e.symbolSize=((e.value-c)/u*n||0)+i,e.label={...e.label,show:!a||e.value>a}}));const[m,p]=(0,As.extent)(t,(e=>e.value)),g=p-m;t.forEach((e=>{const t=(e.value-m)/g*s||0+l;e.lineStyle.width=t,e.emphasis.lineStyle={...e.emphasis.lineStyle,width:Es(t)},e.select.lineStyle={...e.select.lineStyle,width:Es(.8*t),opacity:1}}))}(F,M,{showSymbolThreshold:f,baseEdgeWidth:T,baseNodeSize:k});const Z=[...E],I=[{zoom:Rs.zoom,type:"graph",categories:Z.map((e=>({name:e,itemStyle:{color:P(e)}}))),layout:m,force:{...Rs.force,edgeLength:b,gravity:y,repulsion:x,friction:v},circular:Rs.circular,data:F,links:M,roam:p,draggable:g,edgeSymbol:Ls(A),edgeSymbolSize:2*T,selectedMode:h,...(0,An.G_)(S,w,_),animation:Rs.animation,label:Rs.label,lineStyle:Rs.lineStyle,emphasis:Rs.emphasis}],N={animationDuration:Rs.animationDuration,animationEasing:Rs.animationEasing,tooltip:{formatter:e=>function(e,t,o,r){const a=Number(e),i=Number(t);return`${(0,An.Z6)(Fs(r,a))} > ${(0,An.Z6)(Fs(r,i))} : ${o}`}(e.data.source,e.data.target,e.value,L)},legend:{...(0,An.zp)(C,w,S),data:Z},series:I};return{width:t,height:o,echartOptions:N}}var Zs,Is=o(3417);function Ns(e){return(0,lo.Z)(e,{queryFields:{source:"columns",target:"columns",source_category:"columns",target_category:"columns"}})}class Os extends s.Z{constructor(){super({buildQuery:Ns,controlPanel:ks,loadChart:()=>o.e(7521).then(o.bind(o,67521)),metadata:new n.Z({category:(0,l.t)("Flow"),credits:["https://echarts.apache.org"],description:(0,l.t)("Displays connections between entities in a graph structure. Useful for mapping relationships and showing which nodes are important in a network. Graph charts can be configured to be force-directed or circulate. If your data has a geospatial component, try the deck.gl Arc chart."),name:(0,l.t)("Graph Chart"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Circular"),(0,l.t)("Comparison"),(0,l.t)("Directional"),(0,l.t)("ECharts"),(0,l.t)("Relational"),(0,l.t)("Structural"),(0,l.t)("Transformable")],thumbnail:Is}),transformProps:Ds})}}function Bs(e){const{timeseries_limit_metric:t}=e,o=(0,$t.Z)(t)[0];return(0,lo.Z)(e,(e=>{var t;let{metrics:r,orderby:a=[]}=e;return r=r||[],o?a=[[o,!1]]:(null==(t=r)?void 0:t.length)>0&&(a=[[r[0],!1]]),[{...e,orderby:a}]}))}!function(e){e.Value="value",e.KeyValue="key_value"}(Zs||(Zs={}));const zs={...En.xo,groupby:[],labelType:Zs.Value,labelPosition:En.Pl.Top,legendOrientation:En.IY.Top,legendType:En.HJ.Scroll,numberFormat:"SMART_NUMBER",showLabels:!0,emitFilter:!1,dateFormat:"smart_date",isCircle:!1},{labelType:Vs,labelPosition:qs,numberFormat:$s,showLabels:Ws,isCircle:js}=zs,Gs={name:"radarMetricMaxValue",config:{controlType:"InputNumber",label:(0,l.t)("Max"),description:(0,l.t)("The maximum value of metrics. It is an optional configuration"),width:120,placeholder:"auto",debounceDelay:400,validators:[Jo.Z]}},Ys={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metrics"],["timeseries_limit_metric"],["adhoc_filters"],Gt.a,[{name:"row_limit",config:{...jt.Hq.row_limit,default:10}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...bl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Labels"))],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Labels"),renderTrigger:!0,default:Ws,description:(0,l.t)("Whether to display the labels.")}}],[{name:"label_type",config:{type:"SelectControl",label:(0,l.t)("Label Type"),default:Vs,renderTrigger:!0,choices:[["value","Value"],["key_value","Category and Value"]],description:(0,l.t)("What should be shown on the label?")}}],[{name:"label_position",config:{type:"SelectControl",freeForm:!1,label:(0,l.t)("Label position"),renderTrigger:!0,choices:Wn.N4,default:qs,description:h.YD}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:$s,choices:h.F6,description:`${(0,l.t)("D3 format syntax: https://github.com/d3/d3-format. ")} ${(0,l.t)('Only applies when "Label Type" is set to show values.')}`}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Radar"))],[{name:"column_config",config:{type:"ColumnConfigControl",label:(0,l.t)("Customize Metrics"),description:(0,l.t)("Further customize how to display each metric"),renderTrigger:!0,configFormLayout:{[kt.Z.NUMERIC]:[[Gs]]},mapStateToProps(e,t,o){var r,a,i,n;const l=(null!=(r=null==e||null==(a=e.controls)||null==(i=a.metrics)?void 0:i.value)?r:[]).map((e=>"string"==typeof e?e:e.label));return{queryResponse:null==o||null==(n=o.queriesResponse)?void 0:n[0],appliedColumnNames:l}}}}],[{name:"is_circle",config:{type:"CheckboxControl",label:(0,l.t)("Circle radar shape"),renderTrigger:!0,default:js,description:(0,l.t)("Radar render type, whether to display 'circle' shape.")}}]]}]};var Js=o(77675);function Hs(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:i,width:n}=e,{data:l=[]}=i[0],s=(0,An.IW)(i[0]),{colorScheme:u,groupby:m,labelType:p,labelPosition:g,legendOrientation:h,legendType:f,legendMargin:b,metrics:y=[],numberFormat:x,dateFormat:v,showLabels:_,showLegend:w,isCircle:C,columnConfig:S}={...En.xo,...zs,...t},{setDataMask:T=(()=>{})}=r,k=Io.getScale(u),A=(0,c.JB)(x),R=e=>function({params:e,labelType:t,numberFormatter:o}){const{name:r="",value:a}=e,i=o(a);switch(t){case Zs.Value:return i;case Zs.KeyValue:return`${r}: ${i}`;default:return r}}({params:e,numberFormatter:A,labelType:p}),P=y.map(At.Z),L=m.map(kn.Z),E=new Map,F=new Map,M=[];l.forEach((e=>{const t=(0,An.iw)({datum:e,groupby:L,coltypeMapping:s,timeFormatter:(0,d.bt)(v)});F.set(t,L.map((t=>e[t])));for(const[t,o]of Object.entries(e))E.has(t)?E.set(t,Math.max(o,(0,Js.Z)(E.get(t),Number.MIN_SAFE_INTEGER))):E.set(t,o);const o=a.selectedValues&&!a.selectedValues.includes(t);M.push({value:P.map((t=>e[t])),name:t,itemStyle:{color:k(t),opacity:o?Wn.ZV.Transparent:Wn.ZV.NonTransparent},lineStyle:{opacity:o?Wn.ZV.SemiTransparent:Wn.ZV.NonTransparent},label:{show:_,position:g,formatter:R}})}));const D=(a.selectedValues||[]).reduce(((e,t)=>({...e,[M.findIndex((({name:e})=>e===t))]:t})),{}),Z=P.map((e=>{var t;const o=null==S||null==(t=S[e])?void 0:t.radarMetricMaxValue,r=0===E.get(e)?Number.MAX_SAFE_INTEGER:E.get(e);return{name:e,max:null===o?r:o}})),I=[{type:"radar",...(0,An.G_)(w,h,b),animation:!1,emphasis:{label:{show:!0,fontWeight:"bold",backgroundColor:"white"}},data:M}];return{formData:t,width:n,height:o,echartOptions:{grid:{...Rn.oe},tooltip:{...Rn.Ku,trigger:"item"},legend:{...(0,An.zp)(f,h,w),data:Array.from(F.keys())},series:I,radar:{shape:C?"circle":"polygon",indicator:Z}},setDataMask:T,labelMap:Object.fromEntries(F),groupby:m,selectedValues:D}}var Qs=o(99834);class Us extends s.Z{constructor(){super({buildQuery:Bs,controlPanel:Ys,loadChart:()=>o.e(616).then(o.bind(o,80616)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Ranking"),credits:["https://echarts.apache.org"],description:(0,l.t)("Visualize a parallel set of metrics across multiple groups. Each group is visualized using its own line of points and each metric is represented as an edge in the chart."),name:(0,l.t)("Radar Chart"),tags:[(0,l.t)("Business"),(0,l.t)("Comparison"),(0,l.t)("Coordinates"),(0,l.t)("Multi-Variables"),(0,l.t)("Report"),(0,l.t)("Web"),(0,l.t)("ECharts")],thumbnail:Qs}),transformProps:Hs})}}var Xs=o(82028),Ks=o(4098);function ec(e){const{adhoc_filters:t,adhoc_filters_b:o,groupby:r,groupby_b:a,limit:i,limit_b:n,timeseries_limit_metric:l,timeseries_limit_metric_b:s,metrics:c,metrics_b:d,order_desc:u,order_desc_b:m,...p}=e;p.is_timeseries=!0;const g={...p,adhoc_filters:t,columns:r,limit:i,timeseries_limit_metric:l,metrics:c,order_desc:u},h={...p,adhoc_filters:o,columns:a,limit:n,timeseries_limit_metric:s,metrics:d,order_desc:m},f=(0,lo.Z)(g,(e=>{const t={...e,is_timeseries:!0,post_processing:[(0,Ks.H)(g,{...e,is_timeseries:!0})]};return[(0,Xs.Z)(t)]})),b=(0,lo.Z)(h,(e=>{const t={...e,is_timeseries:!0,post_processing:[(0,Ks.H)(h,{...e,is_timeseries:!0})]};return[(0,Xs.Z)(t)]}));return{...f,queries:[...f.queries,...b.queries]}}const tc={...En.xo,annotationLayers:[],minorSplitLine:sl.minorSplitLine,truncateYAxis:sl.truncateYAxis,truncateYAxisSecondary:sl.truncateYAxis,logAxis:sl.logAxis,logAxisSecondary:sl.logAxis,yAxisBounds:sl.yAxisBounds,yAxisBoundsSecondary:sl.yAxisBounds,yAxisFormat:sl.yAxisFormat,yAxisFormatSecondary:sl.yAxisFormat,yAxisTitleSecondary:En.f6.yAxisTitle,tooltipTimeFormat:sl.tooltipTimeFormat,xAxisTimeFormat:sl.xAxisTimeFormat,area:sl.area,areaB:sl.area,markerEnabled:sl.markerEnabled,markerEnabledB:sl.markerEnabled,markerSize:sl.markerSize,markerSizeB:sl.markerSize,opacity:sl.opacity,opacityB:sl.opacity,orderDesc:sl.orderDesc,orderDescB:sl.orderDesc,rowLimit:sl.rowLimit,rowLimitB:sl.rowLimit,seriesType:sl.seriesType,seriesTypeB:sl.seriesType,showValue:sl.showValue,showValueB:sl.showValue,stack:sl.stack,stackB:sl.stack,yAxisIndex:0,yAxisIndexB:0,groupby:[],groupbyB:[],zoomable:sl.zoomable,richTooltip:sl.richTooltip,xAxisLabelRotation:sl.xAxisLabelRotation,...En.f6},{area:oc,annotationLayers:rc,logAxis:ac,markerEnabled:ic,markerSize:nc,minorSplitLine:lc,opacity:sc,orderDesc:cc,rowLimit:dc,seriesType:uc,showValues:mc,stack:pc,truncateYAxis:gc,yAxisBounds:hc,zoomable:fc,xAxisLabelRotation:bc,yAxisIndex:yc}=tc;function xc(e,t){return{label:e,expanded:!0,controlSetRows:[[{name:`metrics${t}`,config:jt.Hq.metrics}],[{name:`groupby${t}`,config:jt.Hq.groupby}],[{name:`adhoc_filters${t}`,config:jt.Hq.adhoc_filters}],Gt.a.length>0?[{...Gt.a[0],name:`emit_filter${t}`}]:[],[{name:`limit${t}`,config:jt.Hq.limit}],[{name:`timeseries_limit_metric${t}`,config:jt.Hq.timeseries_limit_metric}],[{name:`order_desc${t}`,config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:cc,description:(0,l.t)("Whether to sort descending or ascending")}}],[{name:`row_limit${t}`,config:{...jt.Hq.row_limit,default:dc}}]]}}function vc(e,t){return[[(0,N.tZ)("h1",{className:"section-header"},e)],[{name:`seriesType${t}`,config:{type:"SelectControl",label:(0,l.t)("Series type"),renderTrigger:!0,default:uc,choices:[[ll.Line,"Line"],[ll.Scatter,"Scatter"],[ll.Smooth,"Smooth Line"],[ll.Bar,"Bar"],[ll.Start,"Step - start"],[ll.Middle,"Step - middle"],[ll.End,"Step - end"]],description:(0,l.t)("Series chart type (line, bar etc)")}}],[{name:`stack${t}`,config:{type:"CheckboxControl",label:(0,l.t)("Stack series"),renderTrigger:!0,default:pc,description:(0,l.t)("Stack series on top of each other")}}],[{name:`area${t}`,config:{type:"CheckboxControl",label:(0,l.t)("Area chart"),renderTrigger:!0,default:oc,description:(0,l.t)("Draw area under curves. Only applicable for line types.")}}],[{name:`show_value${t}`,config:{type:"CheckboxControl",label:(0,l.t)("Show Values"),renderTrigger:!0,default:mc,description:(0,l.t)("Whether to display the numerical values within the cells")}}],[{name:`opacity${t}`,config:{type:"SliderControl",label:(0,l.t)("Opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:sc,description:(0,l.t)("Opacity of area chart.")}}],[{name:`markerEnabled${t}`,config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:ic,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:`markerSize${t}`,config:{type:"SliderControl",label:(0,l.t)("Marker size"),renderTrigger:!0,min:0,max:100,default:nc,description:(0,l.t)("Size of marker. Also applies to forecast observations.")}}],[{name:`yAxisIndex${t}`,config:{type:"SelectControl",label:(0,l.t)("Y Axis"),choices:[[0,(0,l.t)("Primary")],[1,(0,l.t)("Secondary")]],default:yc,clearable:!1,renderTrigger:!0,description:(0,l.t)("Primary or secondary y-axis")}}]]}const _c={controlPanelSections:[p.sections.legacyTimeseriesTime,xc((0,l.t)("Query A"),""),xc((0,l.t)("Query B"),"_b"),{label:(0,l.t)("Annotations and Layers"),expanded:!1,controlSetRows:[[{name:"annotation_layers",config:{type:"AnnotationLayerControl",label:"",default:rc,description:(0,l.t)("Annotation Layers")}}]]},p.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...vc((0,l.t)("Query A"),""),...vc((0,l.t)("Query B"),"B"),[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:fc,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...bl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("X Axis"))],["x_axis_time_format"],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0°"],[45,"45°"]],default:bc,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30°")}}],...Rl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Y Axis"))],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:lc,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:gc,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:hc,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent.")}}],[{name:"y_axis_format",config:{...jt.Hq.y_axis_format,label:(0,l.t)("Primary y-axis format")}}],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:ac,description:(0,l.t)("Logarithmic scale on primary y-axis")}}],[{name:"y_axis_format_secondary",config:{...jt.Hq.y_axis_format,label:(0,l.t)("Secondary y-axis format")}}],[{name:"yAxisTitleSecondary",config:{type:"TextControl",label:(0,l.t)("Secondary y-axis title"),renderTrigger:!0,default:"",description:(0,l.t)("Logarithmic y-axis")}}],[{name:"logAxisSecondary",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:ac,description:(0,l.t)("Logarithmic scale on secondary y-axis")}}]]}]};function wc(e){const{width:t,height:o,formData:r,queriesData:a,hooks:i,filterState:n,datasource:l}=e,{annotation_data:s}=a[0],d=s||{},{verboseMap:u={}}=l,m=a[0].data||[],p=a[1].data||[],{area:g,areaB:h,annotationLayers:f,colorScheme:b,contributionMode:y,legendOrientation:x,legendType:v,logAxis:_,logAxisSecondary:w,markerEnabled:C,markerEnabledB:S,markerSize:T,markerSizeB:k,opacity:A,opacityB:R,minorSplitLine:P,seriesType:L,seriesTypeB:E,showLegend:F,showValue:M,showValueB:D,stack:Z,stackB:I,truncateYAxis:N,tooltipTimeFormat:O,yAxisFormat:B,yAxisFormatSecondary:z,xAxisTimeFormat:V,yAxisBounds:q,yAxisIndex:$,yAxisIndexB:W,yAxisTitleSecondary:j,zoomable:G,richTooltip:Y,tooltipSortByMetric:J,xAxisLabelRotation:H,groupby:Q,groupbyB:U,emitFilter:X,emitFilterB:K,xAxisTitle:ee,yAxisTitle:te,xAxisTitleMargin:oe,yAxisTitleMargin:re,yAxisTitlePosition:ae}={...tc,...r},ie=Io.getScale(b),ne=In(m,u),le=(0,An.Ie)(ne,{fillNeighborValue:Z?0:void 0}),se=In(p,u),ce=(0,An.Ie)(se,{fillNeighborValue:I?0:void 0}),de=[],ue=(0,c.JB)(y?",.0%":B),me=(0,c.JB)(y?",.0%":z),pe=new Set,ge=new Set,he=(e,t)=>{1===t?ge.add(e.id):pe.add(e.id)};le.forEach((e=>he(e,$))),ce.forEach((e=>he(e,W))),le.forEach((e=>{const t=jn(e,ie,{area:g,markerEnabled:C,markerSize:T,areaOpacity:A,seriesType:L,showValue:M,stack:Z,yAxisIndex:$,filterState:n});t&&de.push(t)})),ce.forEach((e=>{const t=jn(e,ie,{area:h,markerEnabled:S,markerSize:k,areaOpacity:R,seriesType:E,showValue:D,stack:I,yAxisIndex:W,filterState:n});t&&de.push(t)})),f.filter((e=>e.show)).forEach((e=>{(0,Pn.x5)(e)?de.push(Gn(e,m,ie)):(0,Pn.Ry)(e)?de.push(...Yn(e,0,d,ie)):(0,Pn.pD)(e)?de.push(...Jn(e,0,d,ie)):(0,Pn.nl)(e)&&de.push(...Hn(e,T,0,d))}));let[fe,be]=(q||[]).map(us);"row"===y&&Z&&(void 0===fe&&(fe=0),void 0===be&&(be=1));const ye=Un(O),xe=Xn(V),ve=Qn(F,x,!(!te&&!j),G,null,!!ee,ae,re,oe),_e=le.reduce(((e,t)=>{const o=t.name;return{...e,[o]:o.split(", ")}}),{}),we=ce.reduce(((e,t)=>{const o=t.name;return{...e,[o]:o.split(", ")}}),{}),{setDataMask:Ce=(()=>{})}=i,Se=$!==W;return{formData:r,width:t,height:o,echartOptions:{useUTC:!0,grid:{...Rn.oe,...ve},xAxis:{type:"time",name:ee,nameGap:oe,nameLocation:"middle",axisLabel:{formatter:xe,rotate:H}},yAxis:[{...Rn.C0,type:_?"log":"value",min:fe,max:be,minorTick:{show:!0},minorSplitLine:{show:P},axisLabel:{formatter:ue},scale:N,name:te,nameGap:re,nameLocation:"Left"===ae?"middle":"end",alignTicks:Se},{...Rn.C0,type:w?"log":"value",min:fe,max:be,minorTick:{show:!0},splitLine:{show:!1},minorSplitLine:{show:P},axisLabel:{formatter:me},scale:N,name:j,alignTicks:Se}],tooltip:{...Rn.Ku,appendToBody:!0,trigger:Y?"axis":"item",formatter:e=>{const t=Y?e[0].value[0]:e.value[0],o=Y?e:[e];Y&&J&&o.sort(((e,t)=>t.data[1]-e.data[1]));const r=[`${ye(t)}`],a=Dn(o);return Object.keys(a).forEach((e=>{const t=a[e],o=Zn({...t,seriesName:e,formatter:pe.has(e)?ue:me});An.aI.name===e?r.push(`<span style="font-weight: 700">${o}</span>`):r.push(`<span style="opacity: 0.7">${o}</span>`)})),r.join("<br />")}},legend:{...(0,An.zp)(v,x,F,G),data:le.concat(ce).filter((e=>Mn(e.name||"").type===En.i1.Observation)).map((e=>e.name||"")).concat($n(f,d))},series:(0,An.IE)(de),toolbox:{show:G,top:Wn.SM.toolboxTop,right:Wn.SM.toolboxRight,feature:{dataZoom:{yAxisIndex:!1,title:{zoom:"zoom area",back:"restore zoom"}}}},dataZoom:G?[{type:"slider",start:Wn.SM.dataZoomStart,end:Wn.SM.dataZoomEnd,bottom:Wn.SM.zoomBottom}]:[]},setDataMask:Ce,emitFilter:X,emitFilterB:K,labelMap:_e,labelMapB:we,groupby:Q,groupbyB:U,seriesBreakdown:le.length,selectedValues:n.selectedValues||[]}}var Cc,Sc=o(11807);class Tc extends s.Z{constructor(){super({buildQuery:ec,controlPanel:_c,loadChart:()=>o.e(704).then(o.bind(o,33738)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,l.t)("Visualize two different time series using the same x-axis time range. Note that each time series can be visualized differently (e.g. 1 using bars and 1 using a line)."),supportedAnnotationTypes:[Pn.JJ.Event,Pn.JJ.Formula,Pn.JJ.Interval,Pn.JJ.Timeseries],name:(0,l.t)("Mixed Time-Series"),thumbnail:Sc,tags:[(0,l.t)("Aesthetic"),(0,l.t)("ECharts"),(0,l.t)("Experimental"),(0,l.t)("Line"),(0,l.t)("Multi-Variables"),(0,l.t)("Predictive"),(0,l.t)("Time"),(0,l.t)("Transformable")]}),transformProps:wc})}}function kc(e){const{metric:t,sort_by_metric:o}=e;return(0,lo.Z)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}!function(e){e.Key="key",e.Value="value",e.Percent="percent",e.KeyValue="key_value",e.KeyPercent="key_percent",e.KeyValuePercent="key_value_percent"}(Cc||(Cc={}));const Ac={...En.xo,donut:!1,groupby:[],innerRadius:30,labelLine:!1,labelType:Cc.Key,legendOrientation:En.IY.Top,legendType:En.HJ.Scroll,numberFormat:"SMART_NUMBER",outerRadius:70,showLabels:!0,labelsOutside:!0,showLabelsThreshold:5,emitFilter:!1,dateFormat:"smart_date"},{donut:Rc,innerRadius:Pc,labelsOutside:Lc,labelType:Ec,labelLine:Fc,outerRadius:Mc,numberFormat:Dc,showLabels:Zc}=Ac,Ic={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metric"],["adhoc_filters"],Gt.a,["row_limit"],[{name:"sort_by_metric",config:{default:!0,type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"show_labels_threshold",config:{type:"TextControl",label:(0,l.t)("Percentage threshold"),renderTrigger:!0,isFloat:!0,default:5,description:(0,l.t)("Minimum threshold in percentage points for showing labels.")}}],...bl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Labels"))],[{name:"label_type",config:{type:"SelectControl",label:(0,l.t)("Label Type"),default:Ec,renderTrigger:!0,choices:[["key","Category Name"],["value","Value"],["percent","Percentage"],["key_value","Category and Value"],["key_percent","Category and Percentage"],["key_value_percent","Category, Value and Percentage"]],description:(0,l.t)("What should be shown on the label?")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:Dc,choices:h.F6,description:`${(0,l.t)("D3 format syntax: https://github.com/d3/d3-format")} ${(0,l.t)('Only applies when "Label Type" is set to show values.')}`}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}}],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Labels"),renderTrigger:!0,default:Zc,description:(0,l.t)("Whether to display the labels.")}}],[{name:"labels_outside",config:{type:"CheckboxControl",label:(0,l.t)("Put labels outside"),default:Lc,renderTrigger:!0,description:(0,l.t)("Put the labels outside of the pie?"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_labels)?void 0:t.value)}}}],[{name:"label_line",config:{type:"CheckboxControl",label:(0,l.t)("Label Line"),default:Fc,renderTrigger:!0,description:(0,l.t)("Draw line from Pie to label when labels outside?"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_labels)?void 0:t.value)}}}],[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Pie shape"))],[{name:"outerRadius",config:{type:"SliderControl",label:(0,l.t)("Outer Radius"),renderTrigger:!0,min:10,max:100,step:1,default:Mc,description:(0,l.t)("Outer edge of Pie chart")}}],[{name:"donut",config:{type:"CheckboxControl",label:(0,l.t)("Donut"),default:Rc,renderTrigger:!0,description:(0,l.t)("Do you want a donut or a pie?")}}],[{name:"innerRadius",config:{type:"SliderControl",label:(0,l.t)("Inner Radius"),renderTrigger:!0,min:0,max:100,step:1,default:Pc,description:(0,l.t)("Inner radius of donut hole"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.donut)?void 0:t.value)}}}]]}],controlOverrides:{series:{validators:[C.Z],clearable:!1},row_limit:{default:100}}},Nc=Ic,Oc=(0,c.JB)(St.Z.PERCENT_2_POINT);function Bc({params:e,labelType:t,numberFormatter:o,sanitizeName:r=!1}){const{name:a="",value:i,percent:n}=e,l=r?(0,An.Z6)(a):a,s=o(i),c=Oc(n/100);switch(t){case Cc.Key:return l;case Cc.Value:return s;case Cc.Percent:return c;case Cc.KeyValue:return`${l}: ${s}`;case Cc.KeyValuePercent:return`${l}: ${s} (${c})`;case Cc.KeyPercent:return`${l}: ${c}`;default:return l}}function zc(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:i,width:n}=e,{data:l=[]}=i[0],s=(0,An.IW)(i[0]),{colorScheme:u,donut:m,groupby:p,innerRadius:g,labelsOutside:h,labelLine:f,labelType:b,legendMargin:y,legendOrientation:x,legendType:v,metric:_="",numberFormat:w,dateFormat:C,outerRadius:S,showLabels:T,showLegend:k,showLabelsThreshold:A,emitFilter:R}={...En.xo,...Ac,...t},P=(0,At.Z)(_),L=p.map(kn.Z),E=3.6*(A||0),F=l.map((e=>(0,An.iw)({datum:e,groupby:L,coltypeMapping:s,timeFormatter:(0,d.bt)(C)}))),M=l.reduce(((e,t)=>({...e,[(0,An.iw)({datum:t,groupby:L,coltypeMapping:s,timeFormatter:(0,d.bt)(C)})]:L.map((e=>t[e]))})),{}),{setDataMask:D=(()=>{})}=r,Z=Io.getScale(u),I=(0,c.JB)(w),N=l.map((e=>{const t=(0,An.iw)({datum:e,groupby:L,coltypeMapping:s,timeFormatter:(0,d.bt)(C)}),o=a.selectedValues&&!a.selectedValues.includes(t);return{value:e[P],name:t,itemStyle:{color:Z(t),opacity:o?Wn.ZV.SemiTransparent:Wn.ZV.NonTransparent}}})),O=(a.selectedValues||[]).reduce(((e,t)=>({...e,[N.findIndex((({name:e})=>e===t))]:t})),{}),B={formatter:e=>Bc({params:e,numberFormatter:I,labelType:b}),show:T,color:"#000000"},z=[{type:"pie",...(0,An.G_)(k,x,y),animation:!1,radius:[`${m?g:0}%`,`${S}%`],center:["50%","50%"],avoidLabelOverlap:!0,labelLine:h&&f?{show:!0}:{show:!1},minShowLabelAngle:E,label:h?{...B,position:"outer",alignTo:"none",bleedMargin:5}:{...B,position:"inner"},emphasis:{label:{show:!0,fontWeight:"bold",backgroundColor:"white"}},data:N}];return{formData:t,width:n,height:o,echartOptions:{grid:{...Rn.oe},tooltip:{...Rn.Ku,trigger:"item",formatter:e=>Bc({params:e,numberFormatter:I,labelType:Cc.KeyValuePercent,sanitizeName:!0})},legend:{...(0,An.zp)(v,x,k),data:F},series:z},setDataMask:D,emitFilter:R,labelMap:M,groupby:p,selectedValues:O}}var Vc=o(98257),qc=o(21738),$c=o(44718),Wc=o(51318),jc=o(63549);class Gc extends s.Z{constructor(){super({buildQuery:kc,controlPanel:Nc,loadChart:()=>o.e(3711).then(o.bind(o,33711)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,l.t)("The classic. Great for showing how much of a company each investor gets, what demographics follow your blog, or what portion of the budget goes to the military industrial complex.\n\n        Pie charts can be difficult to interpret precisely. If clarity of relative proportion is important, consider using a bar or other chart type instead."),exampleGallery:[{url:qc},{url:$c},{url:Wc},{url:jc}],name:(0,l.t)("Pie Chart"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Categorical"),(0,l.t)("Circular"),(0,l.t)("Comparison"),(0,l.t)("Percentages"),(0,l.t)("Popular"),(0,l.t)("Proportional"),(0,l.t)("ECharts")],thumbnail:Vc}),transformProps:zc})}}var Yc=o(62363),Jc=o(96709),Hc=o(99343),Qc=o(60955),Uc=o(44928),Xc=o(69862),Kc=o(37701);function ed(e){const{x_axis:t,groupby:o}=e,r=t===Ui.W3||!t;return(0,lo.Z)(e,(a=>{const i=(0,Ks.H)(e,{...a,index:t,is_timeseries:r});return i&&Object.values(Yc.su).includes(e.rolling_type)&&(i.options={...i.options,flatten_columns:!1,reset_index:!1}),[{...a,columns:[...(0,$t.Z)(t),...(0,$t.Z)(o)],series_columns:o,is_timeseries:r,orderby:(0,Xs.Z)(a).orderby,time_offsets:(0,Jc.A)(e,a)?e.time_compare:[],post_processing:[(0,Hc.X)(e,a),(0,Qc.N)(e,a),(0,Uc.C)(e,{...a,is_timeseries:!0}),i,(0,sn.V)(e,a),(0,Xc.I)(e,a),(0,Kc.D)(e,a)]}]}))}const{contributionMode:td,logAxis:od,markerEnabled:rd,markerSize:ad,minorSplitLine:id,opacity:nd,rowLimit:ld,seriesType:sd,truncateYAxis:cd,yAxisBounds:dd,zoomable:ud,xAxisLabelRotation:md}=sl,pd={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[(0,i.c)(i.T.GENERIC_CHART_AXES)?[_l]:[],["metrics"],["groupby"],[{name:"contributionMode",config:{type:"SelectControl",label:(0,l.t)("Contribution Mode"),default:td,choices:[[null,"None"],[nl.Row,"Total"],[nl.Column,"Series"]],description:(0,l.t)("Calculate contribution per series or total")}}],["adhoc_filters"],Gt.a,["limit"],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}],["row_limit"]]},p.sections.advancedAnalyticsControls,p.sections.annotationsAndLayersControls,p.sections.forecastIntervalControls,p.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"seriesType",config:{type:"SelectControl",label:(0,l.t)("Series Style"),renderTrigger:!0,default:sd,choices:[[ll.Line,"Line"],[ll.Smooth,"Smooth Line"],[ll.Start,"Step - start"],[ll.Middle,"Step - middle"],[ll.End,"Step - end"]],description:(0,l.t)("Series chart type (line, bar etc)")}}],[{name:"opacity",config:{type:"SliderControl",label:(0,l.t)("Area chart opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:nd,description:(0,l.t)("Opacity of Area Chart. Also applies to confidence band.")}}],...Cl,[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:rd,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:ad,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:ud,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...bl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...jt.Hq.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${(0,l.t)("When using other than adaptive formatting, labels may overlap.")}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0°"],[45,"45°"]],default:md,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30°")}}],...Rl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:od,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:id,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:cd,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:dd,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:ld}}},gd=pd;function hd(e){const{width:t,height:o,filterState:r,formData:a,hooks:i,queriesData:n,datasource:l}=e,{verboseMap:s={}}=l,[d]=n,{annotation_data:u,data:m=[]}=d,p=(0,An.IW)(d),g=u||{},{area:h,annotationLayers:f,colorScheme:b,contributionMode:y,forecastEnabled:x,legendOrientation:v,legendType:_,legendMargin:w,logAxis:C,markerEnabled:S,markerSize:T,opacity:k,minorSplitLine:A,seriesType:R,showLegend:P,stack:L,truncateYAxis:E,yAxisFormat:F,xAxisTimeFormat:M,yAxisBounds:D,tooltipTimeFormat:Z,tooltipSortByMetric:I,zoomable:N,richTooltip:O,xAxis:B,xAxisLabelRotation:z,emitFilter:V,groupby:q,showValue:$,onlyTotal:W,percentageThreshold:j,xAxisTitle:G,yAxisTitle:Y,xAxisTitleMargin:J,yAxisTitleMargin:H,yAxisTitlePosition:Q}={...sl,...a},U=Io.getScale(b),X=In(m,s),K=B||Ui.W3,ee=(0,An.Ie)(X,{fillNeighborValue:L&&!x?0:void 0,xAxis:K,removeNulls:R===ll.Scatter}),te=(oe=Object.values(ee).map((e=>e.name)),oe.reduce(((e,t)=>{const o=Mn(t),r=e[o.name]||[];return r.push(o.type),{...e,[o.name]:r}}),{}));var oe;const re=null==p?void 0:p[K];let ae;switch(re){case kt.Z.TEMPORAL:ae="time";break;case kt.Z.NUMERIC:ae="value";break;default:ae="category"}const ie=[],ne=(0,c.JB)(y?",.0%":F),le=[],se=[],ce=[];X.forEach((e=>{const t=Object.keys(e).reduce(((t,o)=>o===K?t:t+(e[o]||0)),0);le.push(t),ce.push((j||0)/100*t)})),L&&ee.forEach(((e,t)=>{const{data:o=[]}=e;o.forEach(((e,o)=>{null!==e[1]&&(se[o]=t)}))})),ee.forEach((e=>{const t=jn(e,U,{area:h,filterState:r,seriesContexts:te,markerEnabled:S,markerSize:T,areaOpacity:k,seriesType:R,stack:L,formatter:ne,showValue:$,onlyTotal:W,totalStackedValues:le,showValueIndexes:se,thresholdValues:ce,richTooltip:O});t&&ie.push(t)}));const de=(r.selectedValues||[]).reduce(((e,t)=>({...e,[ie.findIndex((({name:e})=>e===t))]:t})),{});f.filter((e=>e.show)).forEach((e=>{(0,Pn.x5)(e)?ie.push(Gn(e,m,U)):(0,Pn.Ry)(e)?ie.push(...Yn(e,0,g,U)):(0,Pn.pD)(e)?ie.push(...Jn(e,0,g,U)):(0,Pn.nl)(e)&&ie.push(...Hn(e,T,0,g))}));let[ue,me]=(D||[]).map(us);"row"===y&&L&&(void 0===ue&&(ue=0),void 0===me&&(me=1));const pe=re===kt.Z.TEMPORAL?Un(Z):String,ge=re===kt.Z.TEMPORAL?Xn(M):String,he=ie.reduce(((e,t)=>{const o=t.name;return{...e,[o]:[o]}}),{}),{setDataMask:fe=(()=>{})}=i,be=Qn(P,v,!!Y,N,w,!!G,Q,H,J),ye=ee.filter((e=>Mn(e.name||"").type===En.i1.Observation)).map((e=>e.name||"")).concat($n(f,g));return{echartOptions:{useUTC:!0,grid:{...Rn.oe,...be},xAxis:{type:ae,name:G,nameGap:J,nameLocation:"middle",axisLabel:{hideOverlap:!0,formatter:ge,rotate:z}},yAxis:{...Rn.C0,type:C?"log":"value",min:ue,max:me,minorTick:{show:!0},minorSplitLine:{show:A},axisLabel:{formatter:ne},scale:E,name:Y,nameGap:H,nameLocation:"Left"===Q?"middle":"end"},tooltip:{...Rn.Ku,appendToBody:!0,trigger:O?"axis":"item",formatter:e=>{const t=O?e[0].value[0]:e.value[0],o=O?e:[e];O&&I&&o.sort(((e,t)=>t.data[1]-e.data[1]));const r=[`${pe(t)}`],a=Dn(o);return Object.keys(a).forEach((e=>{const t=a[e],o=Zn({...t,seriesName:e,formatter:ne});An.aI.name===e?r.push(`<span style="font-weight: 700">${o}</span>`):r.push(`<span style="opacity: 0.7">${o}</span>`)})),r.join("<br />")}},legend:{...(0,An.zp)(_,v,P,N),data:ye},series:(0,An.IE)(ie),toolbox:{show:N,top:Wn.SM.toolboxTop,right:Wn.SM.toolboxRight,feature:{dataZoom:{yAxisIndex:!1,title:{zoom:"zoom area",back:"restore zoom"}}}},dataZoom:N?[{type:"slider",start:Wn.SM.dataZoomStart,end:Wn.SM.dataZoomEnd,bottom:Wn.SM.zoomBottom}]:[]},emitFilter:V,formData:a,groupby:q,height:o,labelMap:he,selectedValues:de,setDataMask:fe,width:t,legendData:ye}}var fd=o(6999),bd=o(1187);const yd=e=>hd({...e,formData:{...e.formData,area:!0}});class xd extends s.Z{constructor(){super({buildQuery:ed,controlPanel:gd,loadChart:()=>o.e(8371).then(o.bind(o,88371)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Area charts are similar to line charts in that they represent variables with the same scale, but area charts stack the metrics on top of each other."):(0,l.t)("Time-series Area chart are similar to line chart in that they represent variables with the same scale, but area charts stack the metrics on top of each other. An area chart in Superset can be stream, stack, or expand."),exampleGallery:[{url:bd}],supportedAnnotationTypes:[Pn.JJ.Event,Pn.JJ.Formula,Pn.JJ.Interval,Pn.JJ.Timeseries],name:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Area Chart v2"):(0,l.t)("Time-series Area Chart"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Time"),(0,l.t)("Line"),(0,l.t)("Transformable"),(0,l.t)("Stacked"),(0,l.t)("Popular")],thumbnail:fd}),transformProps:yd})}}const{area:vd,contributionMode:_d,logAxis:wd,markerEnabled:Cd,markerSize:Sd,minorSplitLine:Td,opacity:kd,rowLimit:Ad,seriesType:Rd,truncateYAxis:Pd,yAxisBounds:Ld,zoomable:Ed,xAxisLabelRotation:Fd}=sl,Md={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[(0,i.c)(i.T.GENERIC_CHART_AXES)?[_l]:[],["metrics"],["groupby"],[{name:"contributionMode",config:{type:"SelectControl",label:(0,l.t)("Contribution Mode"),default:_d,choices:[[null,"None"],[nl.Row,"Total"],[nl.Column,"Series"]],description:(0,l.t)("Calculate contribution per series or total")}}],["adhoc_filters"],Gt.a,["limit"],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}],["row_limit"]]},p.sections.advancedAnalyticsControls,p.sections.annotationsAndLayersControls,p.sections.forecastIntervalControls,p.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"seriesType",config:{type:"SelectControl",label:(0,l.t)("Series Style"),renderTrigger:!0,default:Rd,choices:[[ll.Line,"Line"],[ll.Scatter,"Scatter"],[ll.Smooth,"Smooth Line"],[ll.Bar,"Bar"],[ll.Start,"Step - start"],[ll.Middle,"Step - middle"],[ll.End,"Step - end"]],description:(0,l.t)("Series chart type (line, bar etc)")}}],...Cl,[{name:"area",config:{type:"CheckboxControl",label:(0,l.t)("Area Chart"),renderTrigger:!0,default:vd,description:(0,l.t)("Draw area under curves. Only applicable for line types.")}}],[{name:"opacity",config:{type:"SliderControl",label:(0,l.t)("Area chart opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:kd,description:(0,l.t)("Opacity of Area Chart. Also applies to confidence band."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.area)?void 0:t.value)}}}],[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:Cd,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:Sd,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:Ed,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...bl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...jt.Hq.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${(0,l.t)("When using other than adaptive formatting, labels may overlap.")}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0°"],[45,"45°"]],default:Fd,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30°")}}],...Rl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:wd,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:Td,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:Pd,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:Ld,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:Ad}}},Dd=Md;var Zd=o(71425),Id=o(25486);class Nd extends s.Z{constructor(){super({buildQuery:ed,controlPanel:Dd,loadChart:()=>o.e(8371).then(o.bind(o,88371)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Swiss army knife for visualizing data. Choose between  step, line, scatter, and bar charts. This viz type has many customization options as well."):(0,l.t)("Swiss army knife for visualizing time series data. Choose between  step, line, scatter, and bar charts. This viz type has many customization options as well."),exampleGallery:[{url:Id}],supportedAnnotationTypes:[Pn.JJ.Event,Pn.JJ.Formula,Pn.JJ.Interval,Pn.JJ.Timeseries],name:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Generic Chart"):(0,l.t)("Time-series Chart"),tags:[(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Line"),(0,l.t)("Predictive"),(0,l.t)("Time"),(0,l.t)("Transformable")],thumbnail:Zd}),transformProps:hd})}}const{contributionMode:Od,logAxis:Bd,markerEnabled:zd,markerSize:Vd,minorSplitLine:qd,rowLimit:$d,truncateYAxis:Wd,yAxisBounds:jd,zoomable:Gd,xAxisLabelRotation:Yd}=sl,Jd={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[(0,i.c)(i.T.GENERIC_CHART_AXES)?[_l]:[],["metrics"],["groupby"],[{name:"contributionMode",config:{type:"SelectControl",label:(0,l.t)("Contribution Mode"),default:Od,choices:[[null,"None"],[nl.Row,"Total"],[nl.Column,"Series"]],description:(0,l.t)("Calculate contribution per series or total")}}],["adhoc_filters"],Gt.a,["limit"],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}],["row_limit"]]},p.sections.advancedAnalyticsControls,p.sections.annotationsAndLayersControls,p.sections.forecastIntervalControls,p.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...Cl,[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:zd,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:Vd,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:Gd,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...bl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...jt.Hq.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${(0,l.t)("When using other than adaptive formatting, labels may overlap.")}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0°"],[45,"45°"]],default:Yd,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30°")}}],...Rl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:Bd,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:qd,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:Wd,renderTrigger:!0,description:(0,l.t)("It’s not recommended to truncate y-axis in Bar chart.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:jd,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:$d}}},Hd=Jd;var Qd=o(75553),Ud=o(90806),Xd=o(64301),Kd=o(74392);const eu=e=>hd({...e,formData:{...e.formData,seriesType:ll.Bar}});class tu extends s.Z{constructor(){super({buildQuery:ed,controlPanel:Hd,loadChart:()=>o.e(8371).then(o.bind(o,88371)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Bar Charts are used to show metrics as a series of bars."):(0,l.t)("Time-series Bar Charts are used to show the changes in a metric over time as a series of bars."),exampleGallery:[{url:Ud},{url:Xd},{url:Kd}],supportedAnnotationTypes:[Pn.JJ.Event,Pn.JJ.Formula,Pn.JJ.Interval,Pn.JJ.Timeseries],name:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Bar Chart v2"):(0,l.t)("Time-series Bar Chart v2"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Time"),(0,l.t)("Transformable"),(0,l.t)("Stacked"),(0,l.t)("Vertical"),(0,l.t)("Bar"),(0,l.t)("Popular")],thumbnail:Qd}),transformProps:eu})}}const{contributionMode:ou,logAxis:ru,markerEnabled:au,markerSize:iu,minorSplitLine:nu,rowLimit:lu,truncateYAxis:su,yAxisBounds:cu,zoomable:du,xAxisLabelRotation:uu}=sl,mu={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[(0,i.c)(i.T.GENERIC_CHART_AXES)?[_l]:[],["metrics"],["groupby"],[{name:"contributionMode",config:{type:"SelectControl",label:(0,l.t)("Contribution Mode"),default:ou,choices:[[null,"None"],[nl.Row,"Total"],[nl.Column,"Series"]],description:(0,l.t)("Calculate contribution per series or total")}}],["adhoc_filters"],Gt.a,["limit"],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}],["row_limit"]]},p.sections.advancedAnalyticsControls,p.sections.annotationsAndLayersControls,p.sections.forecastIntervalControls,p.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...Sl,[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:au,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:iu,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:du,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...bl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...jt.Hq.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${(0,l.t)("When using other than adaptive formatting, labels may overlap.")}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0°"],[45,"45°"]],default:uu,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30°")}}],...Rl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:ru,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:nu,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:su,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:cu,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:lu}}},pu=mu;var gu=o(27371),hu=o(5489),fu=o(10006);const bu=e=>hd({...e,formData:{...e.formData,seriesType:ll.Line}});class yu extends s.Z{constructor(){super({buildQuery:ed,controlPanel:pu,loadChart:()=>o.e(8371).then(o.bind(o,88371)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Line chart is used to visualize measurements taken over a given category. Line chart is a type of chart which displays information as a series of data points connected by straight line segments. It is a basic type of chart common in many fields."):(0,l.t)("Time-series line chart is used to visualize repeated measurements taken over regular time intervals. Line chart is a type of chart which displays information as a series of data points connected by straight line segments. It is a basic type of chart common in many fields."),exampleGallery:[{url:hu},{url:fu}],supportedAnnotationTypes:[Pn.JJ.Event,Pn.JJ.Formula,Pn.JJ.Interval,Pn.JJ.Timeseries],name:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Line Chart"):(0,l.t)("Time-series Line Chart"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Line"),(0,l.t)("Popular")],thumbnail:gu}),transformProps:bu})}}var xu=o(46568),vu=o(77338);const _u=e=>hd({...e,formData:{...e.formData,seriesType:ll.Smooth}});class wu extends s.Z{constructor(){super({buildQuery:ed,controlPanel:pu,loadChart:()=>o.e(8371).then(o.bind(o,88371)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Smooth-line is a variation of the line chart. Without angles and hard edges, Smooth-line sometimes looks smarter and more professional."):(0,l.t)("Time-series Smooth-line is a variation of the line chart. Without angles and hard edges, Smooth-line sometimes looks smarter and more professional."),exampleGallery:[{url:vu}],supportedAnnotationTypes:[Pn.JJ.Event,Pn.JJ.Formula,Pn.JJ.Interval,Pn.JJ.Timeseries],name:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Smooth Line"):(0,l.t)("Time-series Smooth Line"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Time"),(0,l.t)("Line"),(0,l.t)("Transformable")],thumbnail:xu}),transformProps:_u})}}const{logAxis:Cu,markerEnabled:Su,markerSize:Tu,minorSplitLine:ku,rowLimit:Au,truncateYAxis:Ru,yAxisBounds:Pu,zoomable:Lu,xAxisLabelRotation:Eu}=sl,Fu={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[(0,i.c)(i.T.GENERIC_CHART_AXES)?[_l]:[],["metrics"],["groupby"],["adhoc_filters"],Gt.a,["limit"],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}],["row_limit"]]},p.sections.advancedAnalyticsControls,p.sections.annotationsAndLayersControls,p.sections.forecastIntervalControls,p.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...Cl,[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:Su,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:100,default:Tu,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:Lu,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...bl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...jt.Hq.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${(0,l.t)("When using other than adaptive formatting, labels may overlap.")}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0°"],[45,"45°"]],default:Eu,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30°")}}],...Rl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:Cu,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:ku,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:Ru,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:Pu,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:Au}}},Mu=Fu;var Du=o(26619),Zu=o(995);const Iu=e=>hd({...e,formData:{...e.formData,seriesType:ll.Scatter}});class Nu extends s.Z{constructor(){super({buildQuery:ed,controlPanel:Mu,loadChart:()=>o.e(8371).then(o.bind(o,88371)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Scatter Plot has the horizontal axis in linear units, and the points are connected in order. It shows a statistical relationship between two variables."):(0,l.t)("Time-series Scatter Plot has time on the horizontal axis in linear units, and the points are connected in order. It shows a statistical relationship between two variables."),exampleGallery:[{url:Zu}],supportedAnnotationTypes:[Pn.JJ.Event,Pn.JJ.Formula,Pn.JJ.Interval,Pn.JJ.Timeseries],name:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Scatter Plot"):(0,l.t)("Time-series Scatter Plot"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Time"),(0,l.t)("Transformable"),(0,l.t)("Scatter"),(0,l.t)("Popular")],thumbnail:Du}),transformProps:Iu})}}const{area:Ou,contributionMode:Bu,logAxis:zu,markerEnabled:Vu,markerSize:qu,minorSplitLine:$u,opacity:Wu,rowLimit:ju,truncateYAxis:Gu,yAxisBounds:Yu,zoomable:Ju,xAxisLabelRotation:Hu}=sl,Qu={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[(0,i.c)(i.T.GENERIC_CHART_AXES)?[_l]:[],["metrics"],["groupby"],[{name:"contributionMode",config:{type:"SelectControl",label:(0,l.t)("Contribution Mode"),default:Bu,choices:[[null,"None"],[nl.Row,"Total"],[nl.Column,"Series"]],description:(0,l.t)("Calculate contribution per series or total")}}],["adhoc_filters"],Gt.a,["limit"],["timeseries_limit_metric"],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean(null==e?void 0:e.timeseries_limit_metric.value)}}],["row_limit"]]},p.sections.advancedAnalyticsControls,p.sections.annotationsAndLayersControls,p.sections.forecastIntervalControls,p.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"seriesType",config:{type:"SelectControl",label:(0,l.t)("Step type"),renderTrigger:!0,default:ll.Start,choices:[[ll.Start,"Start"],[ll.Middle,"Middle"],[ll.End,"End"]],description:(0,l.t)("Defines whether the step should appear at the beginning, middle or end between two data points")}}],...Cl,[{name:"area",config:{type:"CheckboxControl",label:(0,l.t)("Area Chart"),renderTrigger:!0,default:Ou,description:(0,l.t)("Draw area under curves. Only applicable for line types.")}}],[{name:"opacity",config:{type:"SliderControl",label:(0,l.t)("Area chart opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:Wu,description:(0,l.t)("Opacity of Area Chart. Also applies to confidence band."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.area)?void 0:t.value)}}}],[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:Vu,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:qu,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:Ju,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...bl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...jt.Hq.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${(0,l.t)("When using other than adaptive formatting, labels may overlap.")}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0°"],[45,"45°"]],default:Hu,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30°")}}],...Rl,[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:zu,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:$u,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:Gu,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:Yu,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:ju}}},Uu=Qu;var Xu=o(94843),Ku=o(49197),em=o(48977);class tm extends s.Z{constructor(){super({buildQuery:ed,controlPanel:Uu,loadChart:()=>o.e(8371).then(o.bind(o,88371)),metadata:new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Stepped-line graph (also called step chart) is a variation of line chart but with the line forming a series of steps between data points. A step chart can be useful when you want to show the changes that occur at irregular intervals."):(0,l.t)("Time-series Stepped-line graph (also called step chart) is a variation of line chart but with the line forming a series of steps between data points. A step chart can be useful when you want to show the changes that occur at irregular intervals."),exampleGallery:[{url:Ku},{url:em}],supportedAnnotationTypes:[Pn.JJ.Event,Pn.JJ.Formula,Pn.JJ.Interval,Pn.JJ.Timeseries],name:(0,i.c)(i.T.GENERIC_CHART_AXES)?(0,l.t)("Stepped Line"):(0,l.t)("Time-series Stepped Line"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Time"),(0,l.t)("Transformable"),(0,l.t)("Stacked")],thumbnail:Xu}),transformProps:hd})}}const om={id:"",parent:"",name:"",rootNodeId:"",layout:"orthogonal",orient:"LR",symbol:"emptyCircle",symbolSize:7,roam:!0,nodeLabelPosition:"left",childLabelPosition:"bottom",emphasis:"descendant"},rm={...jt.Hq.entity,clearable:!1},am={...jt.Hq.entity,clearable:!0,validators:[]},im={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"id",config:{...rm,label:(0,l.t)("Id"),description:(0,l.t)("Name of the id column")}}],[{name:"parent",config:{...rm,label:(0,l.t)("Parent"),description:(0,l.t)("Name of the column containing the id of the parent node")}}],[{name:"name",config:{...am,label:(0,l.t)("Name"),description:(0,l.t)("Optional name of the data column.")}}],[{name:"root_node_id",config:{...am,renderTrigger:!0,type:"TextControl",label:(0,l.t)("Root node id"),description:(0,l.t)("Id of root node of the tree.")}}],[{name:"metric",config:{...am,type:(0,i.c)(i.T.ENABLE_EXPLORE_DRAG_AND_DROP)?"DndMetricSelect":"MetricsControl",label:(0,l.t)("Metric"),description:(0,l.t)("Metric for node values")}}],["adhoc_filters"],["row_limit"]]},{label:(0,l.t)("Chart options"),expanded:!0,controlSetRows:[[(0,N.tZ)("h1",{className:"section-header"},(0,l.t)("Layout"))],[{name:"layout",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Tree layout"),default:om.layout,options:[["orthogonal",(0,l.t)("Orthogonal")],["radial",(0,l.t)("Radial")]],description:(0,l.t)("Layout type of tree")}}],[{name:"orient",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Tree orientation"),default:om.orient,options:[["LR",(0,l.t)("Left to Right")],["RL",(0,l.t)("Right to Left")],["TB",(0,l.t)("Top to Bottom")],["BT",(0,l.t)("Bottom to Top")]],description:(0,l.t)("Orientation of tree"),visibility:({form_data:{layout:e}})=>"orthogonal"===(e||om.layout)}}],[{name:"node_label_position",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Node label position"),default:om.nodeLabelPosition,options:[["left",(0,l.t)("left")],["top",(0,l.t)("top")],["right",(0,l.t)("right")],["bottom",(0,l.t)("bottom")]],description:(0,l.t)("Position of intermidiate node label on tree")}}],[{name:"child_label_position",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Child label position"),default:om.childLabelPosition,options:[["left",(0,l.t)("left")],["top",(0,l.t)("top")],["right",(0,l.t)("right")],["bottom",(0,l.t)("bottom")]],description:(0,l.t)("Position of child node label on tree")}}],[{name:"emphasis",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Emphasis"),default:om.emphasis,options:[["ancestor",(0,l.t)("ancestor")],["descendant",(0,l.t)("descendant")]],description:(0,l.t)("Which relatives to highlight on hover"),visibility:({form_data:{layout:e}})=>"orthogonal"===(e||om.layout)}}],[{name:"symbol",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Symbol"),default:om.symbol,options:[{label:(0,l.t)("Empty circle"),value:"emptyCircle"},{label:(0,l.t)("Circle"),value:"circle"},{label:(0,l.t)("Rectangle"),value:"rect"},{label:(0,l.t)("Triangle"),value:"triangle"},{label:(0,l.t)("Diamond"),value:"diamond"},{label:(0,l.t)("Pin"),value:"pin"},{label:(0,l.t)("Arrow"),value:"arrow"},{label:(0,l.t)("None"),value:"none"}],description:(0,l.t)("Layout type of tree")}}],[{name:"symbolSize",config:{type:"SliderControl",label:(0,l.t)("Symbol size"),renderTrigger:!0,min:5,max:30,step:2,default:om.symbolSize,description:(0,l.t)("Size of edge symbols")}}],[{name:"roam",config:{type:"SelectControl",label:(0,l.t)("Enable graph roaming"),renderTrigger:!0,default:om.roam,choices:[[!1,(0,l.t)("Disabled")],["scale",(0,l.t)("Scale only")],["move",(0,l.t)("Move only")],[!0,(0,l.t)("Scale and Move")]],description:(0,l.t)("Whether to enable changing graph position and scaling.")}}]]}]},nm={label:{position:"left",fontSize:15},animation:!0,animationDuration:500,animationEasing:"cubicOut",lineStyle:{color:"source",width:1.5}};function lm(e){const{width:t,height:o,formData:r,queriesData:a}=e,i=a[0].data||[],{id:n,parent:l,name:s,metric:c="",rootNodeId:d,layout:u,orient:m,symbol:p,symbolSize:g,roam:h,nodeLabelPosition:f,childLabelPosition:b,emphasis:y}={...om,...r},x=(0,At.Z)(c),v=s||n;function _(e){const t=function(e){let t="";return i.some((o=>o[n].toString()===e&&(t=o[v],!0))),t}(e),o={name:t,children:[]},r=[],a={};if(!t)return o;for(let e=0;e<i.length;e+=1)a[i[e][n]]=e,r[e]=[];for(let t=0;t<i.length;t+=1){var s;const n=i[t];if((null==(s=n[l])?void 0:s.toString())===e){var c;null==(c=o.children)||c.push({name:n[v],children:r[t],value:n[x]})}else{const e=n[l];i[a[e]]&&r[a[e]].push({name:n[v],children:r[t],value:n[x]})}}return o}let w={};if(d)w=_(d);else{const e={};i.forEach((t=>{const o=t[l];o in e?e[o].push({id:t[n]}):e[o]=[{id:t[n]}]}));let t=0;Object.keys(e).forEach((o=>{if(1===e[o].length){const r=_(e[o][0].id),a=function(e){let t=0;return function e(o){o.children.forEach((t=>{e(t)})),t+=1}(e),t}(r);a>t&&(t=a,w=r)}}))}const C=[{type:"tree",data:[w],label:{...nm.label,position:f},emphasis:{focus:y},animation:nm.animation,layout:u,orient:m,symbol:p,roam:h,symbolSize:g,lineStyle:nm.lineStyle,select:nm.select,leaves:{label:{position:b}}}],S={animationDuration:nm.animationDuration,animationEasing:nm.animationEasing,series:C,tooltip:{trigger:"item",triggerOn:"mousemove",formatter:e=>function({params:e,metricLabel:t}){const{value:o,treeAncestors:r}=e;return[`<div>${(null!=r?r:[]).map((e=>(null==e?void 0:e.name)||"")).filter((e=>""!==e)).join(" ▸ ")}</div>`,o?`${t}: ${o}`:""].join("")}({params:e,metricLabel:x})}};return{width:t,height:o,echartOptions:S}}var sm=o(90370),cm=o(2914);function dm(e){return(0,lo.Z)(e,{queryFields:{id:"columns",parent:"columns",name:"columns"}})}class um extends s.Z{constructor(){super({buildQuery:dm,controlPanel:im,loadChart:()=>o.e(1130).then(o.bind(o,81130)),metadata:new n.Z({category:(0,l.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,l.t)("Visualize multiple levels of hierarchy using a familiar tree-like structure."),exampleGallery:[{url:cm}],name:(0,l.t)("Tree Chart"),tags:[(0,l.t)("Categorical"),(0,l.t)("ECharts"),(0,l.t)("Multi-Levels"),(0,l.t)("Relational"),(0,l.t)("Structural")],thumbnail:sm}),transformProps:lm})}}var mm=o(72813);const pm={defaultValue:null,enableEmptyFilter:!1,inverseSelection:!1,defaultToFirstItem:!1,multiSelect:!0,searchAllOptions:!1,sortAscending:!0},gm=(e,t)=>{const{search:o,coltypeMap:r}=(null==t?void 0:t.ownState)||{},{sortAscending:a,sortMetric:i}={...pm,...e};return(0,lo.Z)(e,(e=>{const{columns:t=[],filters:n=[]}=e,l=[];o&&t.filter(mm.s).forEach((e=>{const t=(0,kn.Z)(e);r[t]===kt.Z.STRING?l.push({col:e,op:"ILIKE",val:`%${o}%`}):r[t]!==kt.Z.NUMERIC||Number.isNaN(Number(o))||l.push({col:e,op:">=",val:Number(o)})}));const s=i?[i]:t;return[{...e,groupby:t,metrics:i?[i]:[],filters:n.concat(l),orderby:i||void 0!==a?s.map((e=>[e,!!a])):[]}]}))},{enableEmptyFilter:hm,inverseSelection:fm,multiSelect:bm,defaultToFirstItem:ym,searchAllOptions:xm,sortAscending:vm}=pm,_m={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...jt.Hq.groupby,label:"Column",required:!0}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"sortAscending",config:{type:"CheckboxControl",renderTrigger:!0,label:(0,l.t)("Sort ascending"),default:vm,description:(0,l.t)("Check for sorting ascending")}}],[{name:"multiSelect",config:{type:"CheckboxControl",label:(0,l.t)("Multiple select"),default:bm,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0,description:(0,l.t)("Allow selecting multiple values")}}],[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Required"),default:hm,renderTrigger:!0,description:(0,l.t)("User must select a value before applying the filter")}}],[{name:"defaultToFirstItem",config:{type:"CheckboxControl",label:(0,l.t)("Default to first item"),default:ym,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0,requiredFirst:!0,description:(0,l.t)("Select first item by default (when using this option, default value can’t be set)")}}],[{name:"inverseSelection",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,l.t)("Inverse selection"),default:fm,description:(0,l.t)("Exclude selected values")}}],[{name:"searchAllOptions",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,l.t)("Search all filter options"),default:xm,description:(0,l.t)("By default, each filter loads at most 1000 choices at the initial page load. Check this box if you have more than 1000 filter values and want to enable dynamically searching that loads filter values as users type (may add stress to your database).")}}]]}],controlOverrides:{groupby:{multi:!1,validators:[C.Z]}}};function wm(e){const{formData:t,height:o,hooks:r,queriesData:a,width:i,behaviors:n,appSection:l,filterState:s,isRefreshing:c}=e,d={...pm,...t},{setDataMask:u=(()=>{}),setFocusedFilter:m=(()=>{}),unsetFocusedFilter:p=(()=>{})}=r,[g]=a,{colnames:h=[],coltypes:f=[],data:b=[]}=g||{};return{filterState:s,coltypeMap:h.reduce(((e,t,o)=>({...e,[t]:f[o]})),{}),appSection:l,width:i,behaviors:n,height:o,data:b,formData:d,isRefreshing:c,setDataMask:u,setFocusedFilter:m,unsetFocusedFilter:p}}var Cm=o(80757);class Sm extends s.Z{constructor(){const e=new n.Z({name:(0,l.t)("Select filter"),description:(0,l.t)("Select filter plugin using AntD"),behaviors:[wt.cg.INTERACTIVE_CHART,wt.cg.NATIVE_FILTER],enableNoResults:!1,tags:[(0,l.t)("Experimental")],thumbnail:Cm});super({buildQuery:gm,controlPanel:_m,loadChart:()=>o.e(5181).then(o.bind(o,45181)),metadata:e,transformProps:wm})}}function Tm(e){const{groupby:t}=e,[o=""]=t||[];return(0,lo.Z)(e,(e=>[{...e,columns:[],groupby:[],metrics:[{aggregate:"MIN",column:{column_name:o,id:1,type_generic:kt.Z.NUMERIC},expressionType:"SIMPLE",hasCustomLabel:!0,label:"min"},{aggregate:"MAX",column:{column_name:o,id:2,type_generic:kt.Z.NUMERIC},expressionType:"SIMPLE",hasCustomLabel:!0,label:"max"}]}]))}var km=o(78676);const Am={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...jt.Hq.groupby,label:"Column",required:!0}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Required"),default:!1,renderTrigger:!0,description:(0,l.t)("User must select a value for this filter.")}},{name:"enableSingleValue",config:{type:"CheckboxControl",label:(0,l.t)("Single value"),default:km.c.Exact,renderTrigger:!0,description:(0,l.t)("Use only a single value.")}}]]}]};function Rm(e){const{formData:t,height:o,hooks:r,queriesData:a,width:i,behaviors:n,filterState:l}=e,{setDataMask:s=(()=>{}),setFocusedFilter:c=(()=>{}),unsetFocusedFilter:d=(()=>{})}=r,{data:u}=a[0];return{data:u,formData:t,behaviors:n,height:o,setDataMask:s,filterState:l,width:i,setFocusedFilter:c,unsetFocusedFilter:d}}var Pm=o(29872);class Lm extends s.Z{constructor(){const e=new n.Z({name:(0,l.t)("Range filter"),description:(0,l.t)("Range filter plugin using AntD"),behaviors:[wt.cg.INTERACTIVE_CHART,wt.cg.NATIVE_FILTER],tags:[(0,l.t)("Experimental")],thumbnail:Pm});super({buildQuery:Tm,controlPanel:Am,loadChart:()=>o.e(326).then(o.bind(o,30326)),metadata:e,transformProps:Rm})}}const Em={controlPanelSections:[{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...jt.Hq.groupby,label:"Column",required:!0}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Required"),default:!1,renderTrigger:!0,description:(0,l.t)("User must select a value for this filter.")}}]]}]},Fm={defaultValue:null};function Mm(e){const{formData:t,height:o,hooks:r,queriesData:a,width:i,behaviors:n,filterState:l}=e,{setDataMask:s=(()=>{}),setFocusedFilter:c=(()=>{}),unsetFocusedFilter:d=(()=>{})}=r,{data:u}=a[0];return{data:u,filterState:l,formData:{...Fm,...t},height:o,behaviors:n,setDataMask:s,setFocusedFilter:c,unsetFocusedFilter:d,width:i}}var Dm=o(29884);class Zm extends s.Z{constructor(){const e=new n.Z({name:(0,l.t)("Time filter"),description:(0,l.t)("Custom time filter plugin"),behaviors:[wt.cg.INTERACTIVE_CHART,wt.cg.NATIVE_FILTER],thumbnail:Dm,tags:[(0,l.t)("Experimental")],datasourceCount:0});super({controlPanel:Em,loadChart:()=>Promise.all([o.e(1216),o.e(4998),o.e(9356),o.e(7843),o.e(3375),o.e(9483)]).then(o.bind(o,89483)),metadata:e,transformProps:Mm})}}function Im(e){return(0,lo.Z)(e,(e=>[{result_type:"columns",columns:[],metrics:[],orderby:[]}]))}const Nm={controlPanelSections:[{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Required"),default:!1,renderTrigger:!0,description:(0,l.t)("User must select a value for this filter.")}}]]}]},Om={defaultValue:null};function Bm(e){const{behaviors:t,formData:o,height:r,hooks:a,queriesData:i,width:n,filterState:l}=e,{setDataMask:s=(()=>{}),setFocusedFilter:c=(()=>{}),unsetFocusedFilter:d=(()=>{})}=a,{data:u}=i[0];return{filterState:l,behaviors:t,width:n,height:r,data:u,formData:{...Om,...o},setDataMask:s,setFocusedFilter:c,unsetFocusedFilter:d}}var zm=o(53041);class Vm extends s.Z{constructor(){const e=new n.Z({name:(0,l.t)("Time column"),description:(0,l.t)("Time column filter plugin"),behaviors:[wt.cg.INTERACTIVE_CHART,wt.cg.NATIVE_FILTER],tags:[(0,l.t)("Experimental")],thumbnail:zm});super({buildQuery:Im,controlPanel:Nm,loadChart:()=>o.e(4572).then(o.bind(o,24572)),metadata:e,transformProps:Bm})}}function qm(e){return(0,lo.Z)(e,(e=>[{...e,result_type:"columns",columns:[],metrics:[],orderby:[]}]))}const $m={defaultValue:null,multiSelect:!1},{multiSelect:Wm}=$m,jm={controlPanelSections:[p.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...jt.Hq.groupby,label:"Columns to show",multiple:!0,required:!1}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"multiSelect",config:{type:"CheckboxControl",label:(0,l.t)("Multiple select"),default:Wm,affectsDataMask:!0,resetConfig:!0,renderTrigger:!0,description:(0,l.t)("Allow selecting multiple values")}}],[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Required"),default:!1,renderTrigger:!0,description:(0,l.t)("User must select a value for this filter.")}}]]}]};function Gm(e){const{behaviors:t,formData:o,height:r,hooks:a,queriesData:i,width:n,filterState:l}=e,{setDataMask:s=(()=>{}),setFocusedFilter:c=(()=>{}),unsetFocusedFilter:d=(()=>{})}=a,{data:u}=i[0];return{filterState:l,behaviors:t,width:n,height:r,data:u,formData:{...$m,...o},setDataMask:s,setFocusedFilter:c,unsetFocusedFilter:d}}var Ym=o(43225);class Jm extends s.Z{constructor(){const e=new n.Z({name:(0,l.t)("Group By"),description:(0,l.t)("Group By filter plugin"),behaviors:[wt.cg.INTERACTIVE_CHART,wt.cg.NATIVE_FILTER],tags:[(0,l.t)("Experimental")],thumbnail:Ym});super({buildQuery:qm,controlPanel:jm,loadChart:()=>o.e(8464).then(o.bind(o,8464)),metadata:e,transformProps:Gm})}}function Hm(e){return(0,lo.Z)(e,(()=>[{result_type:"timegrains",columns:[],metrics:[],orderby:[]}]))}const Qm={controlPanelSections:[{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Required"),default:!1,renderTrigger:!0,description:(0,l.t)("User must select a value for this filter.")}}]]}]},Um={defaultValue:null};function Xm(e){const{formData:t,height:o,hooks:r,queriesData:a,width:i,filterState:n}=e,{setDataMask:l=(()=>{}),setFocusedFilter:s=(()=>{}),unsetFocusedFilter:c=(()=>{})}=r,{data:d}=a[0];return{filterState:n,width:i,height:o,data:d,formData:{...Um,...t},setDataMask:l,setFocusedFilter:s,unsetFocusedFilter:c}}var Km=o(78292);class ep extends s.Z{constructor(){const e=new n.Z({name:(0,l.t)("Time grain"),description:(0,l.t)("Time grain filter plugin"),behaviors:[wt.cg.INTERACTIVE_CHART,wt.cg.NATIVE_FILTER],tags:[(0,l.t)("Experimental")],thumbnail:Km});super({buildQuery:Hm,controlPanel:Qm,loadChart:()=>o.e(1948).then(o.bind(o,81948)),metadata:e,transformProps:Xm})}}function tp(e){const{groupbyColumns:t=[],groupbyRows:o=[]}=e,r=new Set([...(0,$t.Z)(t),...(0,$t.Z)(o)]);return(0,lo.Z)(e,(e=>{const{series_limit_metric:t,metrics:o,order_desc:a}=e;let i;return t?i=[[t,!a]]:Array.isArray(o)&&o[0]&&(i=[[o[0],!a]]),[{...e,orderby:i,columns:[...r]}]}))}var op=o(86769);const rp={controlPanelSections:[{...p.sections.legacyTimeseriesTime,expanded:!1},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupbyColumns",config:{...jt.Hq.groupby,label:(0,l.t)("Columns"),description:(0,l.t)("Columns to group by on the columns")}}],[{name:"groupbyRows",config:{...jt.Hq.groupby,label:(0,l.t)("Rows"),description:(0,l.t)("Columns to group by on the rows")}}],[{name:"metrics",config:{...jt.Hq.metrics,validators:[C.Z]}}],[{name:"metricsLayout",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Apply metrics on"),default:op.Q.COLUMNS,options:[[op.Q.COLUMNS,(0,l.t)("Columns")],[op.Q.ROWS,(0,l.t)("Rows")]],description:(0,l.t)("Use metrics as a top level group for columns or for rows")}}],["adhoc_filters"],Gt.a,["series_limit"],[{name:"row_limit",config:{...jt.Hq.row_limit,label:(0,l.t)("Cell limit"),description:(0,l.t)("Limits the number of cells that get retrieved.")}}],[{name:"series_limit_metric",config:{...jt.Hq.series_limit_metric,description:(0,l.t)("Metric used to define how the top series are sorted if a series or cell limit is present. If undefined reverts to the first metric (where appropriate).")}}],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending")}}]]},{label:(0,l.t)("Options"),expanded:!0,tabOverride:"data",controlSetRows:[[{name:"aggregateFunction",config:{type:"SelectControl",label:(0,l.t)("Aggregation function"),clearable:!1,choices:(0,g.m)(["Count","Count Unique Values","List Unique Values","Sum","Average","Median","Sample Variance","Sample Standard Deviation","Minimum","Maximum","First","Last","Sum as Fraction of Total","Sum as Fraction of Rows","Sum as Fraction of Columns","Count as Fraction of Total","Count as Fraction of Rows","Count as Fraction of Columns"]),default:"Sum",description:(0,l.t)("Aggregate function to apply when pivoting and computing the total rows and columns"),renderTrigger:!0}}],[{name:"rowTotals",config:{type:"CheckboxControl",label:(0,l.t)("Show rows total"),default:!1,renderTrigger:!0,description:(0,l.t)("Display row level total")}}],[{name:"colTotals",config:{type:"CheckboxControl",label:(0,l.t)("Show columns total"),default:!1,renderTrigger:!0,description:(0,l.t)("Display column level total")}}],[{name:"transposePivot",config:{type:"CheckboxControl",label:(0,l.t)("Transpose pivot"),default:!1,description:(0,l.t)("Swap rows and columns"),renderTrigger:!0}}],[{name:"combineMetric",config:{type:"CheckboxControl",label:(0,l.t)("Combine metrics"),default:!1,description:(0,l.t)("Display metrics side by side within each column, as opposed to each column being displayed side by side for each metric."),renderTrigger:!0}}]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"valueFormat",config:{...jt.Hq.y_axis_format,label:(0,l.t)("Value format")}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),default:Rt.Z.id,renderTrigger:!0,choices:h.HC,description:(0,l.t)("D3 time format for datetime columns")}}],[{name:"rowOrder",config:{type:"SelectControl",label:(0,l.t)("Sort rows by"),default:"key_a_to_z",choices:[["key_a_to_z",(0,l.t)("key a-z")],["key_z_to_a",(0,l.t)("key z-a")],["value_a_to_z",(0,l.t)("value ascending")],["value_z_to_a",(0,l.t)("value descending")]],renderTrigger:!0,description:(0,N.tZ)(D.Fragment,null,(0,N.tZ)("div",null,(0,l.t)("Change order of rows.")),(0,N.tZ)("div",null,(0,l.t)("Available sorting modes:")),(0,N.tZ)("ul",null,(0,N.tZ)("li",null,(0,l.t)("By key: use row names as sorting key")),(0,N.tZ)("li",null,(0,l.t)("By value: use metric values as sorting key"))))}}],[{name:"colOrder",config:{type:"SelectControl",label:(0,l.t)("Sort columns by"),default:"key_a_to_z",choices:[["key_a_to_z",(0,l.t)("key a-z")],["key_z_to_a",(0,l.t)("key z-a")],["value_a_to_z",(0,l.t)("value ascending")],["value_z_to_a",(0,l.t)("value descending")]],renderTrigger:!0,description:(0,N.tZ)(D.Fragment,null,(0,N.tZ)("div",null,(0,l.t)("Change order of columns.")),(0,N.tZ)("div",null,(0,l.t)("Available sorting modes:")),(0,N.tZ)("ul",null,(0,N.tZ)("li",null,(0,l.t)("By key: use column names as sorting key")),(0,N.tZ)("li",null,(0,l.t)("By value: use metric values as sorting key"))))}}],[{name:"rowSubtotalPosition",config:{type:"SelectControl",label:(0,l.t)("Rows subtotal position"),default:!1,choices:[[!0,(0,l.t)("Top")],[!1,(0,l.t)("Bottom")]],renderTrigger:!0,description:(0,l.t)("Position of row level subtotal")}}],[{name:"colSubtotalPosition",config:{type:"SelectControl",label:(0,l.t)("Columns subtotal position"),default:!1,choices:[[!0,(0,l.t)("Left")],[!1,(0,l.t)("Right")]],renderTrigger:!0,description:(0,l.t)("Position of column level subtotal")}}],[{name:"conditional_formatting",config:{type:"ConditionalFormattingControl",renderTrigger:!0,label:(0,l.t)("Conditional formatting"),description:(0,l.t)("Apply conditional color formatting to metrics"),mapStateToProps(e){var t,o,r,a,i;const n=null!=(t=null==e||null==(o=e.controls)||null==(r=o.metrics)?void 0:r.value)?t:[],l=null!=(a=null==e||null==(i=e.datasource)?void 0:i.verbose_map)?a:{};return{columnOptions:n.map((e=>{var t;return"string"==typeof e?{value:e,label:null!=(t=l[e])?t:e}:{value:e.label,label:e.label}})),verboseMap:l}}}}]]}]},{DATABASE_DATETIME:ap}=Tt.Z;function ip(e){const{width:t,height:o,queriesData:r,formData:a,rawFormData:i,hooks:{setDataMask:n=(()=>{})},filterState:l,datasource:{verboseMap:s={},columnFormats:c={}}}=e,{data:u,colnames:m,coltypes:p}=r[0],{groupbyRows:g,groupbyColumns:h,metrics:f,tableRenderer:b,colOrder:y,rowOrder:x,aggregateFunction:v,transposePivot:_,combineMetric:w,rowSubtotalPosition:C,colSubtotalPosition:S,colTotals:T,rowTotals:k,valueFormat:A,dateFormat:R,emitFilter:P,metricsLayout:L,conditionalFormatting:E}=a,{selectedFilters:F}=l,M=(0,He.Z)(i),D=m.filter(((e,t)=>p[t]===kt.Z.TEMPORAL)).reduce(((e,t)=>{let o;return R===Rt.Z.id?o=M?(0,d.uh)(M):function(e,t=[]){return t.every((t=>null===t[e]||void 0===t[e]||"number"==typeof t[e]))}(t,u)?(0,d.bt)(ap):String:R&&(o=(0,d.bt)(R)),o&&(e[t]=o),e}),{}),Z=(0,Lt.ni)(E,u);return{width:t,height:o,data:u,groupbyRows:g,groupbyColumns:h,metrics:f,tableRenderer:b,colOrder:y,rowOrder:x,aggregateFunction:v,transposePivot:_,combineMetric:w,rowSubtotalPosition:C,colSubtotalPosition:S,colTotals:T,rowTotals:k,valueFormat:A,emitFilter:P,setDataMask:n,selectedFilters:F,verboseMap:s,columnFormats:c,metricsLayout:L,metricColorFormatters:Z,dateFormatters:D}}var np=o(31609);class lp extends s.Z{constructor(){const e=new n.Z({behaviors:[wt.cg.INTERACTIVE_CHART],category:(0,l.t)("Table"),description:(0,l.t)("Used to summarize a set of data by grouping together multiple statistics along two axes. Examples: Sales numbers by region and month, tasks by status and assignee, active users by age and location. Not the most visually stunning visualization, but highly informative and versatile."),name:(0,l.t)("Pivot Table v2"),tags:[(0,l.t)("Additive"),(0,l.t)("Report"),(0,l.t)("Tabular"),(0,l.t)("Popular")],thumbnail:np});super({buildQuery:tp,controlPanel:rp,loadChart:()=>o.e(7974).then(o.bind(o,27974)),metadata:e,transformProps:ip})}}const sp=()=>{};function cp(e){const{datasource:t,formData:o,hooks:r,initialValues:a,queriesData:i,rawDatasource:n={},rawFormData:l,width:s,height:c}=e,{onAddFilter:d=sp,onFilterMenuOpen:u=sp,onFilterMenuClose:m=sp}=r,{sliceId:p,dateFilter:g,instantFiltering:h,showDruidTimeGranularity:f,showDruidTimeOrigin:b,showSqlaTimeColumn:y,showSqlaTimeGranularity:x}=o,{verboseMap:v={}}=t,_=(o.filterConfigs||[]).map((e=>({...e,key:e.column,label:e.label||v[e.column]||e.column})));return{chartId:p,width:s,height:c,datasource:n,filtersChoices:i[0].data,filtersFields:_,instantFiltering:h,onChange:d,onFilterMenuOpen:u,onFilterMenuClose:m,origSelectedValues:a||{},showDateFilter:g,showDruidTimeGrain:f,showDruidTimeOrigin:b,showSqlaTimeColumn:y,showSqlaTimeGrain:x,rawFormData:l}}var dp,up,mp=o(34168);const pp=document.getElementById("app"),gp=JSON.parse(pp.getAttribute("data-bootstrap")),hp=!(null==gp||null==(dp=gp.common)||null==(up=dp.conf)||!up.DRUID_IS_ACTIVE),fp=hp?[[{name:"show_druid_time_granularity",config:{type:"CheckboxControl",label:(0,l.t)("Show Druid granularity dropdown"),default:!1,description:(0,l.t)("Check to include Druid granularity dropdown")}}],[{name:"show_druid_time_origin",config:{type:"CheckboxControl",label:(0,l.t)("Show Druid time origin"),default:!1,description:(0,l.t)("Check to include time origin dropdown")}}]]:[],bp={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Filters configuration"),expanded:!0,controlSetRows:[[{name:"filter_configs",config:{type:"CollectionControl",label:"Filters",description:(0,l.t)("Filter configuration for the filter box"),validators:[],controlName:"FilterBoxItemControl",mapStateToProps:({datasource:e})=>({datasource:e})}}],[(0,N.tZ)("hr",null)],[{name:"date_filter",config:{type:"CheckboxControl",label:(0,l.t)("Date filter"),default:!0,description:(0,l.t)("Whether to include a time filter")}}],[{name:"instant_filtering",config:{type:"CheckboxControl",label:(0,l.t)("Instant filtering"),renderTrigger:!0,default:!1,description:(0,l.t)("Check to apply filters instantly as they change instead of displaying [Apply] button")}}],[{name:"show_sqla_time_granularity",config:{type:"CheckboxControl",label:hp?(0,l.t)("Show SQL time grain dropdown"):(0,l.t)("Show time grain dropdown"),default:!1,description:hp?(0,l.t)("Check to include SQL time grain dropdown"):(0,l.t)("Check to include time grain dropdown")}}],[{name:"show_sqla_time_column",config:{type:"CheckboxControl",label:hp?(0,l.t)("Show SQL time column"):(0,l.t)("Show time column"),default:!1,description:(0,l.t)("Check to include time column dropdown")}}],...fp,["adhoc_filters"]]}],controlOverrides:{adhoc_filters:{label:(0,l.t)("Limit selector values"),description:(0,l.t)("These filters apply to the values available in the dropdowns")}}},yp=new n.Z({category:(0,l.t)("Tools"),name:(0,l.t)("Filter box"),description:(0,l.t)("Chart component that lets you add a custom filter UI in your dashboard. When added to dashboard, a filter box lets users specify specific values or ranges to filter charts by. The charts that each filter box is applied to can be fine tuned as well in the dashboard view.\n\n    Note that this plugin is being replaced with the new Filters feature that lives in the dashboard view itself. It's easier to use and has more capabilities!"),thumbnail:mp,useLegacyApi:!0});class xp extends s.Z{constructor(){super({controlPanel:bp,metadata:yp,transformProps:cp,loadChart:()=>Promise.all([o.e(1216),o.e(4998),o.e(9356),o.e(2717),o.e(741),o.e(6962),o.e(7843),o.e(2825),o.e(3375),o.e(3389),o.e(3)]).then(o.bind(o,51777))})}}function vp(e){const{height:t,datasource:o,formData:r,queriesData:a}=e,{columnCollection:i=[],groupby:n,metrics:l,url:s}=r,{records:c,columns:d}=a[0].data,u=(null==n?void 0:n.length)>0;let m;if(u)m=d.map((e=>"object"==typeof e?e:{label:e}));else{const e=o.metrics.reduce(((e,t)=>{const o=e;return o[t.metric_name]=t,o}),{});m=l.map((t=>"object"==typeof t?t:e[t]))}return i.forEach((e=>{const t=e;"string"==typeof t.timeLag&&t.timeLag&&(t.timeLag=parseInt(t.timeLag,10))})),{height:t,data:c,columnConfigs:i,rows:m,rowType:u?"column":"metric",url:s}}var _p=o(24432);const wp=new n.Z({category:(0,l.t)("Table"),name:(0,l.t)("Time-series Table"),description:(0,l.t)("Compare multiple time series charts (as sparklines) and related metrics quickly."),tags:[(0,l.t)("Multi-Variables"),(0,l.t)("Comparison"),(0,l.t)("Legacy"),(0,l.t)("Percentages"),(0,l.t)("Tabular"),(0,l.t)("Text"),(0,l.t)("Trend")],thumbnail:_p,useLegacyApi:!0});class Cp extends s.Z{constructor(){super({metadata:wp,transformProps:vp,loadChart:()=>Promise.all([o.e(1216),o.e(1095),o.e(6962),o.e(4640)]).then(o.bind(o,23177))})}}class Sp extends a.Z{constructor(){const e=(0,i.c)(i.T.DASHBOARD_FILTERS_EXPERIMENTAL)?[(new Jm).configure({key:"filter_groupby"})]:[];super({name:"Legacy charts",presets:[new Gi],plugins:[(new Fr).configure({key:"area"}),(new Br).configure({key:"bar"}),(new gn).configure({key:"big_number"}),(new wn).configure({key:"big_number_total"}),(new rl).configure({key:"box_plot"}),(new $r).configure({key:"bubble"}),(new Yr).configure({key:"bullet"}),(new x).configure({key:"cal_heatmap"}),(new k).configure({key:"chord"}),(new Ur).configure({key:"compare"}),(new F).configure({key:"country_map"}),(new ia).configure({key:"dist_bar"}),(new ca).configure({key:"dual_line"}),(new z).configure({key:"event_flow"}),(new xp).configure({key:"filter_box"}),(new Bl).configure({key:"funnel"}),(new is).configure({key:"treemap_v2"}),(new ws).configure({key:"gauge_chart"}),(new Os).configure({key:"graph_chart"}),(new Us).configure({key:"radar"}),(new Tc).configure({key:"mixed_timeseries"}),(new K).configure({key:"heatmap"}),(new de).configure({key:"histogram"}),(new be).configure({key:"horizon"}),(new fa).configure({key:"line"}),(new va).configure({key:"line_multi"}),(new Te).configure({key:"mapbox"}),(new Ee).configure({key:"paired_ttest"}),(new Ne).configure({key:"para"}),(new Je).configure({key:"partition"}),(new Gc).configure({key:"pie"}),(new tt).configure({key:"pivot_table"}),(new lp).configure({key:"pivot_table_v2"}),(new lt).configure({key:"rose"}),(new ht).configure({key:"sankey"}),(new _t).configure({key:"sunburst"}),(new po).configure({key:"table"}),(new Sa).configure({key:"time_pivot"}),(new Cp).configure({key:"time_table"}),(new Co).configure({key:"treemap"}),(new Oo).configure({key:"word_cloud"}),(new Go).configure({key:"world_map"}),(new xd).configure({key:"echarts_area"}),(new Nd).configure({key:"echarts_timeseries"}),(new tu).configure({key:"echarts_timeseries_bar"}),(new yu).configure({key:"echarts_timeseries_line"}),(new wu).configure({key:"echarts_timeseries_smooth"}),(new Nu).configure({key:"echarts_timeseries_scatter"}),(new tm).configure({key:"echarts_timeseries_step"}),(new Sm).configure({key:"filter_select"}),(new Lm).configure({key:"filter_range"}),(new Zm).configure({key:"filter_time"}),(new Vm).configure({key:"filter_timecolumn"}),(new ep).configure({key:"filter_timegrain"}),(new um).configure({key:"tree_chart"}),...e]})}}var Tp=o(16737);const kp={controlPanelSections:[{label:(0,l.t)("Code"),controlSetRows:[[{name:"markup_type",config:{type:"SelectControl",label:(0,l.t)("Markup type"),clearable:!1,choices:(0,Tp.mG)(["markdown","html"]),default:"markdown",validators:[C.Z],description:(0,l.t)("Pick your favorite markup language")}}],[{name:"code",config:{type:"TextAreaControl",label:(0,l.t)("Code"),description:(0,l.t)("Put your code here"),mapStateToProps:e=>({language:e.controls&&e.controls.markup_type?e.controls.markup_type.value:"markdown"}),default:""}}]]}],controlOverrides:{code:{default:"####Section Title\nA paragraph describing the section of the dashboard, right before the separator line \n\n---------------"}},sectionOverrides:{druidTimeSeries:{controlSetRows:[]},sqlaTimeSeries:{controlSetRows:[]}}},Ap={controlPanelSections:[p.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit"],[{name:"column_collection",config:{type:"CollectionControl",label:(0,l.t)("Time series columns"),renderTrigger:!0,validators:[C.Z],controlName:"TimeSeriesColumnControl"}}],["row_limit"],[{name:"url",config:{type:"TextControl",label:(0,l.t)("URL"),description:(0,l.t)("Templated link, it's possible to include {{ metric }} or other values coming from the controls."),default:""}}]]}],controlOverrides:{groupby:{multiple:!1}}};function Rp(){(new Sp).register(),(0,r.Z)().registerValue("separator",kp).registerValue("time_table",Ap)}},87691:(e,t,o)=>{e.exports=o.p+"chord.446d549d..jpg"},27522:(e,t,o)=>{e.exports=o.p+"d81f67bb7815b88132ba.geojson"},6004:(e,t,o)=>{e.exports=o.p+"51e63353157d161b3daa.geojson"},25295:(e,t,o)=>{e.exports=o.p+"02ef2541456cd5a7f240.geojson"},58944:(e,t,o)=>{e.exports=o.p+"29cdc026a93aac8ebc68.geojson"},77630:(e,t,o)=>{e.exports=o.p+"0b263939505b9ef1d840.geojson"},92971:(e,t,o)=>{e.exports=o.p+"6b9a5080058c621d44dc.geojson"},576:(e,t,o)=>{e.exports=o.p+"0737a7c549c0ef9ba0f9.geojson"},41798:(e,t,o)=>{e.exports=o.p+"d81967d83cca686de9b2.geojson"},12722:(e,t,o)=>{e.exports=o.p+"07f8fe00a15a06001e18.geojson"},11783:(e,t,o)=>{e.exports=o.p+"75e1a5382a0e564fc560.geojson"},20958:(e,t,o)=>{e.exports=o.p+"d976cbf5cee4a79c3b53.geojson"},49172:(e,t,o)=>{e.exports=o.p+"f44dbd61a903057c7c0b.geojson"},77884:(e,t,o)=>{e.exports=o.p+"3dd9c55c13d8985f043c.geojson"},93509:(e,t,o)=>{e.exports=o.p+"3bc246cfea18d7d7e899.geojson"},75437:(e,t,o)=>{e.exports=o.p+"c9a7cf9c53c4e29579fe.geojson"},23958:(e,t,o)=>{e.exports=o.p+"6722ecc61af69af56bfb.geojson"},45287:(e,t,o)=>{e.exports=o.p+"a9304c8ed51ebcba64ff.geojson"},7700:(e,t,o)=>{e.exports=o.p+"c5274804cb55d057dcea.geojson"},50085:(e,t,o)=>{e.exports=o.p+"dd4bcecbd8dd71191cad.geojson"},71881:(e,t,o)=>{e.exports=o.p+"4da2a0e333431499fbdf.geojson"},61478:(e,t,o)=>{e.exports=o.p+"015887d7a68f74e526a5.geojson"},42092:(e,t,o)=>{e.exports=o.p+"0d081ab047fe8e12bc35.geojson"},40779:(e,t,o)=>{e.exports=o.p+"80722ac6dcebbb37fef4.geojson"},15546:(e,t,o)=>{e.exports=o.p+"40c1905a209658063a71.geojson"},71368:(e,t,o)=>{e.exports=o.p+"46edeac8878815b0e095.geojson"},92646:(e,t,o)=>{e.exports=o.p+"abcdc85f5630a561d004.geojson"},71211:(e,t,o)=>{e.exports=o.p+"61cf3a53a136ea46ad80.geojson"},28492:(e,t,o)=>{e.exports=o.p+"3742d6b01bd6a07c9972.geojson"},45576:(e,t,o)=>{e.exports=o.p+"406949857cb2319831c4.geojson"},88579:(e,t,o)=>{e.exports=o.p+"b582f9853d97a2d8cb68.geojson"},71751:(e,t,o)=>{e.exports=o.p+"bd886aa022432cc79a35.geojson"},74569:(e,t,o)=>{e.exports=o.p+"d8ec9f8ea54816918e86.geojson"},38731:(e,t,o)=>{e.exports=o.p+"b5284f22f5b1d7e143a7.geojson"},99660:(e,t,o)=>{e.exports=o.p+"07e819fe08c4263025d5.geojson"},62175:(e,t,o)=>{e.exports=o.p+"f45e83da71a4ebb56579.geojson"},85012:(e,t,o)=>{e.exports=o.p+"93fc6c5af29fb7674df5.geojson"},41466:(e,t,o)=>{e.exports=o.p+"40453f8b73a6e89c5f86.geojson"},59034:(e,t,o)=>{e.exports=o.p+"4cf3eaf2bfd6597f09da.geojson"},40646:(e,t,o)=>{e.exports=o.p+"40aa29d5db06af42764a.geojson"},81865:(e,t,o)=>{e.exports=o.p+"ae149ee6c93a79fe782e.geojson"},68955:(e,t,o)=>{e.exports=o.p+"9c3a927fe4fca61c0f20.geojson"},91077:(e,t,o)=>{e.exports=o.p+"4a8214637390e196f05a.geojson"},72147:(e,t,o)=>{e.exports=o.p+"18441afa379e8c4066d1.geojson"},83449:(e,t,o)=>{e.exports=o.p+"1452ee5ea23538ac5c76.geojson"},43674:(e,t,o)=>{e.exports=o.p+"05fbb0c7bedaefac66e8.geojson"},55254:(e,t,o)=>{e.exports=o.p+"c0d1e476cd87eb0898b3.geojson"},71524:(e,t,o)=>{e.exports=o.p+"5b93c3f91f6a60d48ed9.geojson"},34680:(e,t,o)=>{e.exports=o.p+"565caf6709b9a94e3fa2.geojson"},60153:(e,t,o)=>{e.exports=o.p+"32c07cab1cd34d48d645.geojson"},43090:(e,t,o)=>{e.exports=o.p+"76143256c3726a97195b.geojson"},40106:(e,t,o)=>{e.exports=o.p+"fab9d21c3a4b7dc1f921.geojson"},737:(e,t,o)=>{e.exports=o.p+"58b562efc68837bae710.geojson"},86487:(e,t,o)=>{e.exports=o.p+"c1d1679c7dd36583524f.geojson"},22096:(e,t,o)=>{e.exports=o.p+"4139aecf8e96a8cb87f1.geojson"},71574:(e,t,o)=>{e.exports=o.p+"55ec61228b7c4faf90f5.geojson"},5098:(e,t,o)=>{e.exports=o.p+"7b00a05b6aaeb6841330.geojson"},1792:(e,t,o)=>{e.exports=o.p+"1f6b7922ec02ae4a63d6.geojson"},95752:(e,t,o)=>{e.exports=o.p+"channels.99e7cde9..jpg"},16588:(e,t,o)=>{e.exports=o.p+"employment.7b5c16a7..jpg"},77342:(e,t,o)=>{e.exports=o.p+"transportation.75912cf2..jpg"},16831:(e,t,o)=>{e.exports=o.p+"example1.44f08793..jpg"},86946:(e,t,o)=>{e.exports=o.p+"example2.19c795b0..jpg"},36542:(e,t,o)=>{e.exports=o.p+"example3.99ab6fd0..jpg"},18568:(e,t,o)=>{e.exports=o.p+"Horizon_Chart.7b46c45c..jpg"},25704:(e,t,o)=>{e.exports=o.p+"MapBox.6e6f79c8..jpg"},24188:(e,t,o)=>{e.exports=o.p+"MapBox2.6337d5b5..jpg"},17713:(e,t,o)=>{e.exports=o.p+"Sankey.25e6833c..jpg"},66626:(e,t,o)=>{e.exports=o.p+"Sankey2.4083c192..jpg"},57205:(e,t,o)=>{e.exports=o.p+"Treemap.ba0fbbec..jpg"},94340:(e,t,o)=>{e.exports=o.p+"Treemap2.0568794f..jpg"},41120:(e,t,o)=>{e.exports=o.p+"Treemap3.ef600a2d..jpg"},56127:(e,t,o)=>{e.exports=o.p+"Treemap4.6e60b127..jpg"},89424:(e,t,o)=>{e.exports=o.p+"WorldMap1.da13410b..jpg"},89025:(e,t,o)=>{e.exports=o.p+"WorldMap2.2ace1986..jpg"},22431:(e,t,o)=>{e.exports=o.p+"example1.a58bab57..jpg"},48654:(e,t,o)=>{e.exports=o.p+"example2.f881423e..jpg"},48402:(e,t,o)=>{e.exports=o.p+"example3.3738f056..jpg"},62881:(e,t,o)=>{e.exports=o.p+"example4.94717fd8..jpg"},78248:(e,t,o)=>{e.exports=o.p+"Time_Series_Bar_Chart.f6bb1a65..jpg"},62016:(e,t,o)=>{e.exports=o.p+"Time_Series_Bar_Chart2.9b95dd4f..jpg"},59500:(e,t,o)=>{e.exports=o.p+"Time_Series_Bar_Chart3.1605efdf..jpg"},26767:(e,t,o)=>{e.exports=o.p+"BarChart3.6c1382b7..jpg"},48955:(e,t,o)=>{e.exports=o.p+"Bar_Chart.897135b4..jpg"},50828:(e,t,o)=>{e.exports=o.p+"Bar_Chart_2.2db0caa4..jpg"},75060:(e,t,o)=>{e.exports=o.p+"LineChart.e0e66ab1..jpg"},81368:(e,t,o)=>{e.exports=o.p+"LineChart2.32576bb2..jpg"},27692:(e,t,o)=>{e.exports=o.p+"battery.8fed19b7..jpg"},39892:(e,t,o)=>{e.exports=o.p+"BigNumber.b33901bf..jpg"},48252:(e,t,o)=>{e.exports=o.p+"BigNumber2.3f1427c2..jpg"},19258:(e,t,o)=>{e.exports=o.p+"Big_Number_Trendline.bccce4c1..jpg"},71421:(e,t,o)=>{e.exports=o.p+"BoxPlot.1833526f..jpg"},21738:(e,t,o)=>{e.exports=o.p+"Pie1.2cbe969f..jpg"},44718:(e,t,o)=>{e.exports=o.p+"Pie2.42fece24..jpg"},51318:(e,t,o)=>{e.exports=o.p+"Pie3.2e1f1152..jpg"},63549:(e,t,o)=>{e.exports=o.p+"Pie4.a5e101ac..jpg"},25486:(e,t,o)=>{e.exports=o.p+"Time-series_Chart.8ff488d2..jpg"},79067:(e,t,o)=>{e.exports=o.p+"treemap_v2_2.bac597e9..jpg"},71513:(e,t,o)=>{e.exports=o.p+"Table.f8a6698c..jpg"},94362:(e,t,o)=>{e.exports=o.p+"Table2.c8533c18..jpg"},61957:(e,t,o)=>{e.exports=o.p+"Table3.8997ea72..jpg"},59754:(e,t,o)=>{e.exports=o.p+"Word_Cloud.3d210efb..jpg"},32701:(e,t,o)=>{e.exports=o.p+"Word_Cloud_2.2a94fb99..jpg"},65638:(e,t,o)=>{e.exports=o.p+"example.3d91d261..png"},1187:(e,t,o)=>{e.exports=o.p+"Area1.b13966ae..png"},90806:(e,t,o)=>{e.exports=o.p+"Bar1.05db33fe..png"},64301:(e,t,o)=>{e.exports=o.p+"Bar2.c41826d8..png"},74392:(e,t,o)=>{e.exports=o.p+"Bar3.0ace6ce6..png"},5489:(e,t,o)=>{e.exports=o.p+"Line1.7282d4c8..png"},10006:(e,t,o)=>{e.exports=o.p+"Line2.c13c8aae..png"},995:(e,t,o)=>{e.exports=o.p+"Scatter1.665fe2f7..png"},77338:(e,t,o)=>{e.exports=o.p+"SmoothLine1.97fed005..png"},49197:(e,t,o)=>{e.exports=o.p+"Step1.297e1ce0..png"},48977:(e,t,o)=>{e.exports=o.p+"Step2.10e90fb7..png"},2914:(e,t,o)=>{e.exports=o.p+"tree.4b27c6bb..png"},97765:(e,t,o)=>{e.exports=o.p+"treemap_v2_1.f997bb13..png"}}]);